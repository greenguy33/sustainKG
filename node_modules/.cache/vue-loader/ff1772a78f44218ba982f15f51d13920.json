{"remainingRequest":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue","mtime":1627141868486},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKCmltcG9ydCAkIGZyb20gJ2pxdWVyeScKaW1wb3J0IHsKICAgIGdldE5vZGVTZWxmUGF0aCwKICAgIHNldExpbmtHcm91cCwKICAgIGdldE5vZGVzTGluZSx9IGZyb20gJy4vdXRpbHMvZGV2aWNlUmVsYXRpb24nCgoKCgpleHBvcnQgZGVmYXVsdCB7CgoKICAgIGRhdGEoKXsKCgoKICAgICAgICBsZXQgaW5mbyA9IHsKICAgICAgICAgICAgImxpbmtzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJzb3VyY2UiIDogMCwKICAgICAgICAgICAgICAgICAgICAidGFyZ2V0IiA6IDEsCiAgICAgICAgICAgICAgICAgICAgInR5cGUiIDogImxpbmsiLAogICAgICAgICAgICAgICAgICAgICdsYWJlbCc6ICdMaW5rIFRFU1QnLAogICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjp7fQoKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICBdLAogICAgICAgICAgICAibm9kZXMiOiBbCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgImlkIjogMCwKICAgICAgICAgICAgICAgICAgICAidHlwZSIgOiAibm9kZSIsCiAgICAgICAgICAgICAgICAgICAgLy8gImZhY3RvcnlDb2RlIiA6ICJoZWxsbyIsCiAgICAgICAgICAgICAgICAgICAgImxhYmVsIiA6ICJEZXZpY2UiLAogICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjp7Im5hbWUiOiJoZWxsbyJ9CiAgICAgICAgICAgICAgICAgICAgLy8gImxpbmtJZCI6IDEKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgImlkIjogMSwKICAgICAgICAgICAgICAgICAgICAidHlwZSIgOiAibm9kZSIsCiAgICAgICAgICAgICAgICAgICAgLy8gImZhY3RvcnlDb2RlIjogIldpbGwiLAogICAgICAgICAgICAgICAgICAgICJsYWJlbCI6ICJEZXZpY2UiLAogICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjp7Im5hbWUiOiJ3aWxsIn0KICAgICAgICAgICAgICAgICAgICAvLyAibGlua0lkIjogMAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAiaWQiOiAyLAogICAgICAgICAgICAgICAgICAgICJ0eXBlIiA6ICJub2RlIiwKICAgICAgICAgICAgICAgICAgICAvLyAiZmFjdG9yeUNvZGUiOiAibGFsYSIsCiAgICAgICAgICAgICAgICAgICAgImxhYmVsIjogIkRldmljZSIsCiAgICAgICAgICAgICAgICAgICAgInByb3BlcnRpZXMiOnsibmFtZSI6ImxhbGEifQogICAgICAgICAgICAgICAgICAgIC8vICJsaW5rSWQiOiAxCiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgXQogICAgICAgIH07CgoKCiAgICAgICAgcmV0dXJuIHsKCiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICAgICAgICAvLyBsb2cgZnVuY3Rpb24gcGFyYW1ldGVycwogICAgICAgICAgICB1c2VybmFtZTonJywKICAgICAgICAgICAgcGFzc3dvcmQ6JycsCiAgICAgICAgICAgIG5ld1VzZXJuYW1lOicnLAogICAgICAgICAgICBuZXdQYXNzd29yZDonJywKICAgICAgICAgICAgc2hvd0xvZ2luOnRydWUsCiAgICAgICAgICAgIGNlbnRlckRpYWxvZ1Zpc2libGU6ZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ19jcmVhdGVVc2VyOmZhbHNlLAogICAgICAgICAgICBvcHRpb25WaXNpYmxlOmZhbHNlLAoKCiAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgogICAgICAgICAgICBub2RlX3ZhbHVlOiAnJywKICAgICAgICAgICAgbGlua192YWx1ZTonJywKICAgICAgICAgICAgYnRuQ2hhbmdlRW5hYmxlOiB0cnVlLAogICAgICAgICAgICBub2RlX2xpc3Q6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ25vZGUxJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ25vZGUxJwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdub2RlMicsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdub2RlMicKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAndGVzdDMnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAndGVzdDMnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnYmJiJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2JiYicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCiAgICAgICAgICAgIGxpbmtfbGlzdDogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGluazEnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbGluazEnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGluazInLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbGluazInCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAndGVzdF8zJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ3Rlc3RfMycKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCiAgICAgICAgICAgIC8vIGluZm86IHsKICAgICAgICAgICAgLy8gICAgIG5vZGVzOltdLAogICAgICAgICAgICAvLyAgICAgbGlua3M6W10KICAgICAgICAgICAgLy8gfSwKCiAgICAgICAgICAgIGluZm86IGluZm8sCgogICAgICAgICAgICBpZkNsaWNrZWQ6ZmFsc2UsCgogICAgICAgICAgICBzZWxlY3RlZF9Ob2RlOiAnJywKCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOmZhbHNlLAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9saW5rOmZhbHNlLAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2Vfbm9kZV9uYW1lOmZhbHNlLAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lOmZhbHNlLAogICAgICAgICAgICB0ZW1wIDogW10sCiAgICAgICAgICAgIGNsaWNrVGltZUlkIDogMCwKCiAgICAgICAgICAgIG5vZGVfaWQ6ICcnLAogICAgICAgICAgICBsaW5rX2lkOiAnJywKICAgICAgICAgICAgbmV3X2xpbmtfbmFtZTonJywKICAgICAgICAgICAgbmV3X25vZGVfbmFtZTonJywKCiAgICAgICAgICAgIG1lbnU6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSBOb2RlcycsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobm9kZSxzZWxlY3Rfbm9kZSkgPT4gewoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgiRGVsZXRlIHRoaXMgbm9kZT8iLCAiVGlwcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJObyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgbm9kZSBpcyBkZWxldGVkIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0ICEhIScsc2VsZWN0X25vZGUsbm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZm8ubm9kZXMuc3BsaWNlKG5vZGUsMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPXRoaXMuaW5mby5saW5rcy5sZW5ndGgtMTsgaT49MDsgaS0tICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGluayBpbmRleCcsaSxub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmluZm8ubGlua3NbaV0uc291cmNlID09PSBzZWxlY3Rfbm9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLmluZm8ubGlua3NbaV0udGFyZ2V0ID09PSBzZWxlY3Rfbm9kZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mby5saW5rcy5zcGxpY2UoaSwxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZnRlciBkZWxldGUnLCB0aGlzLmluZm8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CgogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NhbmNlbCBEZWxldGUhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB9LAoKCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ2hhbmdlIE5vZGUgTmFtZScsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOihub2RlX2lkKT0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVfaWQgPSBub2RlX2lkOwoKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICBdLAoKICAgICAgICAgICAgbWVudV9lZGdlOlsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSBMaW5rcycsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobGluayxzZWxlY3RlZF9saW5rKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsbCcsbGluayxzZWxlY3RlZF9saW5rKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgiRGVsZXRlIHRoaXMgbGluaz8iLCAiVGlwcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJObyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgbGluayBpcyBkZWxldGVkIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mby5saW5rcy5zcGxpY2UobGluaywxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ2FuY2VsIERlbGV0ZSEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZSBsaW5rIE5hbWUnLAogICAgICAgICAgICAgICAgICAgIGFjdGlvbjoobGlua19pZCk9PgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rX2lkID0gbGlua19pZDsKCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCgoKICAgICAgICB9CiAgICB9LAoKICAgIG1vdW50ZWQoKSB7CgogICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKCiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBsb2dpbiBmdW5jdGlvbnMKCiAgICAgICAgY3JlYXRlVXNlcjpmdW5jdGlvbigpewoKICAgICAgICAgICAgdGhpcy5kaWFsb2dfY3JlYXRlVXNlciAgPSBmYWxzZTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2NyZWF0ZSB1c2VyIGZ1bmN0aW9uJyx0aGlzLm5ld1VzZXJuYW1lLCB0aGlzLm5ld1Bhc3N3b3JkKQoKCiAgICAgICAgfSwKCiAgICAgICAgaGFuZGxlU2hvdzpmdW5jdGlvbigpewogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXM7CiAgICAgICAgICAgIGxldCB1c2VyID0gJ3NxeSc7CiAgICAgICAgICAgIGxldCBwYXNzID0gJzEyMyc7CiAgICAgICAgICAgIGlmKHVzZXIgPT09IHRoaXMudXNlcm5hbWUgJiYgcGFzcyA9PT0gdGhpcy5wYXNzd29yZCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW49ZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlckRpYWxvZ1Zpc2libGU9ZmFsc2U7CiAgICAgICAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7IHBhdGg6ICcvaG9tZScgfSkKICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgICAgICB1cmw6Jy9nZXRVc2VyR3JhcGgnLAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDoncG9zdCcsCiAgICAgICAgICAgICAgICAgICAgZGF0YTp7CiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXIgOiAic29tZV91c2VyIgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJfbm9kZXMgPSByZXNwb25zZS5kYXRhLm5vZGVzOwogICAgICAgICAgICAgICAgICAgIGxldCB1c2VyX2xpbmtzID0gcmVzcG9uc2UuZGF0YS5saW5rczsKICAgICAgICAgICAgICAgICAgICAvLyBsZXQgdGVzdCA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgICAgICAgIGxldCBjaGFuZ2Vfbm9kZV90eXBlID0gdXNlcl9ub2Rlcy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgID0gTnVtYmVyKGVsZW1lbnQuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IGNoYW5nZV9saW5rX3R5cGUgPSB1c2VyX2xpbmtzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlkICA9IE51bWJlcihlbGVtZW50LmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zb3VyY2UgID0gTnVtYmVyKGVsZW1lbnQuc291cmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50YXJnZXQgID0gTnVtYmVyKGVsZW1lbnQudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbmdlX25vZGVfdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbmdlX2xpbmtfdHlwZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzID0gY2hhbmdlX25vZGVfdHlwZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmluZm8ubGlua3MgPSBjaGFuZ2VfbGlua190eXBlOwogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuaW5mbyA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKQogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKICAgICAgICAgICAgICAgIGFsZXJ0KCdXcm9uZyB1c2VybmFtZSBvciBwYXNzd29yZCcpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy51c2VybmFtZSx0aGlzLnBhc3N3b3JkKQoKICAgICAgICB9LAoKICAgICAgICBvblRhcExvZ2luOmZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5jZW50ZXJEaWFsb2dWaXNpYmxlPXRydWUKICAgICAgICB9LAoKICAgICAgICBsb2dvdXQ6ZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0aGlzLnNob3dMb2dpbiA9IHRydWU7CiAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSAnJzsKICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICcnOwogICAgICAgICAgICB0aGlzLmluZm89IHsKICAgICAgICAgICAgICAgIG5vZGVzOltdLAogICAgICAgICAgICAgICAgICAgIGxpbmtzOltdCiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbykKCiAgICAgICAgICAgIC8vIHRoaXMuJHJvdXRlci5wdXNoKHsgcGF0aDogJy8nIH0pCiAgICAgICAgfSwKCiAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCgoKCiAgICAgICAgc2hvd09wdGlvbigpCiAgICAgICAgewogICAgICAgICAgICBsZXQgaW5wdXRDb250ZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZWwtaW5wdXRfX2lubmVyJylbMF0udmFsdWU7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlucHV0Q29udGVudC5sZW5ndGgpOwoKICAgICAgICAgICAgdGhpcy5vcHRpb25WaXNpYmxlID0gaW5wdXRDb250ZW50Lmxlbmd0aCAhPT0gMDsKICAgICAgICAgICAgY29uc29sZS5sb2coJ29wdGlvbicsdGhpcy5vcHRpb25WaXNpYmxlKTsKICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgIH0sCgoKICAgICAgICBzZWxlY3RCbHVyKGUpIHsKICAgICAgICAgICAgLy8g5oSP6KeB57G75Z6LCiAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlICE9PSAnJykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIHNlbGVjdGlvbicsZS50YXJnZXQudmFsdWUpOwogICAgICAgICAgICAgICAgLy8gdGhpcy4kZm9yY2VVcGRhdGUoKSAgIC8vIOW8uuWItuabtOaWsAogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgdGhpcy5zZWxlY3RDbGVhcigpCiAgICAgICAgfSwKCiAgICAgICAgc2VsZWN0Q2xlYXIoKSB7CiAgICAgICAgICAgIHRoaXMubm9kZV92YWx1ZSA9ICcnOwogICAgICAgICAgICB0aGlzLmxpbmtfdmFsdWUgPSAnJzsKICAgICAgICAgICAgdGhpcy5uZXdfbm9kZV9uYW1lID0gJyc7CiAgICAgICAgICAgIHRoaXMubmV3X2xpbmtfbmFtZSA9ICcnOwogICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgIH0sCgogICAgICAgIHNlbGVjdENoYW5nZSh2YWwpIHsKCiAgICAgICAgICAgIGlmKHZhbCAhPT0gJycpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbms9PT10cnVlKXsKICAgICAgICAgICAgICAgIHRoaXMubGlua192YWx1ZSA9IHZhbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX2xpbmtfbmFtZSA9PT0gdHJ1ZSl7CiAgICAgICAgICAgICAgICB0aGlzLm5ld19saW5rX25hbWUgPSB2YWwKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPT09IHRydWUpewogICAgICAgICAgICAgICAgdGhpcy5uZXdfbm9kZV9uYW1lID0gdmFsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZih0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID09PSB0cnVlKXsKICAgICAgICAgICAgICAgIHRoaXMubm9kZV92YWx1ZSA9IHZhbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKCgogICAgICAgIGNhbmNlbCgpCiAgICAgICAgewogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfbGluayA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKTsKICAgICAgICAgICAgdGhpcy50ZW1wLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gdHJ1ZTsKICAgICAgICB9LAoKICAgICAgICBhZGROb2RlcygpewogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZG91YmxlQ2xpY2sodGhpcy5pbmZvLCB0aGlzLmluZm8ubm9kZXMsIHRoaXMubm9kZV92YWx1ZSk7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKTsKICAgICAgICAgICAgdGhpcy5vcHRpb25WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gdHJ1ZTsKCiAgICAgICAgfSwKCiAgICAgICAgY2hhbmdlX25vZGVfbmFtZSgpewoKICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzW3RoaXMubm9kZV9pZF0ucHJvcGVydGllcy5uYW1lID0gdGhpcy5uZXdfbm9kZV9uYW1lOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RDbGVhcigpOwogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKICAgICAgICB9LAoKCiAgICAgICAgY2hhbmdlX2xpbmtfbmFtZSgpCiAgICAgICAgewoKICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmtzW3RoaXMubGlua19pZF0ubGFiZWwgPSB0aGlzLm5ld19saW5rX25hbWU7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX2xpbmtfbmFtZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCk7CiAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pCiAgICAgICAgfSwKCiAgICAgICAgYWRkTGlua3MoKQogICAgICAgIHsKCiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfbGluayA9IGZhbHNlOwoKICAgICAgICAgICAgaWYgKHRoaXMudGVtcC5sZW5ndGggPT09IDIpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlQ2xpY2sodGhpcy5pbmZvLCB0aGlzLnNlbGVjdGVkX05vZGUsIHRoaXMubGlua192YWx1ZSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoCgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQWRkIExpbmtzIScKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKQoKICAgICAgICB9LAoKCiAgICAgICAgcmVuZGVyR3JhcGgoaW5mbykgewogICAgICAgICAgICAvLyBsZXQgdGVtcCA9IFtdOwoKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW5kZXIgZGF0YScsaW5mbyk7CiAgICAgICAgICAgIGxldCB7bGlua3MsIG5vZGVzfSA9IGluZm87CgogICAgICAgICAgICAvL+WFs+ezu+WIhue7hAogICAgICAgICAgICBzZXRMaW5rR3JvdXAobGlua3MpOwoKICAgICAgICAgICAgLy/ngrnlh7voioLngrnlkI7lvLnlh7rnmoTngbDoibLlnIblnIjku6Xlj4rlm77moIfnmoTlrprkuYnvvIzliIbkuLrkuInnu4TjgJAxLuWIoOmZpOOAgTIu6IGU57O744CBMy7op6PpmaTkvY3nva7plIHlrprjgJEKICAgICAgICAgICAgbGV0IFtyZW1vdmVQYXRoLHJlbW92ZV9yZWN0MSxyZW1vdmVfcmVjdDIscmVtb3ZlX2xpbmUxLHJlbW92ZV9saW5lMixyZW1vdmVfbGluZTNdID0gW251bGxdOwogICAgICAgICAgICBsZXQgW3VubG9ja1BhdGgsdW5sb2NrX3BhdGgxLHVubG9ja19yZWN0MSx1bmxvY2tfbGluZTFdID0gW251bGxdOwogICAgICAgICAgICBsZXQgW2hpZGVQYXRoLGhpZGVfcGF0aDEsaGlkZV9wYXRoMixoaWRlX3BhdGgzLGhpZGVfcGF0aDQsaGlkZV9jaXJjbGUxLGhpZGVfbGluZTFdID0gW251bGxdOwogICAgICAgICAgICBsZXQgcmlnaHRBcmMgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMoNjApLmlubmVyUmFkaXVzKDMwKS5zdGFydEFuZ2xlKDApLmVuZEFuZ2xlKDEuODUpOwogICAgICAgICAgICBsZXQgbGVmdEFyYyA9IGQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyg2MCkuaW5uZXJSYWRpdXMoMzApLnN0YXJ0QW5nbGUoNC41KS5lbmRBbmdsZSg2LjIzKTsKICAgICAgICAgICAgbGV0IGJvdHRvbUFyYyA9IGQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyg2MCkuaW5uZXJSYWRpdXMoMzApLnN0YXJ0QW5nbGUoMS45KS5lbmRBbmdsZSg0LjQ1KTsKCiAgICAgICAgICAgIGQzLnNlbGVjdCgiI2dyYXBoIikuaHRtbCgnJyk7CgoKICAgICAgICAgICAgbGV0IGZvcmNlID0gZDMubGF5b3V0LmZvcmNlKCkvL2xheW91dOWwhmpzb27moLzlvI/ovazljJbkuLrlipvlrablm77lj6/nlKjnmoTmoLzlvI8KICAgICAgICAgICAgICAgIC5ub2Rlcyhub2RlcykvL+iuvuWumuiKgueCueaVsOe7hAogICAgICAgICAgICAgICAgLmxpbmtzKGxpbmtzKS8v6K6+5a6a6L+e57q/5pWw57uECiAgICAgICAgICAgICAgICAubGlua0Rpc3RhbmNlKDUwMCkvL+i/nuaOpee6v+mVv+W6pgogICAgICAgICAgICAgICAgLmNoYXJnZSgtMTUwMCkvL+mhtueCueeahOeUteiNt+aVsOOAguivpeWPguaVsOWGs+WumuaYr+aOkuaWpei/mOaYr+WQuOW8le+8jOaVsOWAvOi2iuWwj+i2iuS6kuebuOaOkuaWpQogICAgICAgICAgICAgICAgLm9uKCJ0aWNrIiwgZnVuY3Rpb24gKCl7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpY2soKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICApLy/mjIfml7bpl7Tpl7TpmpTvvIzpmpTkuIDmrrXml7bpl7TliLfmlrDkuIDmrKHnlLvpnaIKICAgICAgICAgICAgICAgIC5zdGFydCgpOy8v5byA5aeL6L2s5o2iCgoKCiAgICAgICAgICAgIGxldCB6b29tID0gZDMuYmVoYXZpb3Iuem9vbSgpCiAgICAgICAgICAgICAgICAuc2NhbGVFeHRlbnQoWy40LCAyXSkKICAgICAgICAgICAgICAgIC5vbigiem9vbSIsIHpvb21lZCk7CgogICAgICAgICAgICBsZXQgc3ZnID0gZDMuc2VsZWN0KCIjZ3JhcGgiKS5hcHBlbmQoInN2ZyIpCiAgICAgICAgICAgICAgICAuYXR0cigicG9pbnRlci1ldmVudCIsICJhbGwiKQogICAgICAgICAgICAgICAgLmF0dHIoInByZXNlcnZlQXNwZWN0UmF0aW8iLCAieE1pZFlNaWQgbWVldCIpLy/oh6rpgILlupTlrrnlmajlpKflsI8KICAgICAgICAgICAgICAgIC5hdHRyKCJ2aWV3Qm94IiwgIi00NjAgLTIyMCAxMjAwIDEyMDAiKQogICAgICAgICAgICAgICAgLy8gLm9uKCJkYmxjbGljayIsIGRvdWJsZUNsaWNrKQogICAgICAgICAgICAgICAgLmNhbGwoem9vbSk7CgoKCgogICAgICAgICAgICAvLyBvbGRfbm9kZXMgPSBub2RlczsKICAgICAgICAgICAgbGV0IGNpcmNsZV9nID0gc3ZnLnNlbGVjdEFsbCgiY2lyY2xlIikKICAgICAgICAgICAgICAgIC5kYXRhKGZvcmNlLm5vZGVzKCkpLy/ooajnpLrkvb/nlKhmb3JjZS5ub2Rlc+aVsOaNrgogICAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIixmdW5jdGlvbihub2RlLGkpewogICAgICAgICAgICAgICAgICAgIHJldHVybiAiZ19jaXJjbGVfIiArIGk7IH0pLy/moIforrBjaXJjbGXnmoTniLboioLngrkKICAgICAgICAgICAgICAgIC5zdHlsZSgiY3Vyc29yIiwicG9pbnRlciIpCiAgICAgICAgICAgICAgICAuY2FsbChkcmFnKCkpIC8v5bCG5b2T5YmN6YCJ5Lit55qE5YWD57Sg5Lyg5YiwZHJhZ+WHveaVsOS4re+8jOS9v+mhtueCueWPr+S7peiiq+aLluWKqAogICAgICAgICAgICAgICAgLm9uKCJjbGljayIsIChub2RlLCBpLCkgPT4gewogICAgICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47CgogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfpvKDmoIfljZXlh7snLHRoaXMuY2xpY2tUaW1lSWQpOwogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGQzLnNlbGVjdCh0aGlzKSkKICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVJZCk7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuY2xpY2tUaW1lSWQgPSBzZXRUaW1lb3V0KCAoKT0+IHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi6byg5qCH5Y2V5Ye7Iik7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zZWxlY3RlZF9Ob2RlID0gbm9kZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuYWRkTGlua3MoKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NlbGVjdGVkX05vZGUnLHRoaXMuc2VsZWN0ZWRfTm9kZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcC5wdXNoKG5vZGUuaW5kZXgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpdWxpdScsdGhpcy50ZW1wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudGVtcC5sZW5ndGggPT09IDIgJiYgdGhpcy50ZW1wWzBdICE9PSB0aGlzLnRlbXBbMV0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfbGluayA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnRlbXAubGVuZ3RoID09PSAyICYmIHRoaXMudGVtcFswXSA9PT0gdGhpcy50ZW1wWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNpbmdsZUNsaWNrKGluZm8sIG5vZGUsIHRlbXAsIHRoaXMuc3RhdGUyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrU3R5bGUobm9kZSwgaSwgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLCAyNTApOwogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAvLyAub24oJ21vdXNlb3ZlcicsIChub2RlKSA9PiB7CiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsKICAgICAgICAgICAgICAgIC8vICAgICAvLyBzaG93Tm9kZUluZm8obm9kZSwgdGhpcyk7CiAgICAgICAgICAgICAgICAvLyAgICAgLy8gc2hvd0NpcmNsZUJvcmRlck91dGVyQXJjKG5vZGUsIGkpOwogICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAgIC5vbigiZGJsY2xpY2siLCAobm9kZSwgKT0+ewoKCiAgICAgICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZG91YmxlIGNsaWNrJyxub2Rlcyk7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lSWQpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCflj4zlh7snLHRoaXMuY2xpY2tUaW1lSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZG91YmxlQ2xpY2soaW5mbywgbm9kZSwgbm9kZXMsIGxpbmtzKQoKCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLm9uKCdjb250ZXh0bWVudScsKGQsbm9kZSk9PnsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbm9kZSEhISEhJyxkLG5vZGUpOwogICAgICAgICAgICAgICAgICAgIE1lbnUodGhpcy5tZW51KShkLCBkMy5ldmVudCwgbm9kZSkKCiAgICAgICAgICAgICAgICB9KTsKCgoKCiAgICAgICAgICAgIHN2Zy5vbigiZGJsY2xpY2suem9vbSIsIG51bGwpOy8v5Y+W5raIc3Zn5ZKM5ZyG5ZyI55qE5Y+M5Ye75pS+5aSn5LqL5Lu277yIZDPkuK3pu5jorqTlvIDlkK835Liq5LqL5Lu277yM5YWz6Zet6Ziy5q2i5LiO5LiK6Z2i55qE5Y+M5Ye75LqL5Lu25Yay56qB77yJCiAgICAgICAgICAgIGNpcmNsZV9nLm9uKCJkYmxjbGljay56b29tIiwgbnVsbCk7CgoKCiAgICAgICAgICAgIC8v5Y2V5Ye75pS55Y+Y6IqC54K56aKc6ImyIOihqOaYjumAieS4rQogICAgICAgICAgICBmdW5jdGlvbiBjbGlja1N0eWxlKG5vZGUsIGksIF90aGlzKXsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5pZkNsaWNrZWQpOwogICAgICAgICAgICAgICAgLy8gX3RoaXMuaWZDbGlja2VkID0gdHJ1ZTsKCgogICAgICAgICAgICAgICAgY2lyY2xlX2cuYXR0cignbm9kZScsIGZ1bmN0aW9uKG4pIHsKCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NsaWNrIGNoYW5nZSBjb2xvcicsbi5pZCxub2RlLmlkKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0ZWQgbm9kZScsbi5pbmRleCxub2RlLmluZGV4KTsKCiAgICAgICAgICAgICAgICAgICAgaWYobi5pbmRleCA9PT0gbm9kZS5pbmRleCAmJiBfdGhpcy5pZkNsaWNrZWQ9PT1mYWxzZSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgbi5pbmRleCkuc2VsZWN0KCdjaXJjbGUnKS5zdHlsZSgnZmlsbCcsJ3JlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyDmnInpl67popjvvIHvvIHvvIHvvIHvvIHvvIHvvIEKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hhaGEnLGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIG4uaW5kZXgpLnNlbGVjdCgnY2lyY2xlJykpOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pZkNsaWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5paw6YCJ55qEIHRydWUnLF90aGlzLmlmQ2xpY2tlZCk7CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG4uaW5kZXggPT09IG5vZGUuaW5kZXggJiYgX3RoaXMuaWZDbGlja2VkPT09dHJ1ZSApCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBuLmluZGV4KS5zZWxlY3QoJ2NpcmNsZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gZ2V0Q2lyY2xlQ29sb3Iobm9kZSk7fSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlmQ2xpY2tlZCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6YeN5aSN6YCJ55qE6aKc6Imy5Y+Y5Zue5Y67IGZhbHNlJyxfdGhpcy5pZkNsaWNrZWQpOwoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihuLmluZGV4ICE9PSBub2RlLmluZGV4KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub2RlIGFyZSBkaWZmZXJlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgbi5pbmRleCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZWxlY3QoJ2NpcmNsZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gZ2V0Q2lyY2xlQ29sb3Iobm9kZSk7fSkKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KCgoKCiAgICAgICAgICAgIC8v5ZyG5ZyICiAgICAgICAgICAgIGxldCBjaXJjbGUgPSBjaXJjbGVfZy5hcHBlbmQoImNpcmNsZSIpCiAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIycHgiKQogICAgICAgICAgICAgICAgLmF0dHIoInIiLCAzMCkvL+iuvue9ruWchuWciOWNiuW+hAogICAgICAgICAgICAgICAgLnN0eWxlKCJmaWxsIiwgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGdldENpcmNsZUNvbG9yKG5vZGUpOyB9KTsKCiAgICAgICAgICAgIGxldCB0ZXh0ID0gY2lyY2xlX2cuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgICAgICAgIC5hdHRyKCJkeSIsICIuMzVlbSIpCiAgICAgICAgICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikvL+WcqOWchuWciOS4reWKoOS4iuaVsOaNrgogICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgIiNGRkZGRkYiKQogICAgICAgICAgICAgICAgLmF0dHIoJ3gnLGZ1bmN0aW9uKGQpeyBhcHBlbmRDaXJjbGVUZXh0KGQsIHRoaXMpOyB9KTsKCiAgICAgICAgICAgIC8v5ZyG5ZyI55qE5o+Q56S65paH5a2XCiAgICAgICAgICAgIGNpcmNsZS5hcHBlbmQoInN2Zzp0aXRsZSIpLnRleHQoZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdub2RlJzogcmV0dXJuIG5vZGUucHJvcGVydGllcy5uYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0RldmljZSc6IHJldHVybiBub2RlLmZhY3RvcnlDb2RlOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0FwcGxpY2F0aW9uJzogcmV0dXJuIG5vZGUuYXBwbGljYXRpb25OYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ1Bvc2l0aW9uJzogcmV0dXJuIG5vZGUucG9zaXRpb25Db2RlOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ01hbnVmYWN0dXJlcic6IHJldHVybiBub2RlLm1hbnVmYWN0dXJlck5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnSW90SW5mcmFzdHJ1Y3R1cmUnOiByZXR1cm4gbm9kZS5pb3RJbmZyYXN0cnVjdHVyZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnRGV2aWNlQWRtaW4nOiByZXR1cm4gbm9kZS5uYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGV4dC5hcHBlbmQoInN2Zzp0aXRsZSIpLnRleHQoZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlICdub2RlJzogcmV0dXJuIG5vZGUucHJvcGVydGllcy5uYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0RldmljZSc6IHJldHVybiBub2RlLmZhY3RvcnlDb2RlOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0FwcGxpY2F0aW9uJzogcmV0dXJuIG5vZGUuYXBwbGljYXRpb25OYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ1Bvc2l0aW9uJzogcmV0dXJuIG5vZGUucG9zaXRpb25Db2RlOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ01hbnVmYWN0dXJlcic6IHJldHVybiBub2RlLm1hbnVmYWN0dXJlck5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnSW90SW5mcmFzdHJ1Y3R1cmUnOiByZXR1cm4gbm9kZS5pb3RJbmZyYXN0cnVjdHVyZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnRGV2aWNlQWRtaW4nOiByZXR1cm4gbm9kZS5uYW1lOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy/orr7nva7ov57mjqXnur8KICAgICAgICAgICAgbGV0IGRlZnMgPSBzdmcuYXBwZW5kKCJkZWZzIik7CgogICAgICAgICAgICBkZWZzLmFwcGVuZCgibWFya2VyIikKICAgICAgICAgICAgICAgIC5hdHRyKCJpZCIsICJlbmQiKQogICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlclVuaXRzIiwic3Ryb2tlV2lkdGgiKS8v6K6+572u5Li6c3Ryb2tlV2lkdGjnrq3lpLTkvJrpmo/nnYDnur/nmoTnspfnu4blj5HnlJ/lj5jljJYKICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJVbml0cyIsICJ1c2VyU3BhY2VPblVzZSIpCiAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyV2lkdGgiLCAyMCkvL+agh+ivhueahOWkp+WwjwogICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlckhlaWdodCIsIDIwKQogICAgICAgICAgICAgICAgLmF0dHIoInZpZXdCb3giLCAiMCAtNCAxMiAxNSIpLy/lnZDmoIfns7vnmoTljLrln58KICAgICAgICAgICAgICAgIC5hdHRyKCJyZWZYIiwgMCkvL+eureWktOWdkOaghwogICAgICAgICAgICAgICAgLmF0dHIoInJlZlkiLCAwKQogICAgICAgICAgICAgICAgLmF0dHIoIm9yaWVudCIsICdhdXRvJykvL+e7mOWItuaWueWQke+8jOWPr+iuvuWumuS4uu+8mmF1dG/vvIjoh6rliqjnoa7orqTmlrnlkJHvvInlkowg6KeS5bqm5YC8CiAgICAgICAgICAgICAgICAuYXBwZW5kKCJzdmc6cGF0aCIpCiAgICAgICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiw1KS8v566t5aS05a695bqmCiAgICAgICAgICAgICAgICAuYXR0cigiZCIsICJNMCwtNUwxMCwwTDAsNSIpLy/nrq3lpLTnmoTot6/lvoQKICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ3JnYmEoMCwwLDAsIDAuNCknKTsvL+eureWktOminOiJsgoKICAgICAgICAgICAgZGVmcy5hcHBlbmQoIm1hcmtlciIpCiAgICAgICAgICAgICAgICAuYXR0cigiaWQiLCAic3RhcnQiKQogICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlclVuaXRzIiwic3Ryb2tlV2lkdGgiKS8v6K6+572u5Li6c3Ryb2tlV2lkdGjnrq3lpLTkvJrpmo/nnYDnur/nmoTnspfnu4blj5HnlJ/lj5jljJYKICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJVbml0cyIsICJ1c2VyU3BhY2VPblVzZSIpCiAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyV2lkdGgiLCAyMCkvL+agh+ivhueahOWkp+WwjwogICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlckhlaWdodCIsIDIwKQogICAgICAgICAgICAgICAgLmF0dHIoInZpZXdCb3giLCAiMCAtNCAxMiAxNSIpLy/lnZDmoIfns7vnmoTljLrln58KICAgICAgICAgICAgICAgIC5hdHRyKCJyZWZYIiwgMCkvL+eureWktOWdkOaghwogICAgICAgICAgICAgICAgLmF0dHIoInJlZlkiLCAwKQogICAgICAgICAgICAgICAgLmF0dHIoIm9yaWVudCIsICdhdXRvJykvL+e7mOWItuaWueWQke+8jOWPr+iuvuWumuS4uu+8mmF1dG/vvIjoh6rliqjnoa7orqTmlrnlkJHvvInlkowg6KeS5bqm5YC8CiAgICAgICAgICAgICAgICAuYXBwZW5kKCJzdmc6cGF0aCIpCiAgICAgICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiw1KS8v566t5aS05a695bqmCiAgICAgICAgICAgICAgICAuYXR0cigiZCIsICJNMCwwTDEwLC01TDEwLDUiKS8v566t5aS055qE6Lev5b6ECiAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICdyZ2JhKDAsMCwwLCAyKScpOy8v566t5aS06aKc6ImyCgogICAgICAgICAgICBjb25zdCBlZGdlc19saW5lID0gc3ZnLmFwcGVuZCgiZyIpLnNlbGVjdEFsbCgiLmVkZ2VwYXRoIikKICAgICAgICAgICAgICAgIC5kYXRhKGZvcmNlLmxpbmtzKCkpCiAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgLmFwcGVuZCgicGF0aCIpCgogICAgICAgICAgICAgICAgLy8gLmF0dHIoJ21hcmtlci1lbmQnLCBmdW5jdGlvbihkLGkpIHsKICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnbGFsYScsZC5sYWJlbCxkLnhfc3RhcnQpCiAgICAgICAgICAgICAgICAvLyAgICAgaWYgKGQueF9zdGFydCA8IGQueF9lbmQpIHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ3NvdXJjZSA8IGVuZCcpCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAgInVybCgjZW5kKSI7CiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiAnJwogICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAgIC8vIC5hdHRyKCdtYXJrZXItc3RhcnQnLCBmdW5jdGlvbihkLGkpIHsKICAgICAgICAgICAgICAgIC8vICAgICBpZiAoZC54X3N0YXJ0ID49IGQueF9lbmQpIHsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ3NvdXJjZSA+IGVuZCcpCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAidXJsKCNzdGFydCkiOwogICAgICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gJycKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgICAgLy8gLmF0dHIoIm1hcmtlci1zdGFydCIsICJ1cmwoI3N0YXJ0KSIpCiAgICAgICAgICAgICAgICAvLyAuYXR0cigibWFya2VyLWVuZCIsICBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gZ2V0TWFya2VyQXJyb3coaSk7IH0pLy/moLnmja7nrq3lpLTmoIforrDnmoRpZOWPt+agh+iusOeureWktAogICAgICAgICAgICAgICAgLy8gLmF0dHIoIm1hcmtlci1lbmQiLCAgKS8v5qC55o2u566t5aS05qCH6K6w55qEaWTlj7fmoIforrDnrq3lpLQKICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgJ2JsYWNrJykKICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgMykvL+e6v+adoeeyl+e7hgogICAgICAgICAgICAgICAgLnN0eWxlKCJmaWxsLW9wYWNpdHkiLDApCiAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgLmF0dHIoImlkIiwgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuICdlZGdlcGF0aCcgKyBpOyB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbihkKXsgcmV0dXJuIGdldFN0cm9rZVdpZHRoKGQpOyB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgeyBlZGdlc19saW5lLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAzKSB9KQogICAgICAgICAgICAgICAgLy8gLm9uKCdjbGljaycsIChsaW5rKSA9PiB7IHRoaXMuZGVsZXRlTGluZSh0aGlzLmluZm8sbGluayk7IH0pCiAgICAgICAgICAgICAgICAub24oJ2NvbnRleHRtZW51JywoZCxsaW5rKT0+ewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGQpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsaW5rISEhJyxsaW5rKQogICAgICAgICAgICAgICAgICAgIE1lbnUodGhpcy5tZW51X2VkZ2UpKGQsZDMuZXZlbnQsbGluaykKCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IGVkZ2VzX3RleHQgPSBzdmcuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIuZWRnZXRleHQiKQogICAgICAgICAgICAgICAgLmRhdGEobGlua3MpCiAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgICAgICAuc3R5bGUoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwibGluZXRleHQiKQogICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgIm1pZGRsZSIpCiAgICAgICAgICAgICAgICAuYXR0cigiZmlsbC1vcGFjaXR5IiwgMC41KQogICAgICAgICAgICAgICAgLnN0eWxlKCJjdXJzb3IiLCJwb2ludGVyIikKCiAgICAgICAgICAgICAgICAuYXR0cih7J2NsYXNzJzogJ2VkZ2VsYWJlbCcsCiAgICAgICAgICAgICAgICAgICAgJ2lkJzogZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuICdlZGdlcGF0aCcgKyBpOyB9LAogICAgICAgICAgICAgICAgICAgICdkeCc6IDE5MCwgJ2R5JzogMjAsCiAgICAgICAgICAgICAgICAgICAgJ2ZpbGwnOidibGFjaycsCiAgICAgICAgICAgICAgICAgICAgLy8gJ3RyYW5zZm9ybSc6IGVkZ2VfdGV4dF9Qb3NpdGlvbigpCiAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgZnVuY3Rpb24gZWRnZV90ZXh0X1Bvc2l0aW9uKCl7CgogICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoMTgwLDQwLDUpJwogICAgICAgICAgICB9CgoKCiAgICAgICAgICAgIC8v6K6+572u57q/5p2h5LiK55qE5paH5a2XCiAgICAgICAgICAgIGVkZ2VzX3RleHQuYXBwZW5kKCd0ZXh0UGF0aCcpCiAgICAgICAgICAgICAgICAuYXR0cigneGxpbms6aHJlZicsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAnI2VkZ2VwYXRoJyArIGkgfSkKICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJub25lIikKICAgICAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCAyMCkKICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmxhYmVsOyB9KTsKCgoKICAgICAgICAgICAgLy8gZm9yY2Uub24oInRpY2siLCB0aWNrKS8v5oyH5pe26Ze06Ze06ZqU77yM6ZqU5LiA5q615pe26Ze05Yi35paw5LiA5qyh55S76Z2iCiAgICAgICAgICAgIC8vICAgICAuc3RhcnQoKTsvL+W8gOWni+i9rOaNogogICAgICAgICAgICBmdW5jdGlvbiB6b29tZWQoKSB7Ly9zdmfkuIvnmoRn5qCH562+56e75Yqo5aSn5bCPCiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCJnIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICArZDMuZXZlbnQudHJhbnNsYXRlICsgIilzY2FsZSgiICtkMy5ldmVudC5zY2FsZSArICIpIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE1hcmtlckFycm93KGkpIHsKICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmQoImRlZnMiKS5hcHBlbmQoIm1hcmtlciIpICAgLy/nrq3lpLQKICAgICAgICAgICAgICAgICAgICAuYXR0cigiaWQiLCAiYXJyb3ciK2kpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlclVuaXRzIiwic3Ryb2tlV2lkdGgiKS8v6K6+572u5Li6c3Ryb2tlV2lkdGjnrq3lpLTkvJrpmo/nnYDnur/nmoTnspfnu4blj5HnlJ/lj5jljJYKICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCAidXNlclNwYWNlT25Vc2UiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJXaWR0aCIsIDIwKS8v5qCH6K+G55qE5aSn5bCPCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlckhlaWdodCIsIDIwKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ2aWV3Qm94IiwgIjAgLTQgMTIgMTUiKS8v5Z2Q5qCH57O755qE5Yy65Z+fCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInJlZlgiLCAwKS8v566t5aS05Z2Q5qCHCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInJlZlkiLCAwKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJvcmllbnQiLCAnYXV0bycpLy/nu5jliLbmlrnlkJHvvIzlj6/orr7lrprkuLrvvJphdXRv77yI6Ieq5Yqo56Gu6K6k5pa55ZCR77yJ5ZKMIOinkuW6puWAvAogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoInN2ZzpwYXRoIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiw1KS8v566t5aS05a695bqmCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCAiTTAsLTVMMTAsMEwwLDUiKS8v566t5aS055qE6Lev5b6ECiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAncmdiYSgwLDAsMCwgMC40KScpOy8v566t5aS06aKc6ImyCiAgICAgICAgICAgICAgICByZXR1cm4gInVybCgjYXJyb3dfZW5kIiArIGkgKyAiKSI7CiAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3Ryb2tlV2lkdGgoZCkgewogICAgICAgICAgICAgICAgZWRnZXNfbGluZS5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgZnVuY3Rpb24gKGVkZ2UpIHsKICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZWRnZS5yZWxhdGlvbi5yZWxhdGlvbnNoaXBJZCA9PT0gZC5yZWxhdGlvbi5yZWxhdGlvbnNoaXBJZCA/IDMgOiAxOwogICAgICAgICAgICAgICAgICAgIHJldHVybiA2CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZHJhZygpey8v5ouW5ou95Ye95pWwCiAgICAgICAgICAgICAgICByZXR1cm4gZm9yY2UuZHJhZygpLm9uKCJkcmFnc3RhcnQiLGZ1bmN0aW9uKGQpewogICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvL+WPlua2iOm7mOiupOS6i+S7tgogICAgICAgICAgICAgICAgICAgIGQuZml4ZWQgPSB0cnVlOy8v5ouW5ou95byA5aeL5ZCO6K6+5a6a6KKr5ouW5ou95a+56LGh5Li65Zu65a6aCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gY2lyY2xlQ2xpY2sobm9kZSwgaSwgX3RoaXMpIHsKICAgICAgICAgICAgICAgIC8v6I635Y+W5b2T5YmN6IqC54K55piv5ZCm5YyF5ZCr5ZyG546vCiAgICAgICAgICAgICAgICBsZXQgZXhpc3RlZFJpbmcgPSBzdmcuc2VsZWN0KCcuZ19jaXJjbGVfJyArIGkpLnNlbGVjdEFsbCgnLmdfY2lyY2xlX3BhdGgnKTsKICAgICAgICAgICAgICAgIC8v5riF6Zmk5LiK5Liq6IqC54K555qE5ZyG5ZyI5Lul5Y+K5Zu+5qCHCiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcuZ19jaXJjbGVfcGF0aCcpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnLnJlbW92ZV9hJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcuaGlkZV9hJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcudW5sb2NrX2EnKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIGlmKGV4aXN0ZWRSaW5nICYmIGV4aXN0ZWRSaW5nWzBdLmxlbmd0aCA9PT0gMCkgewogICAgICAgICAgICAgICAgICAgIC8vc2hvd0NpcmNsZUJvcmRlck91dGVyQXJjKG5vZGUsIGkpOwogICAgICAgICAgICAgICAgICAgIC8v57uY5Yi254Gw6Imy5Y+v54K55Ye75ZyG5ZyI77yM5YiG5Li65LiJ6YOo5YiG5YiG5Yir57uY5Yi2CiAgICAgICAgICAgICAgICAgICAgc2hvd1JlbW92ZShub2RlLCBpLCBfdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgc2hvd1VubG9jayhub2RlLCBpLCBfdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgc2hvd0hpZGUobm9kZSxpLCBfdGhpcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldENpcmNsZUNvbG9yKG5vZGUpIHsKICAgICAgICAgICAgICAgIGxldCBjb2xvciA9IHsKICAgICAgICAgICAgICAgICAgICAnRGV2aWNlJzogIiNGRjlEMDAiLAogICAgICAgICAgICAgICAgICAgICdQb3NpdGlvbic6ICIjQzQ3N0U5IiwKICAgICAgICAgICAgICAgICAgICAnV29yayc6ICcjNjdDQUY0JywKICAgICAgICAgICAgICAgICAgICAnSW5zdGFsbCc6ICcjQkNERDczJywKICAgICAgICAgICAgICAgICAgICAnQXBwbGljYXRpb24nOiAnI0REMUU5RScsCiAgICAgICAgICAgICAgICAgICAgJ01hbnVmYWN0dXJlcic6ICcjRERCQTlFJywKICAgICAgICAgICAgICAgICAgICAnSW90SW5mcmFzdHJ1Y3R1cmUnOiAnIzZjYTVkZCcsCiAgICAgICAgICAgICAgICAgICAgJ0RldmljZUFkbWluJzogJyM1MEREODcnLAogICAgICAgICAgICAgICAgfTsvL+WchuWciOiDjOaZr+iJsgogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yW25vZGUubGFiZWxdIHx8ICcjQzQ3N0U5JzsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gYXBwZW5kQ2lyY2xlVGV4dChkLCBfdGhpcykgewogICAgICAgICAgICAgICAgbGV0IGNpcmNsZVRleHQgPSAnJzsKICAgICAgICAgICAgICAgIGlmKGQudHlwZSA9PT0gJ25vZGUnICYmIGQucHJvcGVydGllcy5uYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGQucHJvcGVydGllcy5uYW1lOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmKGQubGFiZWwgPT09ICdQb3NpdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gZC5wb3NpdGlvbkNvZGU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQubGFiZWwgPT09ICdBcHBsaWNhdGlvbicpIHsKICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gZC5hcHBsaWNhdGlvbk5hbWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQubGFiZWwgPT09ICdNYW51ZmFjdHVyZXInKSB7CiAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGQubWFudWZhY3R1cmVyTmFtZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5sYWJlbCA9PT0gJ0lvdEluZnJhc3RydWN0dXJlJykgewogICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLmlvdEluZnJhc3RydWN0dXJlTmFtZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5sYWJlbCA9PT0gJ0RldmljZUFkbWluJykgewogICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLm5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvL+WmguaenOWwj+S6juWbm+S4quWtl+espu+8jOS4jeaNouihjAogICAgICAgICAgICAgICAgaWYoY2lyY2xlVGV4dCAmJiBjaXJjbGVUZXh0Lmxlbmd0aCA+IDE0KXsKICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gY2lyY2xlVGV4dC5zdWJzdHJpbmcoMCwxNCkgKyAiLi4uIjsKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoX3RoaXMpLnRleHQoZnVuY3Rpb24oKXtyZXR1cm4gJyc7fSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoX3RoaXMpLmFwcGVuZCgndHNwYW4nKS5hdHRyKCd4JywwKS5hdHRyKCd5JywwKS5hdHRyKCJmb250LXNpemUiLCAxMCkKICAgICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbigpeyByZXR1cm4gY2lyY2xlVGV4dDsgfSk7CiAgICAgICAgICAgIH0KCgoKCgoKICAgICAgICAgICAgZnVuY3Rpb24gdGljaygpIHsKCiAgICAgICAgICAgICAgICBjaXJjbGUuYXR0cigidHJhbnNmb3JtIiwgdHJhbnNmb3JtMSk7Ly/lnIblnIgKICAgICAgICAgICAgICAgIHRleHQuYXR0cigidHJhbnNmb3JtIiwgdHJhbnNmb3JtMik7Ly/pobbngrnmloflrZcKICAgICAgICAgICAgICAgIC8vbGlua+Wlh+aVsOaciemXrumimAogICAgICAgICAgICAgICAgZWRnZXNfbGluZQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgZnVuY3Rpb24gKGQpIHsKCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldE5vZGVzTGluZShkLGVkZ2VzX2xpbmUsZGVmcyk7Ly/mm7Lnur/ot6/lvoQKCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVkZ2VzX2xpbmUuYXR0cignbWFya2VyLWVuZCcsIGZ1bmN0aW9uKGQsaSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC54X3N0YXJ0IDwgZC54X2VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3NvdXJjZSA8IGVuZCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gICJ1cmwoI2VuZCkiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgICAgICAgICAgICAgIH0pLmF0dHIoJ21hcmtlci1zdGFydCcsIGZ1bmN0aW9uKGQsaSkgewogICAgICAgICAgICAgICAgICAgIGlmIChkLnhfc3RhcnQgPj0gZC54X2VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc291cmNlID4gZW5kJykKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ1cmwoI3N0YXJ0KSI7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiAnJwoKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICA7CgogICAgICAgICAgICAgICAgLy8gaWYoY2lyY2xlQm9yZGVyT3V0ZXJBcmNPYmogIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIC8vICAgY2lyY2xlQm9yZGVyT3V0ZXJBcmNPYmouYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpeyByZXR1cm4gInRyYW5zbGF0ZSgiK2QueCsiLCIrZC55KyIpIiB9KTsKICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICAvL+e7mOWItuiKgueCueWIoOmZpOWKn+iDveWNiuWchueOrwogICAgICAgICAgICAgICAgLy8gaWYocmVtb3ZlUGF0aCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgLy8gICAgIHJlbW92ZVBhdGguYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpeyByZXR1cm4gInRyYW5zbGF0ZSgiK2QueCsiLCIrZC55KyIpIiB9KTsKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IHIxID0gbnVsbDsKICAgICAgICAgICAgICAgIC8vICAgICByZW1vdmVfcmVjdDEuYXR0cignZCcsZnVuY3Rpb24oZCkgeyByMSA9IGQ7IH0pCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKCJ4IixyMS54ICsgMzMgKyA2Ljc1KS5hdHRyKCJ5IixyMS55ICAtIDM2ICsgOS43NSkuYXR0cigid2lkdGgiLDUpLmF0dHIoImhlaWdodCIsMykuYXR0cigicngiLDEuNSkuYXR0cigicnkiLDEuNSk7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgIGxldCByMiA9IG51bGw7CiAgICAgICAgICAgICAgICAvLyAgICAgcmVtb3ZlX3JlY3QyLmF0dHIoJ2QnLGZ1bmN0aW9uKGQpIHsgcjIgPSBkOyB9KQogICAgICAgICAgICAgICAgLy8gICAgICAgICAuYXR0cigieCIscjIueCArIDMwICsgNi43NSkuYXR0cigieSIscjIueSAgLSAzMyArIDkuNzUpLmF0dHIoIndpZHRoIiwxMikuYXR0cigiaGVpZ2h0IiwxNCkuYXR0cigicngiLDEuNSkuYXR0cigicnkiLDEuNSk7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgIGxldCBsMSA9IG51bGw7CiAgICAgICAgICAgICAgICAvLyAgICAgcmVtb3ZlX2xpbmUxLmF0dHIoJ2QnLGZ1bmN0aW9uKGQpIHsgbDEgPSBkOyB9KQogICAgICAgICAgICAgICAgLy8gICAgICAgICAuYXR0cigieDEiLGwxLnggKyAyOCArIDYuNzUpLmF0dHIoInkxIixsMS55IC0gMzMgKyA5Ljc1KS5hdHRyKCJ4MiIsbDEueCArIDQ1ICsgNi43NSkuYXR0cigieTIiLGwxLnkgLSAzMyArIDkuNzUpOwogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vICAgICBsZXQgbDIgPSBudWxsOwogICAgICAgICAgICAgICAgLy8gICAgIHJlbW92ZV9saW5lMi5hdHRyKCdkJyxmdW5jdGlvbihkKSB7IGwyID0gZDsgfSkKICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoIngxIixsMi54ICsgMzQgKyA2Ljc1KS5hdHRyKCJ5MSIsbDIueSAtIDMwICsgOS43NSkuYXR0cigieDIiLGwyLnggKyAzNCArIDYuNzUpLmF0dHIoInkyIixsMi55IC0gMjMgKyA5Ljc1KTsKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IGwzID0gbnVsbDsKICAgICAgICAgICAgICAgIC8vICAgICByZW1vdmVfbGluZTMuYXR0cignZCcsZnVuY3Rpb24oZCkgeyBsMyA9IGQ7IH0pCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKCJ4MSIsbDMueCArIDM4ICsgNi43NSkuYXR0cigieTEiLGwzLnkgLSAzMCArIDkuNzUpLmF0dHIoIngyIixsMy54ICsgMzggKyA2Ljc1KS5hdHRyKCJ5MiIsbDMueSAtIDIzICsgOS43NSk7CiAgICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICAgICAgLy/nu5jliLbop6PpmaToioLngrnkvY3nva7plIHlrprljYrlnIbnjq8KICAgICAgICAgICAgICAgIC8vIGlmKHVubG9ja1BhdGggIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIC8vICAgICB1bmxvY2tQYXRoLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKXsgcmV0dXJuICJ0cmFuc2xhdGUoIitkLngrIiwiK2QueSsiKSIgfSk7CiAgICAgICAgICAgICAgICAvLyAgICAgdW5sb2NrX3BhdGgxLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKXsgcmV0dXJuICJ0cmFuc2xhdGUoIisgKGQueCAtIDQ1KSArIiwiKyAoZC55IC0gMjMpICsiKSIgfSk7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgIGxldCByMSA9IG51bGw7CiAgICAgICAgICAgICAgICAvLyAgICAgdW5sb2NrX3JlY3QxLmF0dHIoJ2QnLGZ1bmN0aW9uKGQpIHsgcjEgPSBkOyB9KQogICAgICAgICAgICAgICAgLy8gICAgICAgICAuYXR0cigieCIscjEueCAgLSA1MiArIDYuNzUpLmF0dHIoInkiLHIxLnkgLSAzMCArIDkuNzUpLmF0dHIoIndpZHRoIiwxNSkuYXR0cigiaGVpZ2h0IiwxMikuYXR0cigicngiLDEuNSkuYXR0cigicnkiLDEuNSk7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgIGxldCBsMSA9IG51bGw7CiAgICAgICAgICAgICAgICAvLyAgICAgdW5sb2NrX2xpbmUxLmF0dHIoJ2QnLGZ1bmN0aW9uKGQpIHsgbDEgPSBkOyB9KQogICAgICAgICAgICAgICAgLy8gICAgICAgICAuYXR0cigieDEiLGwxLnggIC0gNTIgKyAxNSkuYXR0cigieTEiLGwxLnkgIC0gMzAgKyAxNSkuYXR0cigieDIiLGwxLnggIC0gNTIgKzE1KS5hdHRyKCJ5MiIsbDEueSAgLSAzMCArIDE4KTsKICAgICAgICAgICAgICAgIC8vIH0KCiAgICAgICAgICAgICAgICAvLyAvL+e7mOWItumakOiXj+iKgueCueWSjOWFs+ezu+WNiuWchueOrwogICAgICAgICAgICAgICAgLy8gaWYoaGlkZVBhdGggIT09IG51bGwpIHsKICAgICAgICAgICAgICAgIC8vICAgICBoaWRlUGF0aC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCl7IHJldHVybiAidHJhbnNsYXRlKCIrZC54KyIsIitkLnkrIikiIH0pOwogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vICAgICBoaWRlX3BhdGgxCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuICJNIiArIChkLnggLSAxMykgKyAiLCIgKyAoZC55ICsgNDIpICsgIkExNSwxNSwwLDAsMSIgKyAoZC54ICsgMTMpICsgIiwiICsgKGQueSArIDQyKQogICAgICAgICAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vICAgICBoaWRlX3BhdGgyCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuICJNIisgKGQueCAtIDEyICsgMTAuNCkgKyAiLCIgKyAoZC55ICsgMzQgKyAxMC45MzcpICsgIkEiICsgMy43NDkgKyAiLCIgKyAzLjc0OSArICIsMCwxLDEsIiArIChkLnggLSAxMiArIDE1LjMzOCkgKyAiLCIgKyAoZC55ICsgMzMgKyA5KQogICAgICAgICAgICAgICAgLy8gICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vICAgICBoaWRlX3BhdGgzCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuICJNIiArIChkLnggLSAxMikgKyAiLCIgKyAoZC55ICsgNDIpICsgIkEyMCwyMCwwLDAsMCIgKyAoZC54IC0gNCkgKyAiLCIgKyAoZC55ICsgNDcpCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8gICAgIGhpZGVfcGF0aDQKICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gIk0iICsgKGQueCArIDExKSArICIsIiArIChkLnkgKyA0NCkgKyAiQTIwLDIwLDAsMCwwIiArIChkLnggKyAxMykgKyAiLCIgKyAoZC55ICsgNDIpCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vICAgICBsZXQgYzEgPSBudWxsOwogICAgICAgICAgICAgICAgLy8gICAgIGhpZGVfY2lyY2xlMS5hdHRyKCdkJyxmdW5jdGlvbihkKSB7IGMxID0gZDsgfSkKICAgICAgICAgICAgICAgIC8vICAgICAgICAgLmF0dHIoImN4IixjMS54IC0gMTIgKyAxNy4xNSkuYXR0cigiY3kiLGMxLnkgKyAzMyArIDE3LjI1KS5hdHRyKCJyIiw2KTsKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyAgICAgbGV0IGwxID0gbnVsbDsKICAgICAgICAgICAgICAgIC8vICAgICBoaWRlX2xpbmUxLmF0dHIoJ2QnLGZ1bmN0aW9uKGQpIHsgbDEgPSBkOyB9KQogICAgICAgICAgICAgICAgLy8gICAgICAgICAuYXR0cigieDEiLGwxLnggLSAxMiArIDE0LjE1KS5hdHRyKCJ5MSIsbDEueSArIDMzICsgMTcuMjUpLmF0dHIoIngyIixsMS54IC0gMTIgKyAyMC4xNSkuYXR0cigieTIiLGwxLnkgKyAzMyArIDE3LjI1KTsKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICB9CgogICAgICAgICAgICAvL+iuvue9ruWchuWciOWSjOaWh+Wtl+eahOWdkOaghwogICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm0xKGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyBkLnggKyAiLCIgKyBkLnkgKyAiKSI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybTIoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIChkLngpICsgIiwiICsgZC55ICsgIikiOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dSZW1vdmUobm9kZSwgaSwgX3RoaXMpIHsKICAgICAgICAgICAgICAgIHJlbW92ZVBhdGggPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInBhdGgiKS5hdHRyKCdjbGFzcycsICdnX2NpcmNsZV9wYXRoJykKICAgICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgbm9kZS54ICsgIiwiICsgbm9kZS55ICsgIikiKS5hdHRyKCJkIiwgcmlnaHRBcmMpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAicmdiKDIxMCwgMjEzLCAyMTgpIikKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgICAgIC8vIC5vbigiY2xpY2siLCAoKSA9PiB7IHJlbW92ZU5vZGVBbmRQYXRoKG5vZGUsIF90aGlzKTsgfSkKICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCl7IHJlbW92ZVBhdGguYXR0cigiZmlsbCIsICJyZ2IoMTg1LCAxODUsIDE4NSkiKSB9KQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdXQiLCBmdW5jdGlvbigpIHsgcmVtb3ZlUGF0aC5hdHRyKCJmaWxsIiwgInJnYigyMTAsIDIxMywgMjE4KSIpIH0pOwoKICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgiZyIpLmF0dHIoImNsYXNzIiwicmVtb3ZlX2EiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAobm9kZS54ICsgMzMpICsgIiwiICsgKG5vZGUueSAtIDI0KSArICIpIHNjYWxlKDAuNykiKQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoImRlZnMiKS5hcHBlbmQoInN0eWxlIikKICAgICAgICAgICAgICAgICAgICAudGV4dCgiLnJlbW92ZV9he2ZpbGw6bm9uZTtzdHJva2U6I0ZGRkZGRjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjEuNXB4O30iKTsKCiAgICAgICAgICAgICAgICByZW1vdmVQYXRoLmFwcGVuZCgidGl0bGUiKS5hdHRyKCJjbGFzcyIsInJlbW92ZV9hIikudGV4dCgiUmVtb3ZlIik7CiAgICAgICAgICAgICAgICByZW1vdmVfcmVjdDEgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInJlY3QiKS5hdHRyKCJjbGFzcyIsInJlbW92ZV9hIikuYXR0cigieCIsbm9kZS54ICsgMzMgKyA2Ljc1KS5hdHRyKCJ5Iixub2RlLnkgIC0gMzYgKyA5Ljc1KQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsNSkuYXR0cigiaGVpZ2h0IiwzKS5hdHRyKCJyeCIsMS41KS5hdHRyKCJyeSIsMS41KTsKICAgICAgICAgICAgICAgIHJlbW92ZV9yZWN0MiA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicmVjdCIpLmF0dHIoImNsYXNzIiwicmVtb3ZlX2EiKS5hdHRyKCJ4Iixub2RlLnggKyAzMCArIDYuNzUpLmF0dHIoInkiLG5vZGUueSAgLSAzMyArIDkuNzUpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwxMikuYXR0cigiaGVpZ2h0IiwxNCkuYXR0cigicngiLDEuNSkuYXR0cigicnkiLDEuNSk7CiAgICAgICAgICAgICAgICByZW1vdmVfbGluZTEgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoImxpbmUiKS5hdHRyKCJjbGFzcyIsInJlbW92ZV9hIikuYXR0cigieDEiLG5vZGUueCArIDI4ICsgNi43NSkuYXR0cigieTEiLG5vZGUueSAtIDMzICsgOS43NSkuYXR0cigieDIiLG5vZGUueCArIDQ1ICsgNi43NSkuYXR0cigieTIiLG5vZGUueSAtIDMzICsgOS43NSk7CiAgICAgICAgICAgICAgICByZW1vdmVfbGluZTIgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoImxpbmUiKS5hdHRyKCJjbGFzcyIsInJlbW92ZV9hIikuYXR0cigieDEiLG5vZGUueCArIDM0ICsgNi43NSkuYXR0cigieTEiLG5vZGUueSAtIDMwICsgOS43NSkuYXR0cigieDIiLG5vZGUueCArIDM0ICsgNi43NSkuYXR0cigieTIiLG5vZGUueSAtIDIzICsgOS43NSk7CiAgICAgICAgICAgICAgICByZW1vdmVfbGluZTMgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoImxpbmUiKS5hdHRyKCJjbGFzcyIsInJlbW92ZV9hIikuYXR0cigieDEiLG5vZGUueCArIDM4ICsgNi43NSkuYXR0cigieTEiLG5vZGUueSAtIDMwICsgOS43NSkuYXR0cigieDIiLG5vZGUueCArIDM4ICsgNi43NSkuYXR0cigieTIiLG5vZGUueSAtIDIzICsgOS43NSk7CgogICAgICAgICAgICAgICAgLy8gZDMuc2VsZWN0QWxsKCIucmVtb3ZlX2EiKS5vbigiY2xpY2siLCAoKSA9PiB7IHJlbW92ZU5vZGVBbmRQYXRoKG5vZGUsIF90aGlzKTsgfSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gc2hvd0hpZGUobm9kZSxpKSB7CiAgICAgICAgICAgICAgICBoaWRlUGF0aCA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicGF0aCIpLmF0dHIoJ2NsYXNzJywgJ2dfY2lyY2xlX3BhdGgnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBub2RlLnggKyAiLCIgKyBub2RlLnkgKyAiKSIpLmF0dHIoImQiLCBib3R0b21BcmMpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAicmdiKDIxMCwgMjEzLCAyMTgpIikKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgICAgIC8vIC5vbigiY2xpY2siLCBmdW5jdGlvbigpeyBoaWRlTm9kZUFuZExpbmtzKG5vZGUpIH0pCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpeyBoaWRlUGF0aC5hdHRyKCJmaWxsIiwgInJnYigxODUsIDE4NSwgMTg1KSIpIH0pCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgeyBoaWRlUGF0aC5hdHRyKCJmaWxsIiwgInJnYigyMTAsIDIxMywgMjE4KSIpIH0pOwoKICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgiZyIpLmF0dHIoImNsYXNzIiwiaGlkZV9hIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgKG5vZGUueCAtIDgpICsgIiwiICsgKG5vZGUueSArIDM4KSArICIpIHNjYWxlKDAuNykiKQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoImRlZnMiKS5hcHBlbmQoInN0eWxlIikKICAgICAgICAgICAgICAgICAgICAudGV4dCgiLmhpZGVfYXtmaWxsOm5vbmU7c3Ryb2tlOiNGRkZGRkY7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxLjVweDt9Iik7CgogICAgICAgICAgICAgICAgaGlkZVBhdGguYXBwZW5kKCJ0aXRsZSIpLmF0dHIoImNsYXNzIiwiaGlkZV9hIikudGV4dCgiSGlkZSIpOwoKICAgICAgICAgICAgICAgIGhpZGVfcGF0aDEgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInBhdGgiKS5hdHRyKCJjbGFzcyIsImhpZGVfYSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiTSIgKyAoZC54IC0gMTMpICsgIiwiICsgKGQueSArIDQyKSArICJBMTUsMTUsMCwwLDEiICsgKGQueCArIDEzKSArICIsIiArIChkLnkgKyA0MikKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGhpZGVfcGF0aDIgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInBhdGgiKS5hdHRyKCJjbGFzcyIsImhpZGVfYSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiTSIrIChkLnggLSAxMiArIDEwLjQpICsgIiwiICsgKGQueSArIDM0ICsgMTAuOTM3KSArICJBIiArIDMuNzQ5ICsgIiwiICsgIDMuNzQ5ICsgIiwwLDEsMSwiICsgKGQueCAtIDEyICsgMTUuMzM4KSArICIsIiArIChkLnkgKyAzMyArIDkpCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBoaWRlX3BhdGgzID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJwYXRoIikuYXR0cigiY2xhc3MiLCJoaWRlX2EiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJkIiwgZnVuY3Rpb24oZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIk0iICsgKGQueCAtIDEyKSArICIsIiArIChkLnkgKyA0MikgKyAiQTIwLDIwLDAsMCwwIiArIChkLnggLSA0KSArICIsIiArIChkLnkgKyA0NykKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGhpZGVfcGF0aDQgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInBhdGgiKS5hdHRyKCJjbGFzcyIsImhpZGVfYSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiTSIgKyAoZC54ICsgMTEpICsgIiwiICsgKGQueSArIDQ0KSArICJBMjAsMjAsMCwwLDAiICsgKGQueCArIDEzKSArICIsIiArIChkLnkgKyA0MikKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGhpZGVfY2lyY2xlMSA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgiY2lyY2xlIikuYXR0cigiY2xhc3MiLCJoaWRlX2EiKS5hdHRyKCJjeCIsbm9kZS54IC0gMTIgKyAxNy4xNSkuYXR0cigiY3kiLG5vZGUueSArIDMzICsgMTcuMjUpLmF0dHIoInIiLDYpOwogICAgICAgICAgICAgICAgaGlkZV9saW5lMSA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgibGluZSIpLmF0dHIoImNsYXNzIiwiaGlkZV9hIikuYXR0cigieDEiLG5vZGUueCAtIDEyICsgMTQuMTUpLmF0dHIoInkxIixub2RlLnkgKyAzMyArIDE3LjI1KS5hdHRyKCJ4MiIsbm9kZS54IC0gMTIgKyAyMC4xNSkuYXR0cigieTIiLG5vZGUueSArIDMzICsgMTcuMjUpOwoKICAgICAgICAgICAgICAgIC8vIGQzLnNlbGVjdEFsbCgiLmhpZGVfYSIpLm9uKCJjbGljayIsIChkKSA9PiB7IGhpZGVOb2RlQW5kTGlua3MoZCk7IH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc2hvd1VubG9jayhub2RlLCBpKSB7CiAgICAgICAgICAgICAgICB1bmxvY2tQYXRoID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJwYXRoIikuYXR0cignY2xhc3MnLCAnZ19jaXJjbGVfcGF0aCcpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIG5vZGUueCArICIsIiArIG5vZGUueSArICIpIikuYXR0cigiZCIsIGxlZnRBcmMpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCAicmdiKDIxMCwgMjEzLCAyMTgpIikuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgICAgIC8vIC5vbigiY2xpY2siLCBmdW5jdGlvbihkKXsgdW5sb2NrTm9kZUZpeGVkKGQpOyB9KQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24oKXsgdW5sb2NrUGF0aC5hdHRyKCJmaWxsIiwgInJnYigxODUsIDE4NSwgMTg1KSIpIH0pCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgeyB1bmxvY2tQYXRoLmF0dHIoImZpbGwiLCAicmdiKDIxMCwgMjEzLCAyMTgpIikgfSk7CgogICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCJ1bmxvY2tfYSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIChub2RlLnggLSA1MikgKyAiLCIgKyAobm9kZS55IC0gMzApICsgIikgc2NhbGUoMC43KSIpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiZGVmcyIpLmFwcGVuZCgic3R5bGUiKQogICAgICAgICAgICAgICAgICAgIC50ZXh0KCIudW5sb2NrX2F7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MS41cHg7fSIpOwoKICAgICAgICAgICAgICAgIHVubG9ja1BhdGguYXBwZW5kKCJ0aXRsZSIpLmF0dHIoImNsYXNzIiwidW5sb2NrX2EiKS50ZXh0KCJVbmxvY2siKTsKICAgICAgICAgICAgICAgIHVubG9ja19wYXRoMSA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwidW5sb2NrX2EiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAobm9kZS54IC0gNDUpICsgIiwiICsgKG5vZGUueSAtIDIzKSArICIpIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsIGQzLnN2Zy5hcmMoKS5vdXRlclJhZGl1cyg1LjMpLmlubmVyUmFkaXVzKDUpLnN0YXJ0QW5nbGUoLTEuOCkuZW5kQW5nbGUoMS44KSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZmlsbCIsICIjRkZGRkZGIik7CgogICAgICAgICAgICAgICAgdW5sb2NrX3JlY3QxID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJyZWN0IikuYXR0cigiY2xhc3MiLCJ1bmxvY2tfYSIpLmF0dHIoIngiLG5vZGUueCAtIDUyICsgNi43NSkuYXR0cigieSIsbm9kZS55ICAtIDMwICsgOS43NSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLDE1KS5hdHRyKCJoZWlnaHQiLDEyKS5hdHRyKCJyeCIsMS41KS5hdHRyKCJyeSIsMS41KTsKICAgICAgICAgICAgICAgIHVubG9ja19saW5lMSA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgibGluZSIpLmF0dHIoImNsYXNzIiwidW5sb2NrX2EiKS5hdHRyKCJ4MSIsbm9kZS54ICAtIDUyICsgMTUpLmF0dHIoInkxIixub2RlLnkgLSAzMCArIDE1KS5hdHRyKCJ4MiIsbm9kZS54ICAtIDUyICsgMTUpLmF0dHIoInkyIixub2RlLnkgLSAzMCArIDE4KTsKCiAgICAgICAgICAgICAgICAvLyBkMy5zZWxlY3RBbGwoIi51bmxvY2tfYSIpLm9uKCJjbGljayIsIChkKSA9PiB7IHVubG9ja05vZGVGaXhlZChkKTsgfSkKCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gaGlkZU5vZGVBbmRMaW5rcyhub2RlKSB7CiAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGNpcmNsZV9nLmF0dHIoJ25vZGUnLCBmdW5jdGlvbihuKSB7CiAgICAgICAgICAgICAgICAgICAgaWYobi5pZCA9PT0gbm9kZS5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBlZGdlc19saW5lLmF0dHIoJ2QnLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYoZC5zb3VyY2UuaWQgPT09IG5vZGUuaWQgfHwgZC50YXJnZXQuaWQgPT09IG5vZGUuaWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHJlbW92ZU5vZGVBbmRQYXRoKG5vZGUsIF90aGlzKXsKICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgYWxlcnQoJ2RlbGV0ZSB0aGlzICcrIG5vZGUgKyAnLCcgKyBfdGhpcyApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGZ1bmN0aW9uIHNob3dOb2RlSW5mbyhub2RlLCBfdGhpcykgewogICAgICAgICAgICAvLyAgICAgd2luZG93LmNvbnNvbGUubG9nKG5vZGUpOwogICAgICAgICAgICAvLyAgICAgd2luZG93LmNvbnNvbGUubG9nKF90aGlzKTsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gfQogICAgICAgICAgICBmdW5jdGlvbiB1bmxvY2tOb2RlRml4ZWQoZCkgewogICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgiZml4ZWQiLCBkLmZpeGVkID0gZmFsc2UpOy8v6Kej6Zmk6IqC54K55L2N572u6ZSB5a6aCiAgICAgICAgICAgICAgICAvL+a4hemZpOS4iuS4quiKgueCueeahOWchuWciOS7peWPiuWbvuaghwogICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnLmdfY2lyY2xlX3BhdGgnKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJy5yZW1vdmVfYScpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnLmhpZGVfYScpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnLnVubG9ja19hJykucmVtb3ZlKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIE1lbnUgKG1lbnUsIG9wZW5DYWxsYmFjaykgewoKICAgICAgICAgICAgICAgIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuZDMtY29udGV4dC1tZW51JykuZGF0YShbMV0pCiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdkaXYnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkMy1jb250ZXh0LW1lbnUnKQoKICAgICAgICAgICAgICAgIC8vIGNsb3NlIG1lbnUKICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnYm9keScpLm9uKCdjbGljay5kMy1jb250ZXh0LW1lbnUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZDMtY29udGV4dC1tZW51Jykuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGVjdCwgZXZlbnQsIGRhdGEpPT4gewoKCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZWN0LnR5cGUpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzZWxlY3QnLGRhdGEpOwogICAgICAgICAgICAgICAgICAgIGxldCBlbG0gPSB0aGlzOwoKCiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuZDMtY29udGV4dC1tZW51JykuaHRtbCgnJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBkMy5zZWxlY3RBbGwoJy5kMy1jb250ZXh0LW1lbnUnKS5hcHBlbmQoJ3VsJyk7CgogICAgICAgICAgICAgICAgICAgIGxpc3Quc2VsZWN0QWxsKCdsaScpLmRhdGEobWVudSkuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdsaScpCiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50aXRsZQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGQpIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5hY3Rpb24oZGF0YSwgc2VsZWN0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5kMy1jb250ZXh0LW1lbnUnKS5zdHlsZSgnZGlzcGxheScsICdub25lJykKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIC8vIHRoZSBvcGVuQ2FsbGJhY2sgYWxsb3dzIGFuIGFjdGlvbiB0byBmaXJlIGJlZm9yZSB0aGUgbWVudSBpcyBkaXNwbGF5ZWQKICAgICAgICAgICAgICAgICAgICAvLyBhbiBleGFtcGxlIHVzYWdlIHdvdWxkIGJlIGNsb3NpbmcgYSB0b29sdGlwCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5DYWxsYmFjaykgb3BlbkNhbGxiYWNrKGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5IGNvbnRleHQgbWVudQoKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5kMy1jb250ZXh0LW1lbnUnKQogICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZXZlbnQucGFnZVggLSAyKSArICdweCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgndG9wJywgKGV2ZW50LnBhZ2VZIC0gMikgKyAncHgnKQogICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKCiAgICAgICAgfSwKCiAgICAgICAgZG91YmxlQ2xpY2soaW5mbyxub2RlcywgaW5wdXQpewoKCiAgICAgICAgICAgIGxldCBuZXdfbm9kZSA9IHsKICAgICAgICAgICAgICAgICdpZCc6IG5vZGVzLmxlbmd0aCwKICAgICAgICAgICAgICAgICJ0eXBlIjogIm5vZGUiLAogICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXMnOiB7J25hbWUnOiBpbnB1dH0KICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCc2LiBhZGQgbm9kZScpOwogICAgICAgICAgICBpbmZvLm5vZGVzLnB1c2gobmV3X25vZGUpOwogICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKGluZm8pOwoKICAgICAgICAgICAgLy8gdGhpcy4kcHJvbXB0KAogICAgICAgICAgICAvLyAgICAgJ1BsZWFzZSBpbnB1dCBub2RlIG5hbWXvvJonLAogICAgICAgICAgICAvLyAgICAgJ1RpcHMnLAogICAgICAgICAgICAvLyAgICAgewogICAgICAgICAgICAvLyAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnWWVzJywKICAgICAgICAgICAgLy8gICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnTm8nLAogICAgICAgICAgICAvLyAgICAgICAgIGlucHV0VmFsdWU6ICdOZXcgTm9kZScsCiAgICAgICAgICAgIC8vICAgICAgICAgaW5wdXRFcnJvck1lc3NhZ2U6ICdJbnB1dCBjYW5ub3QgYmUgbm9uZScsCiAgICAgICAgICAgIC8vICAgICAgICAgaW5wdXRWYWxpZGF0b3I6ICh2YWx1ZSkgPT4geyAgICAgICAvLyDngrnlh7vmjInpkq7ml7bvvIzlr7nmlofmnKzmoYbph4zpnaLnmoTlgLzov5vooYzpqozor4EKICAgICAgICAgICAgLy8gICAgICAgICAgICAgaWYoIXZhbHVlKSB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gJ0lucHV0IGNhbm5vdCBiZSBub25lJzsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAgICAgICAgIH0sCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vICAgICB9KS50aGVuKCh7dmFsdWV9KSA9PiB7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vICAgICAgICAgbGV0IG5ld19ub2RlID0gewogICAgICAgICAgICAvLyAgICAgICAgICAgICAnaWQnOiBub2Rlcy5sZW5ndGgsCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICJ0eXBlIjogIm5vZGUiLAogICAgICAgICAgICAvLyAgICAgICAgICAgICAncHJvcGVydGllcyc6IHsnbmFtZSc6IHZhbHVlfQogICAgICAgICAgICAvLyAgICAgICAgIH07CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJzYuIGFkZCBub2RlJyk7CiAgICAgICAgICAgIC8vICAgICAgICAgaW5mby5ub2Rlcy5wdXNoKG5ld19ub2RlKTsKICAgICAgICAgICAgLy8gICAgICAgICB0aGlzLnJlbmRlckdyYXBoKGluZm8pOwogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyB9KS5jYXRjaCgoZXJyKSA9PiB7CiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgICAgICAvLyB9KTsKCiAgICAgICAgfSwKCiAgICAgICAgc2luZ2xlQ2xpY2soaW5mbywgbm9kZSxpbnB1dCl7CiAgICAgICAgICAgIC8vIGxldCB0ZW1wID0gW107CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzaW5nbGUgY2xpY2shJyk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub2RlIGlkJywgbm9kZSk7CiAgICAgICAgICAgIC8vIGxldCBzb3VyY2UgPSBub2RlLmlkOwoKCiAgICAgICAgICAgIGlmKHRoaXMudGVtcC5sZW5ndGggPT09MiAmJiB0aGlzLnRlbXBbMF0gIT09IHRoaXMudGVtcFsxXSApCiAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAvLyB0aGlzLiRwcm9tcHQoIkFkZCBsaW5rcz8iLCAiVGlwcyIsIHsKICAgICAgICAgICAgICAgIC8vICAgICBjb25maXJtQnV0dG9uVGV4dDogIlllcyIsCiAgICAgICAgICAgICAgICAvLyAgICAgY2FuY2VsQnV0dG9uVGV4dDogIk5vIiwKICAgICAgICAgICAgICAgIC8vICAgICBpbnB1dFZhbHVlOiAnTmV3IExpbmsnLAogICAgICAgICAgICAgICAgLy8gICAgIGlucHV0RXJyb3JNZXNzYWdlOiAnSW5wdXQgY2Fubm90IGJlIG5vbmUnLAogICAgICAgICAgICAgICAgLy8gICAgIGlucHV0VmFsaWRhdG9yOiAodmFsdWUpID0+IHsgICAgICAgLy8g54K55Ye75oyJ6ZKu5pe277yM5a+55paH5pys5qGG6YeM6Z2i55qE5YC86L+b6KGM6aqM6K+BCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGlmKCF2YWx1ZSkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgcmV0dXJuICdJbnB1dCBjYW5ub3QgYmUgbm9uZSc7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8vICAgICB9LAogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vIH0pLnRoZW4oKHt2YWx1ZX0pID0+IHsKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLiRtZXNzYWdlKAogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vICAgICAgICAgewogICAgICAgICAgICAgICAgLy8gICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIG1lc3NhZ2U6ICdBZGQgTGlua3MhJwogICAgICAgICAgICAgICAgLy8gICAgIH0pOwogICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCduZXcgbGluayBhZGRlZCcsaW5mby5saW5rcyk7CgogICAgICAgICAgICAgICAgbGV0IG5ld19saW5rID0gewogICAgICAgICAgICAgICAgICAgICJzb3VyY2UiOiB0aGlzLnRlbXBbMF0sCiAgICAgICAgICAgICAgICAgICAgInRhcmdldCI6IHRoaXMudGVtcFsxXSwKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICdsaW5rJywKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6IHt9LAogICAgICAgICAgICAgICAgICAgICJsYWJlbCI6IGlucHV0CgogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpbmZvLmxpbmtzLnB1c2gobmV3X2xpbmspOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25ldyBsaW5rIGFkZGVkJywgaW5mby5saW5rcyk7CiAgICAgICAgICAgICAgICB0aGlzLnRlbXAubGVuZ3RoID0gMDsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgoaW5mbykKCiAgICAgICAgICAgICAgICAvLyB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAvLyAgICAgdGVtcC5sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgLy8gICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIG1lc3NhZ2U6ICdDYW5jZWwhJwogICAgICAgICAgICAgICAgLy8gICAgIH0pCiAgICAgICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHRoaXMudGVtcC5sZW5ndGggPT09MiAmJiB0aGlzLnRlbXBbMF0gPT09IHRoaXMudGVtcFsxXSApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy50ZW1wLmxlbmd0aCA9PT0wKXsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgoaW5mbykKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coJ2N1cnJlbnQgc2VsZWN0IG5vZGUgaWQnLHRoaXMudGVtcCkKCgogICAgICAgIH0sCgoKICAgICAgICBzdWJtaXREYXRhKCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXQgZGF0YScsdGhpcy5pbmZvKTsKICAgICAgICAgICAgYWxlcnQoJ1N1Ym1pdCBTdWNjZXNzZnVsbHkhJykKICAgICAgICB9LAoKICAgICAgICByZWxvYWQoKXsKICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pCiAgICAgICAgfSwKCiAgICAgICAgZGVsZXRlTm9kZXMobm9kZSxpbmZvKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdCBkZWxldGUgbm9kZScsbm9kZSkKICAgICAgICB9LAoKCgoKICAgICAgICByZW1vdmVOb2RlQ2xpY2soKXsKCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdyZW1vdmUgbm9kZScpCgogICAgICAgIH0sCgoKCgoKCgoKICAgIH0KCgp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmQA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;;;;AAIA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;;AAEA;;AAEA;;;;;;;;;AASA;;;AAGA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n\n\n\n\n\n    <div id=\"app\">\n        <el-row>\n            <el-header style=\"text-align: right;height: 40px;\">\n                <div class=\"grid-content \">\n                    <template >\n                        <el-button style=\"margin-right: 5px;\"  @click=\"onTapLogin\" v-show=\"showLogin\" size=\"small\" round>Login</el-button>\n                        <el-button style=\"margin-right: 5px;\" size=\"small\" type=\"success\" v-show=\"!showLogin\" round>{{username}}</el-button>\n                        <el-button  @click=\"logout\" size=\"small\" v-show=\"!showLogin\" round>Logout</el-button>\n                    </template>\n                </div>\n            </el-header>\n\n            <el-dialog\n                    title=\"Login\"\n                    :visible.sync=\"centerDialogVisible\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"username\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"password\" placeholder=\"Please Input Password\"></el-input></span>\n                <el-button type=\"text\" style=\"margin-top: 15px;\" @click.native=\"dialog_createUser=true; centerDialogVisible=false\">No account?</el-button>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"centerDialogVisible=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click.native=\"handleShow\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n            <el-dialog\n                    title=\"Create New Account\"\n                    :visible.sync=\"dialog_createUser\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"newUsername\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"newPassword\" placeholder=\"Please Input Password\"></el-input></span>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"dialog_createUser=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click=\"createUser\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n\n\n\n        </el-row>\n\n        <el-container>\n\n            <el-row class=\"tac\">\n                <el-col >\n                    <h5>SustainKG</h5>\n                    <el-menu\n\n                            default-active=\"2\"\n                            class=\"el-menu-vertical-demo\"\n\n                    >\n                        <el-submenu index=\"1\">\n                            <template slot=\"title\">\n                                <i class=\"el-icon-location\"></i>\n                                <span>Operation</span>\n                            </template>\n                            <el-menu-item-group>\n                                <!--<template slot=\"title\">分组一</template>-->\n                                <el-menu-item index=\"1-1\" @click=\"submitData()\">Submit Data</el-menu-item>\n                                <el-menu-item index=\"1-2\">Upload Data</el-menu-item>\n                                <el-menu-item index=\"1-3\" @click=\"reload()\">Reload Data</el-menu-item>\n                            </el-menu-item-group>\n\n\n                        </el-submenu>\n                        <el-menu-item >\n                            <i class=\"el-icon-menu\"></i>\n                            <span slot=\"title\">Node Number：{{ info.nodes.length }}</span>\n                        </el-menu-item>\n                        <el-menu-item >\n                            <i class=\"el-icon-setting\"></i>\n                            <span slot=\"title\">Link Number：{{ info.links.length }}</span>\n                        </el-menu-item>\n                    </el-menu>\n                </el-col>\n\n\n                <router-view></router-view>\n\n            </el-row>\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible\"\n                       title=\"Create Node\" center\n            >\n\n                Node Name\n                <el-select\n\n                        @keyup.native = \"showOption\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"node_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible\">\n                    <el-option\n\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                    </div>\n                </el-select>\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"addNodes\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_node_name\"\n                       title=\"Change Node Name\" center\n            >\n\n                    Node Name\n                <el-select\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_node_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"selectBlur\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                ><el-option\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_node_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_link\"\n\n                       title=\"Create Link\" center>\n\n                Link Name\n\n                <el-select\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"link_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"selectBlur\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                ><el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                </el-select>\n\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\"  @click=\"addLinks\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_link_name\"\n                       title=\"Change Link Name\" center>\n\n                Link Name\n                <el-select\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_link_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"selectBlur\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                ><el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_link_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-main id=\"graph\">\n                <!--<div id=\"graph\"></div>-->\n            </el-main>\n\n\n\n\n        </el-container>\n\n\n\n\n    </div>\n\n</template>\n\n<script>\n    import * as d3 from \"d3\";\n\n    import $ from 'jquery'\n    import {\n        getNodeSelfPath,\n        setLinkGroup,\n        getNodesLine,} from './utils/deviceRelation'\n\n\n\n\n    export default {\n\n\n        data(){\n\n\n\n            let info = {\n                \"links\": [\n                    {\n                        \"source\" : 0,\n                        \"target\" : 1,\n                        \"type\" : \"link\",\n                        'label': 'Link TEST',\n                        \"properties\":{}\n\n                    },\n\n                ],\n                \"nodes\": [\n                    {\n                        \"id\": 0,\n                        \"type\" : \"node\",\n                        // \"factoryCode\" : \"hello\",\n                        \"label\" : \"Device\",\n                        \"properties\":{\"name\":\"hello\"}\n                        // \"linkId\": 1\n                    },\n                    {\n                        \"id\": 1,\n                        \"type\" : \"node\",\n                        // \"factoryCode\": \"Will\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"will\"}\n                        // \"linkId\": 0\n                    },\n                    {\n                        \"id\": 2,\n                        \"type\" : \"node\",\n                        // \"factoryCode\": \"lala\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"lala\"}\n                        // \"linkId\": 1\n                    },\n\n                ]\n            };\n\n\n\n            return {\n\n                //////////////////////////////////////\n\n                // log function parameters\n                username:'',\n                password:'',\n                newUsername:'',\n                newPassword:'',\n                showLogin:true,\n                centerDialogVisible:false,\n                dialog_createUser:false,\n                optionVisible:false,\n\n\n                //////////////////////////////////////\n\n                node_value: '',\n                link_value:'',\n                btnChangeEnable: true,\n                node_list: [\n                    {\n                        value: 'node1',\n                        label: 'node1'\n                    },\n\n                    {\n                        value: 'node2',\n                        label: 'node2'\n                    },\n\n                    {\n                        value: 'test3',\n                        label: 'test3'\n                    },\n                    {\n                        value: 'bbb',\n                        label: 'bbb'\n                    }\n                ],\n\n                link_list: [\n                    {\n                        value: 'link1',\n                        label: 'link1'\n                    },\n                    {\n                        value: 'link2',\n                        label: 'link2'\n                    },\n                    {\n                        value: 'test_3',\n                        label: 'test_3'\n                    }\n                ],\n\n                // info: {\n                //     nodes:[],\n                //     links:[]\n                // },\n\n                info: info,\n\n                ifClicked:false,\n\n                selected_Node: '',\n\n                dialogFormVisible:false,\n                dialogFormVisible_link:false,\n                dialogFormVisible_change_node_name:false,\n                dialogFormVisible_change_link_name:false,\n                temp : [],\n                clickTimeId : 0,\n\n                node_id: '',\n                link_id: '',\n                new_link_name:'',\n                new_node_name:'',\n\n                menu: [\n                    {\n                        title: 'Delete Nodes',\n                        action: (node,select_node) => {\n\n                            this.$confirm(\"Delete this node?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The node is deleted!'\n                                    });\n                                console.log('test !!!',select_node,node);\n                                this.info.nodes.splice(node,1);\n                                for(let i =this.info.links.length-1; i>=0; i-- )\n                                {\n                                    console.log('link index',i,node);\n                                    if(this.info.links[i].source === select_node\n                                        || this.info.links[i].target === select_node)\n                                    {\n                                        this.info.links.splice(i,1);\n                                    }\n\n                                }\n\n                                console.log('after delete', this.info)\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n\n                    },\n                    {\n                        title: 'Change Node Name',\n                        action:(node_id)=>{\n                            this.dialogFormVisible_change_node_name = true;\n                            this.node_id = node_id;\n\n                        },\n\n                    },\n\n                ],\n\n                menu_edge:[\n                    {\n                        title: 'Delete Links',\n                        action: (link,selected_link) => {\n                            console.log('ll',link,selected_link);\n                            this.$confirm(\"Delete this link?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The link is deleted!'\n                                    });\n                                this.info.links.splice(link,1);\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n                    },\n                    {\n                        title: 'Change link Name',\n                        action:(link_id)=>\n                        {\n                            this.dialogFormVisible_change_link_name = true;\n                            this.link_id = link_id;\n\n                        }\n\n                    }\n                ],\n\n\n\n            }\n        },\n\n        mounted() {\n\n            this.renderGraph(this.info);\n\n        },\n\n        methods: {\n            ////////////////////////////////////////////////////////////\n            // login functions\n\n            createUser:function(){\n\n                this.dialog_createUser  = false;\n                console.log('create user function',this.newUsername, this.newPassword)\n\n\n            },\n\n            handleShow:function(){\n                let that = this;\n                let user = 'sqy';\n                let pass = '123';\n                if(user === this.username && pass === this.password)\n                {\n                    this.showLogin=false;\n                    this.centerDialogVisible=false;\n                    // this.$router.push({ path: '/home' })\n                    this.$axios({\n                        url:'/getUserGraph',\n                        method:'post',\n                        data:{\n                            user : \"some_user\"\n                        }\n\n                    }).then(response=>{\n                        console.log(response.data);\n                        let user_nodes = response.data.nodes;\n                        let user_links = response.data.links;\n                        // let test = response.data;\n\n                        let change_node_type = user_nodes.map(function (element) {\n                             element.id  = Number(element.id);\n                             return element\n                        });\n\n                        let change_link_type = user_links.map(function (element) {\n                            element.id  = Number(element.id);\n                            element.source  = Number(element.source);\n                            element.target  = Number(element.target);\n                            return element\n                        });\n\n                        console.log(change_node_type);\n                        console.log(change_link_type);\n                        this.info.nodes = change_node_type;\n                        this.info.links = change_link_type;\n                        // this.info = response.data;\n\n                        this.renderGraph(this.info)\n                    })\n\n                }\n                else{\n                    alert('Wrong username or password')\n                }\n                console.log(this.username,this.password)\n\n            },\n\n            onTapLogin:function () {\n                this.centerDialogVisible=true\n            },\n\n            logout:function () {\n                this.showLogin = true;\n                this.username = '';\n                this.password = '';\n                this.info= {\n                    nodes:[],\n                        links:[]\n                };\n\n                this.renderGraph(this.info)\n\n                // this.$router.push({ path: '/' })\n            },\n\n            ////////////////////////////////////////////////////////////\n\n\n\n            showOption()\n            {\n                let inputContent = document.getElementsByClassName('el-input__inner')[0].value;\n                console.log(inputContent.length);\n\n                this.optionVisible = inputContent.length !== 0;\n                console.log('option',this.optionVisible);\n                this.$forceUpdate()\n            },\n\n\n            selectBlur(e) {\n                // 意见类型\n                this.btnChangeEnable = true;\n                if (e.target.value !== '') {\n                    console.log('No selection',e.target.value);\n                    // this.$forceUpdate()   // 强制更新\n                }\n                this.$forceUpdate()\n                this.selectClear()\n            },\n\n            selectClear() {\n                this.node_value = '';\n                this.link_value = '';\n                this.new_node_name = '';\n                this.new_link_name = '';\n                this.optionVisible = false;\n                this.$forceUpdate()\n            },\n\n            selectChange(val) {\n\n                if(val !== '')\n                {\n                    this.btnChangeEnable = false\n                }\n                if(this.dialogFormVisible_link===true){\n                    this.link_value = val\n                }\n                else if (this.dialogFormVisible_change_link_name === true){\n                    this.new_link_name = val\n                }\n                else if (this.dialogFormVisible_change_node_name === true){\n                    this.new_node_name = val\n                }\n                else if(this.dialogFormVisible === true){\n                    this.node_value = val;\n                }\n                this.$forceUpdate()\n            },\n\n\n            cancel()\n            {\n                this.dialogFormVisible = false;\n                this.dialogFormVisible_link = false;\n                this.dialogFormVisible_change_node_name = false;\n                this.dialogFormVisible_change_link_name = false;\n                this.selectClear();\n                this.temp.length = 0;\n                this.btnChangeEnable = true;\n            },\n\n            addNodes(){\n                this.dialogFormVisible = false;\n                this.doubleClick(this.info, this.info.nodes, this.node_value);\n                this.selectClear();\n                this.optionVisible = false;\n                this.btnChangeEnable = true;\n\n            },\n\n            change_node_name(){\n\n                this.info.nodes[this.node_id].properties.name = this.new_node_name;\n                this.dialogFormVisible_change_node_name = false;\n                this.selectClear();\n                this.btnChangeEnable = true;\n                this.renderGraph(this.info);\n            },\n\n\n            change_link_name()\n            {\n\n                this.info.links[this.link_id].label = this.new_link_name;\n                this.dialogFormVisible_change_link_name = false;\n                this.selectClear();\n                this.btnChangeEnable = true;\n                this.renderGraph(this.info)\n            },\n\n            addLinks()\n            {\n\n                this.dialogFormVisible_link = false;\n\n                if (this.temp.length === 2) {\n                    this.singleClick(this.info, this.selected_Node, this.link_value);\n                }\n\n                this.$message(\n\n                    {\n                        type: 'success',\n                        message: 'Add Links!'\n                    });\n                this.btnChangeEnable = true;\n                this.selectClear()\n\n            },\n\n\n            renderGraph(info) {\n                // let temp = [];\n\n\n                console.log('render data',info);\n                let {links, nodes} = info;\n\n                //关系分组\n                setLinkGroup(links);\n\n                //点击节点后弹出的灰色圆圈以及图标的定义，分为三组【1.删除、2.联系、3.解除位置锁定】\n                let [removePath,remove_rect1,remove_rect2,remove_line1,remove_line2,remove_line3] = [null];\n                let [unlockPath,unlock_path1,unlock_rect1,unlock_line1] = [null];\n                let [hidePath,hide_path1,hide_path2,hide_path3,hide_path4,hide_circle1,hide_line1] = [null];\n                let rightArc = d3.svg.arc().outerRadius(60).innerRadius(30).startAngle(0).endAngle(1.85);\n                let leftArc = d3.svg.arc().outerRadius(60).innerRadius(30).startAngle(4.5).endAngle(6.23);\n                let bottomArc = d3.svg.arc().outerRadius(60).innerRadius(30).startAngle(1.9).endAngle(4.45);\n\n                d3.select(\"#graph\").html('');\n\n\n                let force = d3.layout.force()//layout将json格式转化为力学图可用的格式\n                    .nodes(nodes)//设定节点数组\n                    .links(links)//设定连线数组\n                    .linkDistance(500)//连接线长度\n                    .charge(-1500)//顶点的电荷数。该参数决定是排斥还是吸引，数值越小越互相排斥\n                    .on(\"tick\", function (){\n                            tick()\n                        },\n                    )//指时间间隔，隔一段时间刷新一次画面\n                    .start();//开始转换\n\n\n\n                let zoom = d3.behavior.zoom()\n                    .scaleExtent([.4, 2])\n                    .on(\"zoom\", zoomed);\n\n                let svg = d3.select(\"#graph\").append(\"svg\")\n                    .attr(\"pointer-event\", \"all\")\n                    .attr(\"preserveAspectRatio\", \"xMidYMid meet\")//自适应容器大小\n                    .attr(\"viewBox\", \"-460 -220 1200 1200\")\n                    // .on(\"dblclick\", doubleClick)\n                    .call(zoom);\n\n\n\n\n                // old_nodes = nodes;\n                let circle_g = svg.selectAll(\"circle\")\n                    .data(force.nodes())//表示使用force.nodes数据\n                    .enter()\n                    .append(\"g\")\n                    .attr(\"class\",function(node,i){\n                        return \"g_circle_\" + i; })//标记circle的父节点\n                    .style(\"cursor\",\"pointer\")\n                    .call(drag()) //将当前选中的元素传到drag函数中，使顶点可以被拖动\n                    .on(\"click\", (node, i,) => {\n                        if (d3.event.defaultPrevented) return;\n\n                        // console.log('鼠标单击',this.clickTimeId);\n                        // console.log(d3.select(this))\n                        clearTimeout(this.clickTimeId);\n\n                        this.clickTimeId = setTimeout( ()=> {\n\n                                // console.log(\"鼠标单击\");\n\n                                // this.selected_Node = node;\n                                // this.addLinks()\n                                // console.log('selected_Node',this.selected_Node)\n                                this.temp.push(node.index);\n                                console.log('liuliu',this.temp);\n                                if(this.temp.length === 2 && this.temp[0] !== this.temp[1]){\n                                    this.dialogFormVisible_link = true;\n\n                                }\n                                else if(this.temp.length === 2 && this.temp[0] === this.temp[1])\n                                {\n                                    this.temp.length = 0\n                                }\n                                // this.singleClick(info, node, temp, this.state2);\n                                clickStyle(node, i, this);\n                            }\n                            , 250);\n                    })\n\n                    // .on('mouseover', (node) => {\n                    //     if (d3.event.defaultPrevented) return;\n                    //     // showNodeInfo(node, this);\n                    //     // showCircleBorderOuterArc(node, i);\n                    // })\n                    .on(\"dblclick\", (node, )=>{\n\n\n                        if (d3.event.defaultPrevented) return;\n                        console.log('double click',nodes);\n                        clearTimeout(this.clickTimeId);\n                        console.log('双击',this.clickTimeId);\n                        this.dialogFormVisible = true;\n                        // this.doubleClick(info, node, nodes, links)\n\n\n                    })\n                    .on('contextmenu',(d,node)=>{\n                        console.log('node!!!!!',d,node);\n                        Menu(this.menu)(d, d3.event, node)\n\n                    });\n\n\n\n\n                svg.on(\"dblclick.zoom\", null);//取消svg和圆圈的双击放大事件（d3中默认开启7个事件，关闭防止与上面的双击事件冲突）\n                circle_g.on(\"dblclick.zoom\", null);\n\n\n\n                //单击改变节点颜色 表明选中\n                function clickStyle(node, i, _this){\n\n                    console.log(_this.ifClicked);\n                    // _this.ifClicked = true;\n\n\n                    circle_g.attr('node', function(n) {\n\n                        console.log('click change color',n.id,node.id);\n                        console.log('selected node',n.index,node.index);\n\n                        if(n.index === node.index && _this.ifClicked===false ) {\n                            d3.select('.g_circle_'+ n.index).select('circle').style('fill','red');\n                            // 有问题！！！！！！！\n                            console.log('haha',d3.select('.g_circle_'+ n.index).select('circle'));\n                            _this.ifClicked = true;\n                            console.log('新选的 true',_this.ifClicked);\n\n                        }\n                        else if(n.index === node.index && _this.ifClicked===true )\n                        {\n                            d3.select('.g_circle_'+ n.index).select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);});\n                            _this.ifClicked = false;\n                            console.log('重复选的颜色变回去 false',_this.ifClicked);\n\n                        }\n                        else if(n.index !== node.index) {\n                            console.log('node are different');\n                            d3.select('.g_circle_'+ n.index)\n                                .select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);})\n\n                        }\n                    });\n                }\n\n\n\n\n                //圆圈\n                let circle = circle_g.append(\"circle\")\n                    .style(\"stroke-width\", \"2px\")\n                    .attr(\"r\", 30)//设置圆圈半径\n                    .style(\"fill\", function (node) { return getCircleColor(node); });\n\n                let text = circle_g.append(\"text\")\n                    .attr(\"dy\", \".35em\")\n                    .attr(\"text-anchor\", \"middle\")//在圆圈中加上数据\n                    .style('fill', \"#FFFFFF\")\n                    .attr('x',function(d){ appendCircleText(d, this); });\n\n                //圆圈的提示文字\n                circle.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                text.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                //设置连接线\n                let defs = svg.append(\"defs\");\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"end\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"start\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,0L10,-5L10,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 2)');//箭头颜色\n\n                const edges_line = svg.append(\"g\").selectAll(\".edgepath\")\n                    .data(force.links())\n                    .enter()\n                    .append(\"path\")\n\n                    // .attr('marker-end', function(d,i) {\n                    //     console.log('lala',d.label,d.x_start)\n                    //     if (d.x_start < d.x_end) {\n                    //         console.log('source < end')\n                    //         return  \"url(#end)\";\n                    //     }\n                    //     return ''\n                    // })\n                    // .attr('marker-start', function(d,i) {\n                    //     if (d.x_start >= d.x_end) {\n                    //         console.log('source > end')\n                    //         return \"url(#start)\";\n                    //     }\n                    //     return ''\n                    //\n                    // })\n                    // .attr(\"marker-start\", \"url(#start)\")\n                    // .attr(\"marker-end\",  function (d, i) { return getMarkerArrow(i); })//根据箭头标记的id号标记箭头\n                    // .attr(\"marker-end\",  )//根据箭头标记的id号标记箭头\n                    .style(\"stroke\", 'black')\n                    .style(\"stroke-width\", 3)//线条粗细\n                    .style(\"fill-opacity\",0)\n                    .style(\"cursor\",\"pointer\")\n                    .attr(\"id\", function (d, i) { return 'edgepath' + i; })\n                    .on(\"mouseover\", function(d){ return getStrokeWidth(d); })\n                    .on(\"mouseout\", function() { edges_line.style(\"stroke-width\", 3) })\n                    // .on('click', (link) => { this.deleteLine(this.info,link); })\n                    .on('contextmenu',(d,link)=>{\n                        console.log(d);\n                        console.log('link!!!',link)\n                        Menu(this.menu_edge)(d,d3.event,link)\n\n                    });\n\n                const edges_text = svg.append(\"g\").selectAll(\".edgetext\")\n                    .data(links)\n                    .enter()\n                    .append(\"text\")\n                    .style(\"pointer-events\", \"none\")\n                    .attr(\"class\",\"linetext\")\n                    .attr('text-anchor', \"middle\")\n                    .attr(\"fill-opacity\", 0.5)\n                    .style(\"cursor\",\"pointer\")\n\n                    .attr({'class': 'edgelabel',\n                        'id': function (d, i) { return 'edgepath' + i; },\n                        'dx': 190, 'dy': 20,\n                        'fill':'black',\n                        // 'transform': edge_text_Position()\n                    });\n\n\n\n                function edge_text_Position(){\n\n                    return 'rotate(180,40,5)'\n                }\n\n\n\n                //设置线条上的文字\n                edges_text.append('textPath')\n                    .attr('xlink:href', function (d, i) { return '#edgepath' + i })\n                    .attr(\"pointer-events\", \"none\")\n                    .attr(\"font-size\", 20)\n                    .text(function (d) { return d.label; });\n\n\n\n                // force.on(\"tick\", tick)//指时间间隔，隔一段时间刷新一次画面\n                //     .start();//开始转换\n                function zoomed() {//svg下的g标签移动大小\n                    svg.selectAll(\"g\").attr(\"transform\", \"translate(\"  +d3.event.translate + \")scale(\" +d3.event.scale + \")\");\n                }\n\n                function getMarkerArrow(i) {\n                    svg.append(\"defs\").append(\"marker\")   //箭头\n                        .attr(\"id\", \"arrow\"+i)\n                        .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                        .attr(\"markerUnits\", \"userSpaceOnUse\")\n                        .attr(\"markerWidth\", 20)//标识的大小\n                        .attr(\"markerHeight\", 20)\n                        .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                        .attr(\"refX\", 0)//箭头坐标\n                        .attr(\"refY\", 0)\n                        .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                        .append(\"svg:path\")\n                        .attr(\"stroke-width\",5)//箭头宽度\n                        .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                        .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n                    return \"url(#arrow_end\" + i + \")\";\n                }\n\n\n\n                function getStrokeWidth(d) {\n                    edges_line.style(\"stroke-width\", function (edge) {\n                        // return edge.relation.relationshipId === d.relation.relationshipId ? 3 : 1;\n                        return 6\n                    });\n                }\n\n                function drag(){//拖拽函数\n                    return force.drag().on(\"dragstart\",function(d){\n                        d3.event.sourceEvent.stopPropagation(); //取消默认事件\n                        d.fixed = true;//拖拽开始后设定被拖拽对象为固定\n                    });\n                }\n\n                function circleClick(node, i, _this) {\n                    //获取当前节点是否包含圆环\n                    let existedRing = svg.select('.g_circle_' + i).selectAll('.g_circle_path');\n                    //清除上个节点的圆圈以及图标\n                    svg.selectAll('.g_circle_path').remove();\n                    svg.selectAll('.remove_a').remove();\n                    svg.selectAll('.hide_a').remove();\n                    svg.selectAll('.unlock_a').remove();\n                    if(existedRing && existedRing[0].length === 0) {\n                        //showCircleBorderOuterArc(node, i);\n                        //绘制灰色可点击圆圈，分为三部分分别绘制\n                        showRemove(node, i, _this);\n                        showUnlock(node, i, _this);\n                        showHide(node,i, _this);\n                    }\n                }\n\n                function getCircleColor(node) {\n                    let color = {\n                        'Device': \"#FF9D00\",\n                        'Position': \"#C477E9\",\n                        'Work': '#67CAF4',\n                        'Install': '#BCDD73',\n                        'Application': '#DD1E9E',\n                        'Manufacturer': '#DDBA9E',\n                        'IotInfrastructure': '#6ca5dd',\n                        'DeviceAdmin': '#50DD87',\n                    };//圆圈背景色\n                    return color[node.label] || '#C477E9';\n                }\n\n                function appendCircleText(d, _this) {\n                    let circleText = '';\n                    if(d.type === 'node' && d.properties.name) {\n                        circleText = d.properties.name;\n                    } else if(d.label === 'Position') {\n                        circleText = d.positionCode;\n                    } else if (d.label === 'Application') {\n                        circleText = d.applicationName;\n                    } else if (d.label === 'Manufacturer') {\n                        circleText = d.manufacturerName;\n                    } else if (d.label === 'IotInfrastructure') {\n                        circleText = d.iotInfrastructureName;\n                    } else if (d.label === 'DeviceAdmin') {\n                        circleText = d.name;\n                    }\n                    //如果小于四个字符，不换行\n                    if(circleText && circleText.length > 14){\n                        circleText = circleText.substring(0,14) + \"...\";\n                        d3.select(_this).text(function(){return '';});\n                    }\n                    d3.select(_this).append('tspan').attr('x',0).attr('y',0).attr(\"font-size\", 10)\n                        .text(function(){ return circleText; });\n                }\n\n\n\n\n\n\n                function tick() {\n\n                    circle.attr(\"transform\", transform1);//圆圈\n                    text.attr(\"transform\", transform2);//顶点文字\n                    //link奇数有问题\n                    edges_line\n                        .attr('d', function (d) {\n\n                        return getNodesLine(d,edges_line,defs);//曲线路径\n\n                    });\n                    edges_line.attr('marker-end', function(d,i) {\n                            if (d.x_start < d.x_end) {\n                                // console.log('source < end')\n                                return  \"url(#end)\";\n                            }\n                            return ''\n                        }).attr('marker-start', function(d,i) {\n                        if (d.x_start >= d.x_end) {\n                            // console.log('source > end')\n                            return \"url(#start)\";\n                        }\n                        return ''\n\n                    })\n                    ;\n\n                    // if(circleBorderOuterArcObj !== null) {\n                    //   circleBorderOuterArcObj.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n                    // }\n\n                    //绘制节点删除功能半圆环\n                    // if(removePath !== null) {\n                    //     removePath.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n                    //\n                    //     let r1 = null;\n                    //     remove_rect1.attr('d',function(d) { r1 = d; })\n                    //         .attr(\"x\",r1.x + 33 + 6.75).attr(\"y\",r1.y  - 36 + 9.75).attr(\"width\",5).attr(\"height\",3).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    //\n                    //     let r2 = null;\n                    //     remove_rect2.attr('d',function(d) { r2 = d; })\n                    //         .attr(\"x\",r2.x + 30 + 6.75).attr(\"y\",r2.y  - 33 + 9.75).attr(\"width\",12).attr(\"height\",14).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    //\n                    //     let l1 = null;\n                    //     remove_line1.attr('d',function(d) { l1 = d; })\n                    //         .attr(\"x1\",l1.x + 28 + 6.75).attr(\"y1\",l1.y - 33 + 9.75).attr(\"x2\",l1.x + 45 + 6.75).attr(\"y2\",l1.y - 33 + 9.75);\n                    //\n                    //     let l2 = null;\n                    //     remove_line2.attr('d',function(d) { l2 = d; })\n                    //         .attr(\"x1\",l2.x + 34 + 6.75).attr(\"y1\",l2.y - 30 + 9.75).attr(\"x2\",l2.x + 34 + 6.75).attr(\"y2\",l2.y - 23 + 9.75);\n                    //\n                    //     let l3 = null;\n                    //     remove_line3.attr('d',function(d) { l3 = d; })\n                    //         .attr(\"x1\",l3.x + 38 + 6.75).attr(\"y1\",l3.y - 30 + 9.75).attr(\"x2\",l3.x + 38 + 6.75).attr(\"y2\",l3.y - 23 + 9.75);\n                    // }\n\n                    //绘制解除节点位置锁定半圆环\n                    // if(unlockPath !== null) {\n                    //     unlockPath.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n                    //     unlock_path1.attr(\"transform\", function (d){ return \"translate(\"+ (d.x - 45) +\",\"+ (d.y - 23) +\")\" });\n                    //\n                    //     let r1 = null;\n                    //     unlock_rect1.attr('d',function(d) { r1 = d; })\n                    //         .attr(\"x\",r1.x  - 52 + 6.75).attr(\"y\",r1.y - 30 + 9.75).attr(\"width\",15).attr(\"height\",12).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    //\n                    //     let l1 = null;\n                    //     unlock_line1.attr('d',function(d) { l1 = d; })\n                    //         .attr(\"x1\",l1.x  - 52 + 15).attr(\"y1\",l1.y  - 30 + 15).attr(\"x2\",l1.x  - 52 +15).attr(\"y2\",l1.y  - 30 + 18);\n                    // }\n\n                    // //绘制隐藏节点和关系半圆环\n                    // if(hidePath !== null) {\n                    //     hidePath.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n                    //\n                    //     hide_path1\n                    //         .attr(\"d\", function(d) {\n                    //             return \"M\" + (d.x - 13) + \",\" + (d.y + 42) + \"A15,15,0,0,1\" + (d.x + 13) + \",\" + (d.y + 42)\n                    //         });\n                    //     hide_path2\n                    //         .attr(\"d\", function(d) {\n                    //             return \"M\"+ (d.x - 12 + 10.4) + \",\" + (d.y + 34 + 10.937) + \"A\" + 3.749 + \",\" + 3.749 + \",0,1,1,\" + (d.x - 12 + 15.338) + \",\" + (d.y + 33 + 9)\n                    //         });\n                    //     hide_path3\n                    //         .attr(\"d\", function(d) {\n                    //             return \"M\" + (d.x - 12) + \",\" + (d.y + 42) + \"A20,20,0,0,0\" + (d.x - 4) + \",\" + (d.y + 47)\n                    //         });\n                    //     hide_path4\n                    //         .attr(\"d\", function(d) {\n                    //             return \"M\" + (d.x + 11) + \",\" + (d.y + 44) + \"A20,20,0,0,0\" + (d.x + 13) + \",\" + (d.y + 42)\n                    //         });\n                    //\n                    //     let c1 = null;\n                    //     hide_circle1.attr('d',function(d) { c1 = d; })\n                    //         .attr(\"cx\",c1.x - 12 + 17.15).attr(\"cy\",c1.y + 33 + 17.25).attr(\"r\",6);\n                    //\n                    //     let l1 = null;\n                    //     hide_line1.attr('d',function(d) { l1 = d; })\n                    //         .attr(\"x1\",l1.x - 12 + 14.15).attr(\"y1\",l1.y + 33 + 17.25).attr(\"x2\",l1.x - 12 + 20.15).attr(\"y2\",l1.y + 33 + 17.25);\n                    //\n                    // }\n\n                }\n\n                //设置圆圈和文字的坐标\n                function transform1(d) {\n                    return \"translate(\" + d.x + \",\" + d.y + \")\";\n                }\n\n                function transform2(d) {\n                    return \"translate(\" + (d.x) + \",\" + d.y + \")\";\n                }\n                function showRemove(node, i, _this) {\n                    removePath = d3.select('.g_circle_'+ i).append(\"path\").attr('class', 'g_circle_path')\n                        .attr(\"transform\", \"translate(\" + node.x + \",\" + node.y + \")\").attr(\"d\", rightArc)\n                        .attr(\"fill\", \"rgb(210, 213, 218)\")\n                        .style(\"cursor\",\"pointer\")\n                        // .on(\"click\", () => { removeNodeAndPath(node, _this); })\n                        .on(\"mouseover\", function(){ removePath.attr(\"fill\", \"rgb(185, 185, 185)\") })\n                        .on(\"mouseout\", function() { removePath.attr(\"fill\", \"rgb(210, 213, 218)\") });\n\n                    d3.select('.g_circle_'+ i).append(\"g\").attr(\"class\",\"remove_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x + 33) + \",\" + (node.y - 24) + \") scale(0.7)\")\n                        .append(\"defs\").append(\"style\")\n                        .text(\".remove_a{fill:none;stroke:#FFFFFF;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}\");\n\n                    removePath.append(\"title\").attr(\"class\",\"remove_a\").text(\"Remove\");\n                    remove_rect1 = d3.select('.g_circle_'+ i).append(\"rect\").attr(\"class\",\"remove_a\").attr(\"x\",node.x + 33 + 6.75).attr(\"y\",node.y  - 36 + 9.75)\n                        .attr(\"width\",5).attr(\"height\",3).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    remove_rect2 = d3.select('.g_circle_'+ i).append(\"rect\").attr(\"class\",\"remove_a\").attr(\"x\",node.x + 30 + 6.75).attr(\"y\",node.y  - 33 + 9.75)\n                        .attr(\"width\",12).attr(\"height\",14).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    remove_line1 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"remove_a\").attr(\"x1\",node.x + 28 + 6.75).attr(\"y1\",node.y - 33 + 9.75).attr(\"x2\",node.x + 45 + 6.75).attr(\"y2\",node.y - 33 + 9.75);\n                    remove_line2 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"remove_a\").attr(\"x1\",node.x + 34 + 6.75).attr(\"y1\",node.y - 30 + 9.75).attr(\"x2\",node.x + 34 + 6.75).attr(\"y2\",node.y - 23 + 9.75);\n                    remove_line3 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"remove_a\").attr(\"x1\",node.x + 38 + 6.75).attr(\"y1\",node.y - 30 + 9.75).attr(\"x2\",node.x + 38 + 6.75).attr(\"y2\",node.y - 23 + 9.75);\n\n                    // d3.selectAll(\".remove_a\").on(\"click\", () => { removeNodeAndPath(node, _this); })\n                }\n\n                function showHide(node,i) {\n                    hidePath = d3.select('.g_circle_'+ i).append(\"path\").attr('class', 'g_circle_path')\n                        .attr(\"transform\", \"translate(\" + node.x + \",\" + node.y + \")\").attr(\"d\", bottomArc)\n                        .attr(\"fill\", \"rgb(210, 213, 218)\")\n                        .style(\"cursor\",\"pointer\")\n                        // .on(\"click\", function(){ hideNodeAndLinks(node) })\n                        .on(\"mouseover\", function(){ hidePath.attr(\"fill\", \"rgb(185, 185, 185)\") })\n                        .on(\"mouseout\", function() { hidePath.attr(\"fill\", \"rgb(210, 213, 218)\") });\n\n                    d3.select('.g_circle_'+ i).append(\"g\").attr(\"class\",\"hide_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x - 8) + \",\" + (node.y + 38) + \") scale(0.7)\")\n                        .append(\"defs\").append(\"style\")\n                        .text(\".hide_a{fill:none;stroke:#FFFFFF;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}\");\n\n                    hidePath.append(\"title\").attr(\"class\",\"hide_a\").text(\"Hide\");\n\n                    hide_path1 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\" + (d.x - 13) + \",\" + (d.y + 42) + \"A15,15,0,0,1\" + (d.x + 13) + \",\" + (d.y + 42)\n                        });\n                    hide_path2 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\"+ (d.x - 12 + 10.4) + \",\" + (d.y + 34 + 10.937) + \"A\" + 3.749 + \",\" +  3.749 + \",0,1,1,\" + (d.x - 12 + 15.338) + \",\" + (d.y + 33 + 9)\n                        });\n                    hide_path3 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\" + (d.x - 12) + \",\" + (d.y + 42) + \"A20,20,0,0,0\" + (d.x - 4) + \",\" + (d.y + 47)\n                        });\n                    hide_path4 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\" + (d.x + 11) + \",\" + (d.y + 44) + \"A20,20,0,0,0\" + (d.x + 13) + \",\" + (d.y + 42)\n                        });\n                    hide_circle1 = d3.select('.g_circle_'+ i).append(\"circle\").attr(\"class\",\"hide_a\").attr(\"cx\",node.x - 12 + 17.15).attr(\"cy\",node.y + 33 + 17.25).attr(\"r\",6);\n                    hide_line1 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"hide_a\").attr(\"x1\",node.x - 12 + 14.15).attr(\"y1\",node.y + 33 + 17.25).attr(\"x2\",node.x - 12 + 20.15).attr(\"y2\",node.y + 33 + 17.25);\n\n                    // d3.selectAll(\".hide_a\").on(\"click\", (d) => { hideNodeAndLinks(d); })\n                }\n                function showUnlock(node, i) {\n                    unlockPath = d3.select('.g_circle_'+ i).append(\"path\").attr('class', 'g_circle_path')\n                        .attr(\"transform\", \"translate(\" + node.x + \",\" + node.y + \")\").attr(\"d\", leftArc)\n                        .attr(\"fill\", \"rgb(210, 213, 218)\").style(\"cursor\",\"pointer\")\n                        // .on(\"click\", function(d){ unlockNodeFixed(d); })\n                        .on(\"mouseover\", function(){ unlockPath.attr(\"fill\", \"rgb(185, 185, 185)\") })\n                        .on(\"mouseout\", function() { unlockPath.attr(\"fill\", \"rgb(210, 213, 218)\") });\n\n                    d3.select('.g_circle_'+ i).append(\"g\").attr(\"class\",\"unlock_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x - 52) + \",\" + (node.y - 30) + \") scale(0.7)\")\n                        .append(\"defs\").append(\"style\")\n                        .text(\".unlock_a{fill:none;stroke:#FFFFFF;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}\");\n\n                    unlockPath.append(\"title\").attr(\"class\",\"unlock_a\").text(\"Unlock\");\n                    unlock_path1 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"unlock_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x - 45) + \",\" + (node.y - 23) + \")\")\n                        .attr(\"d\", d3.svg.arc().outerRadius(5.3).innerRadius(5).startAngle(-1.8).endAngle(1.8))\n                        .attr(\"fill\", \"#FFFFFF\");\n\n                    unlock_rect1 = d3.select('.g_circle_'+ i).append(\"rect\").attr(\"class\",\"unlock_a\").attr(\"x\",node.x - 52 + 6.75).attr(\"y\",node.y  - 30 + 9.75)\n                        .attr(\"width\",15).attr(\"height\",12).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    unlock_line1 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"unlock_a\").attr(\"x1\",node.x  - 52 + 15).attr(\"y1\",node.y - 30 + 15).attr(\"x2\",node.x  - 52 + 15).attr(\"y2\",node.y - 30 + 18);\n\n                    // d3.selectAll(\".unlock_a\").on(\"click\", (d) => { unlockNodeFixed(d); })\n\n                }\n                function hideNodeAndLinks(node) {\n                    d3.event.stopPropagation();\n                    circle_g.attr('node', function(n) {\n                        if(n.id === node.id) {\n                            d3.select(this).remove();\n                        }\n                    });\n                    edges_line.attr('d', function(d) {\n                        if(d.source.id === node.id || d.target.id === node.id) {\n                            d3.select(this).remove();\n                        }\n                    });\n                }\n                function removeNodeAndPath(node, _this){\n                    d3.event.stopPropagation();\n                    alert('delete this '+ node + ',' + _this );\n                }\n                // function showNodeInfo(node, _this) {\n                //     window.console.log(node);\n                //     window.console.log(_this);\n                //\n                // }\n                function unlockNodeFixed(d) {\n                    d3.event.stopPropagation();\n                    d3.select(this).classed(\"fixed\", d.fixed = false);//解除节点位置锁定\n                    //清除上个节点的圆圈以及图标\n                    svg.selectAll('.g_circle_path').remove();\n                    svg.selectAll('.remove_a').remove();\n                    svg.selectAll('.hide_a').remove();\n                    svg.selectAll('.unlock_a').remove();\n                }\n\n                function Menu (menu, openCallback) {\n\n                    d3.event.preventDefault();\n\n                    d3.selectAll('.d3-context-menu').data([1])\n                        .enter()\n                        .append('div')\n                        .attr('class', 'd3-context-menu')\n\n                    // close menu\n                    d3.select('body').on('click.d3-context-menu', function () {\n                        d3.select('.d3-context-menu').style('display', 'none')\n                    });\n\n                    return (select, event, data)=> {\n\n\n                        console.log(select.type);\n                        console.log('select',data);\n                        let elm = this;\n\n\n                        d3.selectAll('.d3-context-menu').html('');\n                        let list = d3.selectAll('.d3-context-menu').append('ul');\n\n                        list.selectAll('li').data(menu).enter()\n                            .append('li')\n                            .html(function (d) {\n                                return d.title\n                            })\n                            .on('click', function (d) {\n\n\n                                d.action(data, select);\n\n                                d3.select('.d3-context-menu').style('display', 'none')\n                            });\n\n                        // the openCallback allows an action to fire before the menu is displayed\n                        // an example usage would be closing a tooltip\n                        if (openCallback) openCallback(data);\n\n                        // display context menu\n\n                        d3.select('.d3-context-menu')\n                            .style('left', (event.pageX - 2) + 'px')\n                            .style('top', (event.pageY - 2) + 'px')\n                            .style('display', 'block');\n                        d3.event.preventDefault();\n                        // return false\n                    }\n\n                }\n\n\n            },\n\n            doubleClick(info,nodes, input){\n\n\n                let new_node = {\n                    'id': nodes.length,\n                    \"type\": \"node\",\n                    'properties': {'name': input}\n                };\n\n                console.log('6. add node');\n                info.nodes.push(new_node);\n                this.renderGraph(info);\n\n                // this.$prompt(\n                //     'Please input node name：',\n                //     'Tips',\n                //     {\n                //         confirmButtonText: 'Yes',\n                //         cancelButtonText: 'No',\n                //         inputValue: 'New Node',\n                //         inputErrorMessage: 'Input cannot be none',\n                //         inputValidator: (value) => {       // 点击按钮时，对文本框里面的值进行验证\n                //             if(!value) {\n                //                 return 'Input cannot be none';\n                //             }\n                //         },\n                //\n                //     }).then(({value}) => {\n                //\n                //         let new_node = {\n                //             'id': nodes.length,\n                //             \"type\": \"node\",\n                //             'properties': {'name': value}\n                //         };\n                //\n                //         console.log('6. add node');\n                //         info.nodes.push(new_node);\n                //         this.renderGraph(info);\n                //\n                // }).catch((err) => {\n                //     console.log(err);\n                // });\n\n            },\n\n            singleClick(info, node,input){\n                // let temp = [];\n                console.log('single click!');\n                console.log('node id', node);\n                // let source = node.id;\n\n\n                if(this.temp.length ===2 && this.temp[0] !== this.temp[1] )\n                {\n\n                    // this.$prompt(\"Add links?\", \"Tips\", {\n                    //     confirmButtonText: \"Yes\",\n                    //     cancelButtonText: \"No\",\n                    //     inputValue: 'New Link',\n                    //     inputErrorMessage: 'Input cannot be none',\n                    //     inputValidator: (value) => {       // 点击按钮时，对文本框里面的值进行验证\n                    //         if(!value) {\n                    //             return 'Input cannot be none';\n                    //         }\n                    //     },\n                    //\n                    // }).then(({value}) => {\n                    //     this.$message(\n                    //\n                    //         {\n                    //         type: 'success',\n                    //         message: 'Add Links!'\n                    //     });\n                    //     console.log('new link added',info.links);\n\n                    let new_link = {\n                        \"source\": this.temp[0],\n                        \"target\": this.temp[1],\n                        \"type\": 'link',\n                        \"properties\": {},\n                        \"label\": input\n\n                    };\n\n                    info.links.push(new_link);\n                    console.log('new link added', info.links);\n                    this.temp.length = 0;\n                    this.renderGraph(info)\n\n                    // }).catch(() => {\n                    //     temp.length = 0;\n                    //     this.$message({\n                    //         type: 'info',\n                    //         message: 'Cancel!'\n                    //     })\n                    // });\n                }\n                else if(this.temp.length ===2 && this.temp[0] === this.temp[1] )\n                {\n                    this.temp.length = 0;\n                }\n\n                if (this.temp.length ===0){\n                    this.renderGraph(info)\n                }\n\n                console.log('current select node id',this.temp)\n\n\n            },\n\n\n            submitData(){\n                console.log('submit data',this.info);\n                alert('Submit Successfully!')\n            },\n\n            reload(){\n                this.renderGraph(this.info)\n            },\n\n            deleteNodes(node,info){\n                console.log('select delete node',node)\n            },\n\n\n\n\n            removeNodeClick(){\n\n                console.log('remove node')\n\n            },\n\n\n\n\n\n\n\n\n        }\n\n\n    }\n</script>\n\n<style>\n    #graph {\n        width: 100vw;\n        height: 100vh;\n    }\n\n    .d3-context-menu {\n        position: absolute;\n        display: none;\n        background-color: #f2f2f2;\n        border-radius: 4px;\n\n        font-family: Arial, sans-serif;\n        font-size: 14px;\n        min-width: 150px;\n        border: 1px solid #d4d4d4;\n\n        z-index:1200;\n    }\n\n    .d3-context-menu ul {\n        list-style-type: none;\n        margin: 4px 0px;\n        padding: 0px;\n        cursor: default;\n    }\n\n    .d3-context-menu ul li {\n        padding: 4px 16px;\n    }\n\n    .d3-context-menu ul li:hover {\n        background-color: #4677f8;\n        color: #fefefe;\n    }\n\n\n</style>\n\n"]}]}