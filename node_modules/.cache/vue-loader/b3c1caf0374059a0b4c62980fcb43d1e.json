{"remainingRequest":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js??vue-loader-options!/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue","mtime":1627295267255},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_css-loader@3.6.0@css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_vue-loader@15.9.7@vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_vue-loader@15.9.7@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgojZ3JhcGggewogICAgd2lkdGg6IDEwMHZ3OwogICAgaGVpZ2h0OiAxMDB2aDsKfQoKLmQzLWNvbnRleHQtbWVudSB7CiAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICBkaXNwbGF5OiBub25lOwogICAgYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsKICAgIGJvcmRlci1yYWRpdXM6IDRweDsKCiAgICBmb250LWZhbWlseTogQXJpYWwsIHNhbnMtc2VyaWY7CiAgICBmb250LXNpemU6IDE0cHg7CiAgICBtaW4td2lkdGg6IDE1MHB4OwogICAgYm9yZGVyOiAxcHggc29saWQgI2Q0ZDRkNDsKCiAgICB6LWluZGV4OjEyMDA7Cn0KCi5kMy1jb250ZXh0LW1lbnUgdWwgewogICAgbGlzdC1zdHlsZS10eXBlOiBub25lOwogICAgbWFyZ2luOiA0cHggMHB4OwogICAgcGFkZGluZzogMHB4OwogICAgY3Vyc29yOiBkZWZhdWx0Owp9CgouZDMtY29udGV4dC1tZW51IHVsIGxpIHsKICAgIHBhZGRpbmc6IDRweCAxNnB4Owp9CgouZDMtY29udGV4dC1tZW51IHVsIGxpOmhvdmVyIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICM0Njc3Zjg7CiAgICBjb2xvcjogI2ZlZmVmZTsKfQoKCg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA07CA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n\n\n\n\n\n    <div id=\"app\">\n        <el-row>\n            <el-header style=\"text-align: right;height: 40px;\">\n                <div class=\"grid-content \">\n                    <template >\n                        <el-button style=\"margin-right: 5px;\"  @click=\"onTapLogin\" v-show=\"showLogin\" size=\"small\" round>Login</el-button>\n                        <el-button style=\"margin-right: 5px;\" size=\"small\" type=\"success\" v-show=\"!showLogin\" round>{{username}}</el-button>\n                        <el-button  @click=\"logout\" size=\"small\" v-show=\"!showLogin\" round>Logout</el-button>\n                    </template>\n                </div>\n            </el-header>\n\n            <el-dialog\n                    title=\"Login\"\n                    :visible.sync=\"centerDialogVisible\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"username\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"password\" placeholder=\"Please Input Password\"></el-input></span>\n                <el-button type=\"text\" style=\"margin-top: 15px;\" @click.native=\"dialog_createUser=true; centerDialogVisible=false\">No account?</el-button>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"centerDialogVisible=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click.native=\"handleShow\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n            <el-dialog\n                    title=\"Create New Account\"\n                    :visible.sync=\"dialog_createUser\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"newUsername\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"newPassword\" onkeyup=\"value=value.replace(/[^A-Za-z0-9_]/g,'');\" placeholder=\"Please Input Password\"></el-input></span>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"dialog_createUser=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click=\"createUser\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n\n\n\n        </el-row>\n\n        <el-container>\n\n            <el-row class=\"tac\">\n                <el-col >\n                    <h5>SustainKG</h5>\n                    <el-menu\n\n                            default-active=\"2\"\n                            class=\"el-menu-vertical-demo\"\n\n                    >\n                        <el-submenu index=\"1\">\n                            <template slot=\"title\">\n                                <i class=\"el-icon-location\"></i>\n                                <span>Operation</span>\n                            </template>\n                            <el-menu-item-group>\n                                <!--<template slot=\"title\">分组一</template>-->\n                                <el-menu-item index=\"1-1\" @click=\"submitData()\">Submit Data</el-menu-item>\n                                <el-menu-item index=\"1-2\" @click=\"getWikipedia()\">get Articles</el-menu-item>\n                                <el-menu-item index=\"1-3\" @click=\"reload()\">Reload Data</el-menu-item>\n                            </el-menu-item-group>\n\n\n                        </el-submenu>\n                        <el-menu-item >\n                            <i class=\"el-icon-menu\"></i>\n                            <span slot=\"title\">Node Number：{{ info.nodes.length }}</span>\n                        </el-menu-item>\n                        <el-menu-item >\n                            <i class=\"el-icon-setting\"></i>\n                            <span slot=\"title\">Link Number：{{ info.links.length }}</span>\n                        </el-menu-item>\n                    </el-menu>\n                </el-col>\n\n\n                <router-view></router-view>\n\n            </el-row>\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible\"\n                       title=\"Create Node\" center\n            >\n\n                Node Name\n                <el-select\n\n                        @keyup.native = \"showOption\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"node_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible\">\n                    <el-option\n\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                    </div>\n                </el-select>\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"addNodes\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_node_name\"\n                       title=\"Change Node Name\" center\n            >\n\n                    Node Name\n                <el-select\n\n                        @keyup.native = \"showOption\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_node_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible\">\n                    <el-option\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_node_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_link\"\n                       :show-close=\"false\"\n                       title=\"Create Link\" center>\n\n                Link Name\n\n                <el-select\n                        @keyup.native = \"showOption_link\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"link_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_link\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_link\">\n                    <el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n\n                </el-select>\n\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\"  @click=\"addLinks\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_link_name\"\n                       title=\"Change Link Name\" center>\n\n                Link Name\n                <el-select\n                        @keyup.native = \"showOption_link\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_link_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_link\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_link\">\n                    <el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_link_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-main id=\"graph\">\n                <!--<div id=\"graph\"></div>-->\n            </el-main>\n\n\n\n\n        </el-container>\n\n\n\n\n    </div>\n\n</template>\n\n<script>\n    import * as d3 from \"d3\";\n    import hahaha from 'node-7z'\n\n    import $ from 'jquery'\n    import {\n        getNodeSelfPath,\n        setLinkGroup,\n        getNodesLine,} from './utils/deviceRelation'\n\n\n\n\n    export default {\n\n\n        data(){\n\n\n\n            let info = {\n                \"links\": [\n                    {\n                        \"source\" : 0,\n                        \"target\" : 1,\n                        \"type\" : \"link\",\n                        'label': 'Link TEST',\n                        \"properties\":{}\n\n                    },\n\n                ],\n                \"nodes\": [\n                    {\n                        \"id\": 0,\n                        \"type\" : \"node\",\n                        \"label\" : \"Device\",\n                        \"properties\":{\"name\":\"hello\"}\n                    },\n                    {\n                        \"id\": 1,\n                        \"type\" : \"node\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"will\"}\n                    },\n                    {\n                        \"id\": 2,\n                        \"type\" : \"node\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"lala\"}\n                    },\n\n                ]\n            };\n\n\n\n            return {\n\n                //////////////////////////////////////\n\n                // log function parameters\n                current_user:'',\n                username:'',\n                password:'',\n                newUsername:'',\n                newPassword:'',\n                showLogin:true,\n                centerDialogVisible:false,\n                dialog_createUser:false,\n                optionVisible:false,\n                optionVisible_link:false,\n                upload_nodes:'',\n                upload_links:'',\n\n\n                //////////////////////////////////////\n\n                node_value: '',\n                link_value:'',\n                btnChangeEnable: true,\n                node_list: [\n                    {\n                        value: 'node1',\n                        label: 'node1'\n                    },\n\n                    {\n                        value: 'node2',\n                        label: 'node2'\n                    },\n\n                    {\n                        value: 'test3',\n                        label: 'test3'\n                    },\n                    {\n                        value: 'bbb',\n                        label: 'bbb'\n                    }\n                ],\n\n                link_list: [\n                    {\n                        value: 'link1',\n                        label: 'link1'\n                    },\n                    {\n                        value: 'link2',\n                        label: 'link2'\n                    },\n                    {\n                        value: 'test_3',\n                        label: 'test_3'\n                    }\n                ],\n\n                info: {\n                    nodes:[],\n                    links:[]\n                },\n\n                // info: info,\n\n                ifClicked:false,\n\n                selected_Node: '',\n\n                dialogFormVisible:false,\n                dialogFormVisible_link:false,\n                dialogFormVisible_change_node_name:false,\n                dialogFormVisible_change_link_name:false,\n                temp : [],\n                clickTimeId : 0,\n\n                node_id: '',\n                link_id: '',\n                new_link_name:'',\n                new_node_name:'',\n\n                menu: [\n                    {\n                        title: 'Delete Nodes',\n                        action: (node,select_node) => {\n\n                            this.$confirm(\"Delete this node?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The node is deleted!'\n                                    });\n                                console.log('test !!!',select_node,node);\n                                this.info.nodes.splice(node,1);\n                                for(let i =this.info.links.length-1; i>=0; i-- )\n                                {\n                                    console.log('link index',i,node);\n                                    if(this.info.links[i].source === select_node\n                                        || this.info.links[i].target === select_node)\n                                    {\n                                        this.info.links.splice(i,1);\n                                    }\n\n                                }\n\n                                console.log('after delete', this.info)\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n\n                    },\n                    {\n                        title: 'Change Node Name',\n                        action:(node_id)=>{\n                            this.dialogFormVisible_change_node_name = true;\n                            this.node_id = node_id;\n\n                        },\n\n                    },\n\n                ],\n\n                menu_edge:[\n                    {\n                        title: 'Delete Links',\n                        action: (link,selected_link) => {\n                            console.log('ll',link,selected_link);\n                            this.$confirm(\"Delete this link?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The link is deleted!'\n                                    });\n                                this.info.links.splice(link,1);\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n                    },\n                    {\n                        title: 'Change link Name',\n                        action:(link_id)=>\n                        {\n                            this.dialogFormVisible_change_link_name = true;\n                            this.link_id = link_id;\n\n                        }\n\n                    }\n                ],\n\n\n\n            }\n        },\n\n        mounted() {\n\n            this.renderGraph(this.info);\n\n        },\n\n        methods: {\n            ////////////////////////////////////////////////////////////\n            // login functions\n\n            createUser:function(){\n\n                this.dialog_createUser  = false;\n                console.log('create user function',this.newUsername, this.newPassword)\n\n                this.$axios({\n                    url : '/createNewUser',\n                    method : 'post',\n                    data :\n                        {\n                            \"user\" : this.newUsername,\n                            \"password\" : this.newPassword\n                        }\n                }).then(response=>{\n                    this.username = this.newUsername;\n                    this.password = this.newPassword;\n                    this.newPassword = '';\n                    this.newUsername = '';\n                    console.log(response);\n                    if(response.status === 204)\n                    {\n\n                        this.$message(\n\n                            {\n                                type: 'warning',\n                                message: 'The username is existed !'\n                            });\n                        this.showLogin = true;\n                        this.dialog_createUser  = true;\n                        this.username = '';\n                        this.password = '';\n                    }\n                    else {\n\n                        this.$axios({\n                            url: '/getUserGraph',\n                            method: 'post',\n                            data:\n                                {\n                                    user: this.username,\n                                    password: this.password\n\n                                }\n                        }).then(response => {\n\n                            this.showLogin = false;\n                            let user_nodes = response.data.nodes;\n                            let user_links = response.data.links;\n                            let change_node_type = user_nodes.map(function (element) {\n                                element.id = Number(element.id);\n                                return element\n                            });\n                            let change_link_type = user_links.map(function (element) {\n                                element.id = Number(element.id);\n                                element.source = Number(element.source);\n                                element.target = Number(element.target);\n                                return element\n                            });\n\n                            this.info.nodes = change_node_type;\n                            this.info.links = change_link_type;\n                            this.current_user = response.data.user;\n\n                            this.renderGraph(this.info)\n\n\n                        })\n                    }\n                })\n\n            },\n\n            getWikipedia:function(){\n\n                const myStream = hahaha.list('/wiki_articles_list.7z')\n                console.log(myStream)\n\n\n\n\n                // this.$axios({\n                //\n                //     method : 'get',\n                //     url : '/getAllWikipediaArticles',\n                //     data: {}\n                // }).then(response=>{\n                //     console.log(response)\n                // })\n            },\n\n\n            handleShow:function(){\n\n\n\n\n                    this.centerDialogVisible=false;\n                    this.$axios({\n                        url:'/getUserGraph',\n                        method:'post',\n                        data:{\n                            // user : \"some_user\",\n                            // password: \"my_password\"\n                            user : this.username,\n                            password: this.password\n                        }\n\n                    }).then(response=>{\n                            this.showLogin=false;\n                            console.log('haha',response.data);\n                            let user_nodes = response.data.nodes;\n                            let user_links = response.data.links;\n                            // let test = response.data;\n\n                            let change_node_type = user_nodes.map(function (element) {\n                                element.id = Number(element.id);\n                                return element\n                            });\n\n                            let change_link_type = user_links.map(function (element) {\n                                element.id = Number(element.id);\n                                element.source = Number(element.source);\n                                element.target = Number(element.target);\n                                return element\n                            });\n\n                            console.log(change_node_type);\n                            console.log(change_link_type);\n                            this.info.nodes = change_node_type;\n                            this.info.links = change_link_type;\n                            this.current_user = response.data.user;\n                            this.renderGraph(this.info)\n\n                    }).catch(error=>{\n                        console.log('error',error);\n                        this.showLogin = true;\n                        this.username = '';\n                        this.password = '';\n                    })\n\n\n            },\n\n            onTapLogin:function () {\n                this.centerDialogVisible=true\n            },\n\n            logout:function () {\n                this.showLogin = true;\n                this.username = '';\n                this.password = '';\n                this.info= {\n                    nodes:[],\n                        links:[]\n                };\n\n                this.renderGraph(this.info)\n\n                // this.$router.push({ path: '/' })\n            },\n\n            ////////////////////////////////////////////////////////////\n\n\n\n            showOption()\n            {\n                let inputContent = document.getElementsByClassName('el-input__inner')[0].value;\n                console.log(inputContent.length);\n                console.log(document.getElementsByClassName('el-input__inner'))\n                this.optionVisible = inputContent.length >=2;\n                console.log('option',this.optionVisible);\n                this.$forceUpdate()\n            },\n\n            showOption_link()\n            {\n                let inputContent = ''\n                if (document.getElementsByClassName('el-input__inner').length === 1) {\n                    inputContent = document.getElementsByClassName('el-input__inner')[0].value;\n                }\n                else{\n                    inputContent = document.getElementsByClassName('el-input__inner')[1].value;\n                }\n                console.log(document.getElementsByClassName('el-input__inner'))\n                console.log(inputContent.length);\n\n                this.optionVisible_link = inputContent.length >=2;\n                console.log('option',this.optionVisible_link);\n                this.$forceUpdate()\n            },\n\n\n            selectBlur(e) {\n                // 意见类型\n                this.btnChangeEnable = true;\n                if (e.target.value !== '') {\n                    console.log('No selection',e.target.value);\n                    // this.$forceUpdate()   // 强制更新\n                }\n                this.$forceUpdate()\n                this.selectClear()\n            },\n\n            selectClear() {\n                this.node_value = '';\n                this.link_value = '';\n                this.new_node_name = '';\n                this.new_link_name = '';\n                this.optionVisible = false;\n                this.optionVisible_link = false;\n                this.$forceUpdate()\n            },\n\n            selectChange(val) {\n\n                if(val !== '')\n                {\n                    this.btnChangeEnable = false\n                }\n                if(this.dialogFormVisible_link===true){\n                    this.link_value = val\n                }\n                else if (this.dialogFormVisible_change_link_name === true){\n                    this.new_link_name = val\n                }\n                else if (this.dialogFormVisible_change_node_name === true){\n                    this.new_node_name = val\n                }\n                else if(this.dialogFormVisible === true){\n                    this.node_value = val;\n                }\n                this.$forceUpdate()\n            },\n\n\n            cancel()\n            {\n                this.dialogFormVisible = false;\n                this.dialogFormVisible_link = false;\n                this.dialogFormVisible_change_node_name = false;\n                this.dialogFormVisible_change_link_name = false;\n                this.selectClear();\n                this.temp.length = 0;\n                this.newPassword = '';\n                this.newUsername = '';\n                this.btnChangeEnable = true;\n            },\n\n            addNodes(){\n                this.dialogFormVisible = false;\n                this.doubleClick(this.info, this.info.nodes, this.node_value);\n                this.selectClear();\n                this.optionVisible = false;\n                this.optionVisible_link = false;\n                this.btnChangeEnable = true;\n\n            },\n\n            change_node_name(){\n\n                this.info.nodes[this.node_id].properties.name = this.new_node_name;\n                this.dialogFormVisible_change_node_name = false;\n                this.selectClear();\n                this.optionVisible = false;\n                this.optionVisible_link = false;\n                this.btnChangeEnable = true;\n                this.renderGraph(this.info);\n            },\n\n\n            change_link_name()\n            {\n\n                this.info.links[this.link_id].label = this.new_link_name;\n                this.dialogFormVisible_change_link_name = false;\n                this.selectClear();\n                this.btnChangeEnable = true;\n                this.optionVisible = false;\n                this.optionVisible_link = false;\n                this.renderGraph(this.info)\n            },\n\n            addLinks()\n            {\n\n                this.dialogFormVisible_link = false;\n\n                if (this.temp.length === 2) {\n                    this.singleClick(this.info, this.selected_Node, this.link_value);\n                }\n\n                this.$message(\n\n                    {\n                        type: 'success',\n                        message: 'Add Links!'\n                    });\n                this.btnChangeEnable = true;\n                this.optionVisible = false;\n                this.optionVisible_link = false;\n                this.selectClear()\n\n            },\n\n\n            renderGraph(info) {\n                // let temp = [];\n\n\n                console.log('render data',info);\n                let {links, nodes} = info;\n\n                //关系分组\n                setLinkGroup(links);\n\n\n                d3.select(\"#graph\").html('');\n\n\n                let force = d3.layout.force()//layout将json格式转化为力学图可用的格式\n                    .nodes(nodes)//设定节点数组\n                    .links(links)//设定连线数组\n                    .linkDistance(500)//连接线长度\n                    .charge(-1500)//顶点的电荷数。该参数决定是排斥还是吸引，数值越小越互相排斥\n                    .on(\"tick\", function (){\n                            tick()\n                        },\n                    )//指时间间隔，隔一段时间刷新一次画面\n                    .start();//开始转换\n\n\n\n                let zoom = d3.behavior.zoom()\n                    .scaleExtent([.4, 2])\n                    .on(\"zoom\", zoomed);\n\n                let svg = d3.select(\"#graph\").append(\"svg\")\n                    .attr(\"pointer-event\", \"all\")\n                    .attr(\"preserveAspectRatio\", \"xMidYMid meet\")//自适应容器大小\n                    .attr(\"viewBox\", \"-460 -220 1200 1200\")\n                    // .on(\"dblclick\", doubleClick)\n                    .call(zoom);\n\n\n\n\n                // old_nodes = nodes;\n                let circle_g = svg.selectAll(\"circle\")\n                    .data(force.nodes())//表示使用force.nodes数据\n                    .enter()\n                    .append(\"g\")\n                    .attr(\"class\",function(node,i){\n                        return \"g_circle_\" + i; })//标记circle的父节点\n                    .style(\"cursor\",\"pointer\")\n                    .call(drag()) //将当前选中的元素传到drag函数中，使顶点可以被拖动\n                    .on(\"click\", (node, i,) => {\n                        if (d3.event.defaultPrevented) return;\n\n                        // console.log('鼠标单击',this.clickTimeId);\n                        // console.log(d3.select(this))\n                        clearTimeout(this.clickTimeId);\n\n                        this.clickTimeId = setTimeout( ()=> {\n\n                                // console.log(\"鼠标单击\");\n\n                                // this.selected_Node = node;\n                                // this.addLinks()\n                                // console.log('selected_Node',this.selected_Node)\n                                this.temp.push(node.index);\n                                console.log('liuliu',this.temp);\n                                if(this.temp.length === 2 && this.temp[0] !== this.temp[1]){\n                                    this.dialogFormVisible_link = true;\n\n                                }\n                                else if(this.temp.length === 2 && this.temp[0] === this.temp[1])\n                                {\n                                    this.temp.length = 0\n                                }\n                                // this.singleClick(info, node, temp, this.state2);\n                                clickStyle(node, i, this);\n                            }\n                            , 250);\n                    })\n\n                    // .on('mouseover', (node) => {\n                    //     if (d3.event.defaultPrevented) return;\n                    //     // showNodeInfo(node, this);\n                    //     // showCircleBorderOuterArc(node, i);\n                    // })\n                    .on(\"dblclick\", (node, )=>{\n\n\n                        if (d3.event.defaultPrevented) return;\n                        console.log('double click',nodes);\n                        clearTimeout(this.clickTimeId);\n                        console.log('双击',this.clickTimeId);\n                        this.dialogFormVisible = true;\n                        // this.doubleClick(info, node, nodes, links)\n\n\n                    })\n                    .on('contextmenu',(d,node)=>{\n                        console.log('node!!!!!',d,node);\n                        Menu(this.menu)(d, d3.event, node)\n\n                    });\n\n\n\n\n                svg.on(\"dblclick.zoom\", null);//取消svg和圆圈的双击放大事件（d3中默认开启7个事件，关闭防止与上面的双击事件冲突）\n                circle_g.on(\"dblclick.zoom\", null);\n\n\n\n                //单击改变节点颜色 表明选中\n                function clickStyle(node, i, _this){\n\n                    console.log(_this.ifClicked);\n                    // _this.ifClicked = true;\n\n\n                    circle_g.attr('node', function(n) {\n\n                        console.log('click change color',n.id,node.id);\n                        console.log('selected node',n.index,node.index);\n\n                        if(n.index === node.index && _this.ifClicked===false ) {\n                            d3.select('.g_circle_'+ n.index).select('circle').style('fill','red');\n                            // 有问题！！！！！！！\n                            console.log('haha',d3.select('.g_circle_'+ n.index).select('circle'));\n                            _this.ifClicked = true;\n                            console.log('新选的 true',_this.ifClicked);\n\n                        }\n                        else if(n.index === node.index && _this.ifClicked===true )\n                        {\n                            d3.select('.g_circle_'+ n.index).select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);});\n                            _this.ifClicked = false;\n                            console.log('重复选的颜色变回去 false',_this.ifClicked);\n\n                        }\n                        else if(n.index !== node.index) {\n                            console.log('node are different');\n                            d3.select('.g_circle_'+ n.index)\n                                .select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);})\n\n                        }\n                    });\n                }\n\n\n\n\n                //圆圈\n                let circle = circle_g.append(\"circle\")\n                    .style(\"stroke-width\", \"2px\")\n                    .attr(\"r\", 30)//设置圆圈半径\n                    .style(\"fill\", function (node) { return getCircleColor(node); });\n\n                let text = circle_g.append(\"text\")\n                    .attr(\"dy\", \".35em\")\n                    .attr(\"text-anchor\", \"middle\")//在圆圈中加上数据\n                    .style('fill', \"#FFFFFF\")\n                    .attr('x',function(d){ appendCircleText(d, this); });\n\n                //圆圈的提示文字\n                circle.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                text.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                //设置连接线\n                let defs = svg.append(\"defs\");\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"end\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"start\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,0L10,-5L10,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 2)');//箭头颜色\n\n                const edges_line = svg.append(\"g\").selectAll(\".edgepath\")\n                    .data(force.links())\n                    .enter()\n                    .append(\"path\")\n\n                    // .attr('marker-end', function(d,i) {\n                    //     console.log('lala',d.label,d.x_start)\n                    //     if (d.x_start < d.x_end) {\n                    //         console.log('source < end')\n                    //         return  \"url(#end)\";\n                    //     }\n                    //     return ''\n                    // })\n                    // .attr('marker-start', function(d,i) {\n                    //     if (d.x_start >= d.x_end) {\n                    //         console.log('source > end')\n                    //         return \"url(#start)\";\n                    //     }\n                    //     return ''\n                    //\n                    // })\n                    // .attr(\"marker-start\", \"url(#start)\")\n                    // .attr(\"marker-end\",  function (d, i) { return getMarkerArrow(i); })//根据箭头标记的id号标记箭头\n                    // .attr(\"marker-end\",  )//根据箭头标记的id号标记箭头\n                    .style(\"stroke\", 'black')\n                    .style(\"stroke-width\", 3)//线条粗细\n                    .style(\"fill-opacity\",0)\n                    .style(\"cursor\",\"pointer\")\n                    .attr(\"id\", function (d, i) { return 'edgepath' + i; })\n                    .on(\"mouseover\", function(d){ return getStrokeWidth(d); })\n                    .on(\"mouseout\", function() { edges_line.style(\"stroke-width\", 3) })\n                    // .on('click', (link) => { this.deleteLine(this.info,link); })\n                    .on('contextmenu',(d,link)=>{\n                        console.log(d);\n                        console.log('link!!!',link)\n                        Menu(this.menu_edge)(d,d3.event,link)\n\n                    });\n\n                const edges_text = svg.append(\"g\").selectAll(\".edgetext\")\n                    .data(links)\n                    .enter()\n                    .append(\"text\")\n                    .style(\"pointer-events\", \"none\")\n                    .attr(\"class\",\"linetext\")\n                    .attr('text-anchor', \"middle\")\n                    .attr(\"fill-opacity\", 0.5)\n                    .style(\"cursor\",\"pointer\")\n\n                    .attr({'class': 'edgelabel',\n                        'id': function (d, i) { return 'edgepath' + i; },\n                        'dx': 190, 'dy': 20,\n                        'fill':'black',\n                        // 'transform': edge_text_Position()\n                    });\n\n\n\n                function edge_text_Position(){\n\n                    return 'rotate(180,40,5)'\n                }\n\n\n\n                //设置线条上的文字\n                edges_text.append('textPath')\n                    .attr('xlink:href', function (d, i) { return '#edgepath' + i })\n                    .attr(\"pointer-events\", \"none\")\n                    .attr(\"font-size\", 20)\n                    .text(function (d) { return d.label; });\n\n\n\n                // force.on(\"tick\", tick)//指时间间隔，隔一段时间刷新一次画面\n                //     .start();//开始转换\n                function zoomed() {//svg下的g标签移动大小\n                    svg.selectAll(\"g\").attr(\"transform\", \"translate(\"  +d3.event.translate + \")scale(\" +d3.event.scale + \")\");\n                }\n\n                function getMarkerArrow(i) {\n                    svg.append(\"defs\").append(\"marker\")   //箭头\n                        .attr(\"id\", \"arrow\"+i)\n                        .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                        .attr(\"markerUnits\", \"userSpaceOnUse\")\n                        .attr(\"markerWidth\", 20)//标识的大小\n                        .attr(\"markerHeight\", 20)\n                        .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                        .attr(\"refX\", 0)//箭头坐标\n                        .attr(\"refY\", 0)\n                        .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                        .append(\"svg:path\")\n                        .attr(\"stroke-width\",5)//箭头宽度\n                        .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                        .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n                    return \"url(#arrow_end\" + i + \")\";\n                }\n\n\n\n                function getStrokeWidth(d) {\n                    edges_line.style(\"stroke-width\", function (edge) {\n                        // return edge.relation.relationshipId === d.relation.relationshipId ? 3 : 1;\n                        return 6\n                    });\n                }\n\n                function drag(){//拖拽函数\n                    return force.drag().on(\"dragstart\",function(d){\n                        d3.event.sourceEvent.stopPropagation(); //取消默认事件\n                        d.fixed = true;//拖拽开始后设定被拖拽对象为固定\n                    });\n                }\n\n                function getCircleColor(node) {\n                    let color = {\n                        'Device': \"#FF9D00\",\n                        'Position': \"#C477E9\",\n                        'Work': '#67CAF4',\n                        'Install': '#BCDD73',\n                        'Application': '#DD1E9E',\n                        'Manufacturer': '#DDBA9E',\n                        'IotInfrastructure': '#6ca5dd',\n                        'DeviceAdmin': '#50DD87',\n                    };//圆圈背景色\n                    return color[node.label] || '#C477E9';\n                }\n\n                function appendCircleText(d, _this) {\n                    let circleText = '';\n                    if(d.type === 'node' && d.properties.name) {\n                        circleText = d.properties.name;\n                    } else if(d.label === 'Position') {\n                        circleText = d.positionCode;\n                    } else if (d.label === 'Application') {\n                        circleText = d.applicationName;\n                    } else if (d.label === 'Manufacturer') {\n                        circleText = d.manufacturerName;\n                    } else if (d.label === 'IotInfrastructure') {\n                        circleText = d.iotInfrastructureName;\n                    } else if (d.label === 'DeviceAdmin') {\n                        circleText = d.name;\n                    }\n                    //如果小于四个字符，不换行\n                    if(circleText && circleText.length > 14){\n                        circleText = circleText.substring(0,14) + \"...\";\n                        d3.select(_this).text(function(){return '';});\n                    }\n                    d3.select(_this).append('tspan').attr('x',0).attr('y',0).attr(\"font-size\", 10)\n                        .text(function(){ return circleText; });\n                }\n\n\n\n\n\n\n                function tick() {\n\n                    circle.attr(\"transform\", transform1);//圆圈\n                    text.attr(\"transform\", transform2);//顶点文字\n                    //link奇数有问题\n                    edges_line\n                        .attr('d', function (d) {\n\n                        return getNodesLine(d,edges_line,defs);//曲线路径\n\n                    });\n                    edges_line.attr('marker-end', function(d,i) {\n                            if (d.x_start < d.x_end) {\n                                // console.log('source < end')\n                                return  \"url(#end)\";\n                            }\n                            return ''\n                        }).attr('marker-start', function(d,i) {\n                        if (d.x_start >= d.x_end) {\n                            // console.log('source > end')\n                            return \"url(#start)\";\n                        }\n                        return ''\n\n                    })\n                    ;\n\n\n                }\n\n                //设置圆圈和文字的坐标\n                function transform1(d) {\n                    return \"translate(\" + d.x + \",\" + d.y + \")\";\n                }\n\n                function transform2(d) {\n                    return \"translate(\" + (d.x) + \",\" + d.y + \")\";\n                }\n\n\n\n                function Menu (menu, openCallback) {\n\n                    d3.event.preventDefault();\n\n                    d3.selectAll('.d3-context-menu').data([1])\n                        .enter()\n                        .append('div')\n                        .attr('class', 'd3-context-menu')\n\n                    // close menu\n                    d3.select('body').on('click.d3-context-menu', function () {\n                        d3.select('.d3-context-menu').style('display', 'none')\n                    });\n\n                    return (select, event, data)=> {\n\n\n                        console.log(select.type);\n                        console.log('select',data);\n                        let elm = this;\n\n\n                        d3.selectAll('.d3-context-menu').html('');\n                        let list = d3.selectAll('.d3-context-menu').append('ul');\n\n                        list.selectAll('li').data(menu).enter()\n                            .append('li')\n                            .html(function (d) {\n                                return d.title\n                            })\n                            .on('click', function (d) {\n\n\n                                d.action(data, select);\n\n                                d3.select('.d3-context-menu').style('display', 'none')\n                            });\n\n                        // the openCallback allows an action to fire before the menu is displayed\n                        // an example usage would be closing a tooltip\n                        if (openCallback) openCallback(data);\n\n                        // display context menu\n\n                        d3.select('.d3-context-menu')\n                            .style('left', (event.pageX - 2) + 'px')\n                            .style('top', (event.pageY - 2) + 'px')\n                            .style('display', 'block');\n                        d3.event.preventDefault();\n                        // return false\n                    }\n\n                }\n\n\n            },\n\n            doubleClick(info,nodes, input){\n\n\n                let new_node = {\n                    'id': nodes.length,\n                    \"type\": \"node\",\n                    'properties': {'name': input}\n                };\n\n                console.log('6. add node');\n                info.nodes.push(new_node);\n                this.renderGraph(info);\n\n\n            },\n\n            singleClick(info, node,input){\n                // let temp = [];\n                console.log('single click!');\n                console.log('node id', node);\n                // let source = node.id;\n\n\n                if(this.temp.length ===2 && this.temp[0] !== this.temp[1] )\n                {\n\n\n                    let new_link = {\n                        \"source\": this.temp[0],\n                        \"target\": this.temp[1],\n                        \"type\": 'link',\n                        \"properties\": {},\n                        \"label\": input\n\n                    };\n\n                    info.links.push(new_link);\n                    console.log('new link added', info.links);\n                    this.temp.length = 0;\n                    this.renderGraph(info)\n\n                }\n                else if(this.temp.length ===2 && this.temp[0] === this.temp[1] )\n                {\n                    this.temp.length = 0;\n                }\n\n                if (this.temp.length ===0){\n                    this.renderGraph(info)\n                }\n\n                console.log('current select node id',this.temp)\n\n\n            },\n\n\n            submitData(){\n                console.log('submit data',this.info);\n\n                alert('Submit Successfully!');\n                console.log('current user', this.current_user);\n                console.log(this.info.nodes);\n                console.log(this.info.links);\n\n                this.upload_nodes = this.info.nodes.map(function (element) {\n                    return { \"id\":String(element.id),\"type\": element.type,\"label\": element.label, \"properties\": {\n                            \"name\": element.properties.name\n                        }}\n\n                });\n                //\n                this.upload_links = this.info.links.map(function (element) {\n\n                    return {\"type\":element.type, \"id\":String(element.id), \"label\": element.label,\n                        \"source\":String(element.source.id), \"target\":String(element.target.id),\n                        \"properties\":element.properties}\n                });\n                //\n                console.log('nn',JSON.stringify(this.upload_nodes));\n                console.log('nn',JSON.stringify(this.upload_links));\n                // console.log('ll',upload_links);\n\n\n\n                this.$axios({\n                    headers:{\n                        'Content-Type': 'application/json;'\n                    },\n                    url:'/postUserGraph',\n                    method:'post',\n                    data:{\n                        user : this.current_user,\n                        nodes: this.upload_nodes,\n                        // nodes:[\n                        //     {\n                        //         \"type\": \"node\",\n                        //         \"id\": \"0\",\n                        //         \"label\": \"Concept\",\n                        //         \"properties\": {\n                        //             \"name\": \"Innovation\"\n                        //         }\n                        //     },\n                        //     {\n                        //         \"type\": \"node\",\n                        //         \"id\": \"1\",\n                        //         \"label\": \"Concept\",\n                        //         \"properties\": {\n                        //             \"name\": \"Globalization\"\n                        //         }\n                        //     }],\n                        links: this.upload_links\n                        // links:  [\n                        //     {\n                        //         \"type\": \"link\",\n                        //         \"id\": \"0\",\n                        //         \"label\": \"benefits\",\n                        //         \"source\": \"0\",\n                        //         \"target\": \"1\",\n                        //         \"properties\": {}\n                        //     }\n                        // ]\n                    }\n\n\n                }).then(response=>{\n                    console.log('success',response)\n                    this.renderGraph(this.info)\n                })\n            },\n\n            reload(){\n                this.renderGraph(this.info)\n            },\n\n            deleteNodes(node,info){\n                console.log('select delete node',node)\n            },\n\n\n\n\n            removeNodeClick(){\n\n                console.log('remove node')\n\n            },\n\n\n\n\n\n\n\n\n        }\n\n\n    }\n</script>\n\n<style>\n    #graph {\n        width: 100vw;\n        height: 100vh;\n    }\n\n    .d3-context-menu {\n        position: absolute;\n        display: none;\n        background-color: #f2f2f2;\n        border-radius: 4px;\n\n        font-family: Arial, sans-serif;\n        font-size: 14px;\n        min-width: 150px;\n        border: 1px solid #d4d4d4;\n\n        z-index:1200;\n    }\n\n    .d3-context-menu ul {\n        list-style-type: none;\n        margin: 4px 0px;\n        padding: 0px;\n        cursor: default;\n    }\n\n    .d3-context-menu ul li {\n        padding: 4px 16px;\n    }\n\n    .d3-context-menu ul li:hover {\n        background-color: #4677f8;\n        color: #fefefe;\n    }\n\n\n</style>\n\n"]}]}