{"remainingRequest":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue","mtime":1627523348502},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCiAgICBpbXBvcnQgKiBhcyBkMyBmcm9tICJkMyI7CiAgICAvLyBpbXBvcnQgU2V2ZW4gZnJvbSAnbm9kZS03eicKICAgIGltcG9ydCBzZXZlbkJpbiBmcm9tICc3emlwLWJpbicKICAgIGltcG9ydCB7IGxpc3QgfSBmcm9tICdub2RlLTd6JwoKICAgIGltcG9ydCAkIGZyb20gJ2pxdWVyeScKICAgIGltcG9ydCB7CiAgICAgICAgZ2V0Tm9kZVNlbGZQYXRoLAogICAgICAgIHNldExpbmtHcm91cCwKICAgICAgICBnZXROb2Rlc0xpbmUsfSBmcm9tICcuL3V0aWxzL2RldmljZVJlbGF0aW9uJwoKCgoKICAgIGV4cG9ydCBkZWZhdWx0IHsKCgogICAgICAgIGRhdGEoKXsKCgoKICAgICAgICAgICAgbGV0IGluZm8gPSB7CiAgICAgICAgICAgICAgICAibGlua3MiOiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAic291cmNlIiA6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0YXJnZXQiIDogMSwKICAgICAgICAgICAgICAgICAgICAgICAgInR5cGUiIDogImxpbmsiLAogICAgICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiAnTGluayBURVNUJywKICAgICAgICAgICAgICAgICAgICAgICAgInByb3BlcnRpZXMiOnt9CgogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgICJub2RlcyI6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJpZCI6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIiA6ICJub2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgImxhYmVsIiA6ICJEZXZpY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6eyJuYW1lIjoiaGVsbG8ifQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAiaWQiOiAxLAogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSIgOiAibm9kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJsYWJlbCI6ICJEZXZpY2UiLAogICAgICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6eyJuYW1lIjoid2lsbCJ9CiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJpZCI6IDIsCiAgICAgICAgICAgICAgICAgICAgICAgICJ0eXBlIiA6ICJub2RlIiwKICAgICAgICAgICAgICAgICAgICAgICAgImxhYmVsIjogIkRldmljZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjp7Im5hbWUiOiJsYWxhIn0KICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgfTsKCgoKICAgICAgICAgICAgcmV0dXJuIHsKCiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwoKICAgICAgICAgICAgICAgIC8vIGxvZyBmdW5jdGlvbiBwYXJhbWV0ZXJzCiAgICAgICAgICAgICAgICBjdXJyZW50X3VzZXI6JycsCiAgICAgICAgICAgICAgICB1c2VybmFtZTonJywKICAgICAgICAgICAgICAgIHBhc3N3b3JkOicnLAogICAgICAgICAgICAgICAgbmV3VXNlcm5hbWU6JycsCiAgICAgICAgICAgICAgICBuZXdQYXNzd29yZDonJywKICAgICAgICAgICAgICAgIHNob3dMb2dpbjp0cnVlLAogICAgICAgICAgICAgICAgY2VudGVyRGlhbG9nVmlzaWJsZTpmYWxzZSwKICAgICAgICAgICAgICAgIGRpYWxvZ19jcmVhdGVVc2VyOmZhbHNlLAoKICAgICAgICAgICAgICAgIG9wdGlvblZpc2libGVfaW5pdF9ub2RlczpmYWxzZSwKICAgICAgICAgICAgICAgIG9wdGlvblZpc2libGVfYWRkX25vZGVzOmZhbHNlLAogICAgICAgICAgICAgICAgb3B0aW9uVmlzaWJsZV9jaGFuZ2Vfbm9kZXM6ZmFsc2UsCiAgICAgICAgICAgICAgICBvcHRpb25WaXNpYmxlX2FkZF9saW5rOmZhbHNlLAogICAgICAgICAgICAgICAgb3B0aW9uVmlzaWJsZV9jaGFuZ2VfbGluazpmYWxzZSwKCgogICAgICAgICAgICAgICAgdXBsb2FkX25vZGVzOicnLAogICAgICAgICAgICAgICAgdXBsb2FkX2xpbmtzOicnLAogICAgICAgICAgICAgICAgZGlzYWJsZV9pbml0R3JhcGg6dHJ1ZSwKICAgICAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlX2luaXRHcmFwaDpmYWxzZSwKCiAgICAgICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgICAgICAgICAgc2hvd2RldGFpbF9ub2RlOmZhbHNlLCAvLyBzaG93IHRoZSBpbmZvIGluIHRoZSByaWdodCBjb3JuZXIKICAgICAgICAgICAgICAgIHNob3dkZXRhaWxfbGluazpmYWxzZSwKCiAgICAgICAgICAgICAgICBkZXRhaWxWYWx1ZTonJywKICAgICAgICAgICAgICAgIGRldGFpbG5hbWU6JycsCiAgICAgICAgICAgICAgICBub2RlX3ZhbHVlOiAnJywKICAgICAgICAgICAgICAgIGxpbmtfdmFsdWU6JycsCiAgICAgICAgICAgICAgICBpbml0X25vZGVfdmFsdWU6JycsCiAgICAgICAgICAgICAgICBidG5DaGFuZ2VFbmFibGU6IHRydWUsCiAgICAgICAgICAgICAgICBub2RlX2xpc3Q6IFsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbm9kZTEnLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ25vZGUxJwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdub2RlMicsCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbm9kZTInCiAgICAgICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3Rlc3QzJywKICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICd0ZXN0MycKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdiYmInLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2JiYicKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdLAoKICAgICAgICAgICAgICAgIGxpbmtfbGlzdDogWwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdsaW5rMScsCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbGluazEnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGluazInLAogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2xpbmsyJwogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ3Rlc3RfMycsCiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsOiAndGVzdF8zJwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIF0sCgogICAgICAgICAgICAgICAgaW5mbzogewogICAgICAgICAgICAgICAgICAgIG5vZGVzOltdLAogICAgICAgICAgICAgICAgICAgIGxpbmtzOltdCiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIC8vIGluZm86IGluZm8sCgogICAgICAgICAgICAgICAgaWZDbGlja2VkOmZhbHNlLAoKICAgICAgICAgICAgICAgIHNlbGVjdGVkX05vZGU6ICcnLAoKICAgICAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOmZhbHNlLAogICAgICAgICAgICAgICAgZGlhbG9nRm9ybVZpc2libGVfbGluazpmYWxzZSwKICAgICAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWU6ZmFsc2UsCiAgICAgICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lOmZhbHNlLAogICAgICAgICAgICAgICAgdGVtcCA6IFtdLAogICAgICAgICAgICAgICAgY2xpY2tUaW1lSWQgOiAwLAoKICAgICAgICAgICAgICAgIG5vZGVfaWQ6ICcnLAogICAgICAgICAgICAgICAgbGlua19pZDogJycsCiAgICAgICAgICAgICAgICBuZXdfbGlua19uYW1lOicnLAogICAgICAgICAgICAgICAgbmV3X25vZGVfbmFtZTonJywKCiAgICAgICAgICAgICAgICBtZW51OiBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSBOb2RlcycsCiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogKG5vZGUsc2VsZWN0X25vZGUpID0+IHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKCJEZWxldGUgdGhpcyBub2RlPyIsICJUaXBzIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAiTm8iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlIG5vZGUgaXMgZGVsZXRlZCEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0ICEhIScsc2VsZWN0X25vZGUsbm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzLnNwbGljZShub2RlLDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaSA9dGhpcy5pbmZvLmxpbmtzLmxlbmd0aC0xOyBpPj0wOyBpLS0gKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpbmsgaW5kZXgnLGksbm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMuaW5mby5saW5rc1tpXS5zb3VyY2UgPT09IHNlbGVjdF9ub2RlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLmluZm8ubGlua3NbaV0udGFyZ2V0ID09PSBzZWxlY3Rfbm9kZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmtzLnNwbGljZShpLDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FmdGVyIGRlbGV0ZScsIHRoaXMuaW5mbykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDYW5jZWwgRGVsZXRlIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgfSwKCgogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZSBOb2RlIE5hbWUnLAogICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246KG5vZGVfaWQpPT57CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlX2lkID0gbm9kZV9pZDsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgXSwKCiAgICAgICAgICAgICAgICBtZW51X2VkZ2U6WwogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdEZWxldGUgTGlua3MnLAogICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IChsaW5rLHNlbGVjdGVkX2xpbmspID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsbCcsbGluayxzZWxlY3RlZF9saW5rKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJGNvbmZpcm0oIkRlbGV0ZSB0aGlzIGxpbms/IiwgIlRpcHMiLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJObyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgbGluayBpcyBkZWxldGVkIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmtzLnNwbGljZShsaW5rLDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NhbmNlbCBEZWxldGUhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdDaGFuZ2UgbGluayBOYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uOihsaW5rX2lkKT0+CiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX2xpbmtfbmFtZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxpbmtfaWQgPSBsaW5rX2lkOwoKICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBdLAoKCgogICAgICAgICAgICB9CiAgICAgICAgfSwKCiAgICAgICAgbW91bnRlZCgpIHsKCiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKCiAgICAgICAgfSwKCiAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAgICAgLy8gbG9naW4gZnVuY3Rpb25zCgoKICAgICAgICAgICAgY3JlYXRlVXNlcjpmdW5jdGlvbigpewoKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nX2NyZWF0ZVVzZXIgID0gZmFsc2U7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3JlYXRlIHVzZXIgZnVuY3Rpb24nLHRoaXMubmV3VXNlcm5hbWUsIHRoaXMubmV3UGFzc3dvcmQpCgogICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgICAgIHVybCA6ICcvY3JlYXRlTmV3VXNlcicsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kIDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgICAgIGRhdGEgOgogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAidXNlciIgOiB0aGlzLm5ld1VzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgInBhc3N3b3JkIiA6IHRoaXMubmV3UGFzc3dvcmQKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSB0aGlzLm5ld1VzZXJuYW1lOwogICAgICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSB0aGlzLm5ld1Bhc3N3b3JkOwogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3UGFzc3dvcmQgPSAnJzsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld1VzZXJuYW1lID0gJyc7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgICAgIGlmKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA0KQogICAgICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlIHVzZXJuYW1lIGlzIGV4aXN0ZWQgIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2dpbiA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nX2NyZWF0ZVVzZXIgID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VybmFtZSA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2dldFVzZXJHcmFwaCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXJuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogdGhpcy5wYXNzd29yZAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2UgPT4gewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvZ2luID0gZmFsc2U7IC8vIGNvbnRyb2wgdGhlIGxvZ2luIHN0YXR1cwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJfbm9kZXMgPSByZXNwb25zZS5kYXRhLm5vZGVzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJfbGlua3MgPSByZXNwb25zZS5kYXRhLmxpbmtzOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYW5nZV9ub2RlX3R5cGUgPSB1c2VyX25vZGVzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBOdW1iZXIoZWxlbWVudC5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYW5nZV9saW5rX3R5cGUgPSB1c2VyX2xpbmtzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBOdW1iZXIoZWxlbWVudC5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zb3VyY2UgPSBOdW1iZXIoZWxlbWVudC5zb3VyY2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudGFyZ2V0ID0gTnVtYmVyKGVsZW1lbnQudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzID0gY2hhbmdlX25vZGVfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mby5saW5rcyA9IGNoYW5nZV9saW5rX3R5cGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRfdXNlciA9IHJlc3BvbnNlLmRhdGEudXNlcjsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbykKCgogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgZ2V0V2lraXBlZGlhOmZ1bmN0aW9uKCl7CgoKCgoKICAgICAgICAgICAgICAgIC8vIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgIC8vCiAgICAgICAgICAgICAgICAvLyAgICAgbWV0aG9kIDogJ2dldCcsCiAgICAgICAgICAgICAgICAvLyAgICAgdXJsIDogJy9nZXRBbGxXaWtpcGVkaWFBcnRpY2xlcycsCiAgICAgICAgICAgICAgICAvLyAgICAgZGF0YToge30KICAgICAgICAgICAgICAgIC8vIH0pLnRoZW4ocmVzcG9uc2U9PnsKICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgaGFuZGxlU2hvdzpmdW5jdGlvbigpewoKICAgICAgICAgICAgICAgICAgICB0aGlzLmNlbnRlckRpYWxvZ1Zpc2libGU9ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kYXhpb3MoewogICAgICAgICAgICAgICAgICAgICAgICB1cmw6Jy9nZXRVc2VyR3JhcGgnLAogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J3Bvc3QnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOnsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZXIgOiAic29tZV91c2VyIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHBhc3N3b3JkOiAibXlfcGFzc3dvcmQiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VyIDogdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZT0+ewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW49ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXNlcl9ub2RlcyA9IHJlc3BvbnNlLmRhdGEubm9kZXM7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXNlcl9saW5rcyA9IHJlc3BvbnNlLmRhdGEubGlua3M7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgdGVzdCA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYW5nZV9ub2RlX3R5cGUgPSB1c2VyX25vZGVzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBOdW1iZXIoZWxlbWVudC5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFuZ2VfbGlua190eXBlID0gdXNlcl9saW5rcy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gTnVtYmVyKGVsZW1lbnQuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc291cmNlID0gTnVtYmVyKGVsZW1lbnQuc291cmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnRhcmdldCA9IE51bWJlcihlbGVtZW50LnRhcmdldCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZm8ubm9kZXMgPSBjaGFuZ2Vfbm9kZV90eXBlOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmtzID0gY2hhbmdlX2xpbmtfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3VycmVudF91c2VyID0gcmVzcG9uc2UuZGF0YS51c2VyOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pCgogICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yPT57CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51c2VybmFtZSA9ICcnOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gJyc7CiAgICAgICAgICAgICAgICAgICAgfSkKCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgb25UYXBMb2dpbjpmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB0aGlzLmNlbnRlckRpYWxvZ1Zpc2libGU9dHJ1ZQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgbG9nb3V0OmZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2hvd0xvZ2luID0gdHJ1ZTsKICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSAnJzsKICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSAnJzsKICAgICAgICAgICAgICAgIHRoaXMuaW5mbz0gewogICAgICAgICAgICAgICAgICAgIG5vZGVzOltdLAogICAgICAgICAgICAgICAgICAgICAgICBsaW5rczpbXQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgICAgIC8vIG9wdGlvblZpc2libGVfaW5pdF9ub2RlczpmYWxzZSwKICAgICAgICAgICAgLy8gb3B0aW9uVmlzaWJsZV9hZGRfbm9kZXM6ZmFsc2UsCiAgICAgICAgICAgIC8vIG9wdGlvblZpc2libGVfY2hhbmdlX25vZGVzOmZhbHNlLAogICAgICAgICAgICAvLyBvcHRpb25WaXNpYmxlX2FkZF9saW5rOmZhbHNlLAogICAgICAgICAgICAvLyBvcHRpb25WaXNpYmxlX2NoYW5nZV9saW5rOmZhbHNlLAoKICAgICAgICAgICAgc2hvd09wdGlvbl9hZGRfbm9kZXMoKQogICAgICAgICAgICB7CgoKICAgICAgICAgICAgICAgIGxldCBpbnB1dENvbnRlbnQgPSB0aGlzLiRyZWZzLmFkZE5vZGUuJGNoaWxkcmVuWzBdLnZhbHVlOwogICAgICAgICAgICAgICAgdGhpcy5vcHRpb25WaXNpYmxlX2FkZF9ub2RlcyA9IGlucHV0Q29udGVudC5sZW5ndGggPj0yOwoKICAgICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHNob3dPcHRpb25faW5pdF9ub2RlcygpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGxldCBpbnB1dENvbnRlbnQgPSB0aGlzLiRyZWZzLmluaXQuJGNoaWxkcmVuWzBdLnZhbHVlOwoKICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uVmlzaWJsZV9pbml0X25vZGVzID0gaW5wdXRDb250ZW50Lmxlbmd0aCA+PTI7CgogICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc2hvd09wdGlvbl9jaGFuZ2Vfbm9kZXMoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBsZXQgaW5wdXRDb250ZW50ID0gdGhpcy4kcmVmcy5jaGFuZ2VOb2RlTmFtZS4kY2hpbGRyZW5bMF0udmFsdWU7CiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfY2hhbmdlX25vZGVzID0gaW5wdXRDb250ZW50Lmxlbmd0aCA+PTI7CgogICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIHNob3dPcHRpb25fYWRkX2xpbmsoKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBsZXQgaW5wdXRDb250ZW50ID0gdGhpcy4kcmVmcy5hZGRMaW5rLiRjaGlsZHJlblswXS52YWx1ZTsKCiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfYWRkX2xpbmsgPSBpbnB1dENvbnRlbnQubGVuZ3RoID49MjsKICAgICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIHNob3dPcHRpb25fY2hhbmdlX2xpbmsoKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgbGV0IGlucHV0Q29udGVudCA9IHRoaXMuJHJlZnMuY2hhbmdlTGlua05hbWUuJGNoaWxkcmVuWzBdLnZhbHVlOwogICAgICAgICAgICAgICAgdGhpcy5vcHRpb25WaXNpYmxlX2NoYW5nZV9saW5rID0gaW5wdXRDb250ZW50Lmxlbmd0aCA+PTI7CgogICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIHNlbGVjdEJsdXIoZSkgewogICAgICAgICAgICAgICAgLy8g5oSP6KeB57G75Z6LCiAgICAgICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQudmFsdWUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy4kZm9yY2VVcGRhdGUoKSAgIC8vIOW8uuWItuabtOaWsAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDbGVhcigpCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBzZWxlY3RDbGVhcigpIHsKICAgICAgICAgICAgICAgIHRoaXMubm9kZV92YWx1ZSA9ICcnOwogICAgICAgICAgICAgICAgdGhpcy5saW5rX3ZhbHVlID0gJyc7CiAgICAgICAgICAgICAgICB0aGlzLm5ld19ub2RlX25hbWUgPSAnJzsKICAgICAgICAgICAgICAgIHRoaXMubmV3X2xpbmtfbmFtZSA9ICcnOwoKICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uVmlzaWJsZV9pbml0X25vZGVzPWZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5vcHRpb25WaXNpYmxlX2FkZF9ub2Rlcz1mYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMub3B0aW9uVmlzaWJsZV9jaGFuZ2Vfbm9kZXM9ZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfYWRkX2xpbms9ZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfY2hhbmdlX2xpbms9ZmFsc2U7CgoKCiAgICAgICAgICAgICAgICAvLyBsZXQgZWxlbWVudHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlbC1pbnB1dF9faW5uZXInKTsKICAgICAgICAgICAgICAgIC8vIGVsZW1lbnRzWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudHNbMF0pOwogICAgICAgICAgICAgICAgLy8gd2hpbGUoZWxlbWVudHMubGVuZ3RoID4gMCl7CiAgICAgICAgICAgICAgICAvLyAgICAgZWxlbWVudHNbMF0ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbGVtZW50c1swXSk7CiAgICAgICAgICAgICAgICAvLyB9CgogICAgICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc2VsZWN0Q2hhbmdlKHZhbCkgewoKICAgICAgICAgICAgICAgIGlmKHZhbCAhPT0gJycpCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSBmYWxzZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYodGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9saW5rPT09dHJ1ZSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rX3ZhbHVlID0gdmFsCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9saW5rX25hbWUgPT09IHRydWUpewogICAgICAgICAgICAgICAgICAgIHRoaXMubmV3X2xpbmtfbmFtZSA9IHZhbAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2Vfbm9kZV9uYW1lID09PSB0cnVlKXsKICAgICAgICAgICAgICAgICAgICB0aGlzLm5ld19ub2RlX25hbWUgPSB2YWwKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9PT0gdHJ1ZSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub2RlX3ZhbHVlID0gdmFsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2luaXRHcmFwaCA9PT0gdHJ1ZSl7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0X25vZGVfdmFsdWUgPSB2YWw7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgY2FuY2VsKCkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9saW5rID0gZmFsc2U7CiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX2xpbmtfbmFtZSA9IGZhbHNlOwoKICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgdGhpcy5uZXdQYXNzd29yZCA9ICcnOwogICAgICAgICAgICAgICAgdGhpcy5uZXdVc2VybmFtZSA9ICcnOwogICAgICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9pbml0R3JhcGggPSBmYWxzZTsKCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCk7CgogICAgICAgICAgICB9LAogICAgICAgICAgICBzaG93SW5pdEdyYXBoOmZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2luaXRHcmFwaCA9IHRydWU7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIEluaXRHcmFwaDpmdW5jdGlvbigpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuaW5mbyk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5pdCcpKTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkIGEgc3RhcnQgbm9kZScpOwogICAgICAgICAgICAgICAgbGV0IGluaXRfbm9kZT0gewogICAgICAgICAgICAgICAgICAgICJpZCI6IDAsCiAgICAgICAgICAgICAgICAgICAgInR5cGUiIDogIm5vZGUiLAogICAgICAgICAgICAgICAgICAgICJsYWJlbCIgOiAiRGV2aWNlIiwKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6eyJuYW1lIjp0aGlzLmluaXRfbm9kZV92YWx1ZX0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9pbml0R3JhcGggID0gZmFsc2U7CgoKICAgICAgICAgICAgICAgIHRoaXMuaW5mby5ub2Rlcy5wdXNoKGluaXRfbm9kZSk7CgoKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKTsKICAgICAgICAgICAgfSwKCgogICAgICAgICAgICBhZGROb2RlcygpewoKICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuZG91YmxlQ2xpY2sodGhpcy5pbmZvLCB0aGlzLmluZm8ubm9kZXMsIHRoaXMubm9kZV92YWx1ZSk7CgogICAgICAgICAgICAgICAgLy8gdGhpcy5vcHRpb25WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvLyB0aGlzLm9wdGlvblZpc2libGVfbGluayA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSB0cnVlOwogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RDbGVhcigpOwoKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBjaGFuZ2Vfbm9kZV9uYW1lKCl7CgogICAgICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzW3RoaXMubm9kZV9pZF0ucHJvcGVydGllcy5uYW1lID0gdGhpcy5uZXdfbm9kZV9uYW1lOwogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2Vfbm9kZV9uYW1lID0gZmFsc2U7CgogICAgICAgICAgICAgICAgLy8gdGhpcy5vcHRpb25WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvLyB0aGlzLm9wdGlvblZpc2libGVfbGluayA9IGZhbHNlOwogICAgICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSB0cnVlOwoKCiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCk7CgogICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIGNoYW5nZV9saW5rX25hbWUoKQogICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmtzW3RoaXMubGlua19pZF0ubGFiZWwgPSB0aGlzLm5ld19saW5rX25hbWU7CiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9saW5rX25hbWUgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgICAgICAvLyB0aGlzLm9wdGlvblZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIC8vIHRoaXMub3B0aW9uVmlzaWJsZV9saW5rID0gZmFsc2U7CgoKCgogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCk7CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBhZGRMaW5rcygpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZGQgbGluaycsdGhpcy5vcHRpb25WaXNpYmxlLHRoaXMub3B0aW9uVmlzaWJsZV9saW5rKTsKCiAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbmsgPSBmYWxzZTsKCiAgICAgICAgICAgICAgICBpZiAodGhpcy50ZW1wLmxlbmd0aCA9PT0gMikgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc2luZ2xlQ2xpY2sodGhpcy5pbmZvLCB0aGlzLnNlbGVjdGVkX05vZGUsIHRoaXMubGlua192YWx1ZSk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgKCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBZGQgTGlua3MhJwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSB0cnVlOwogICAgICAgICAgICAgICAgLy8gdGhpcy5vcHRpb25WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvLyB0aGlzLm9wdGlvblZpc2libGVfbGluayA9IGZhbHNlOwoKCiAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCkKCiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgcmVuZGVyR3JhcGgoaW5mbykgewogICAgICAgICAgICAgICAgLy8gbGV0IHRlbXAgPSBbXTsKCgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlbmRlciBkYXRhJyxpbmZvKTsKICAgICAgICAgICAgICAgIGlmKHRoaXMuc2hvd0xvZ2luID09PSBmYWxzZSAmJiB0aGlzLmluZm8ubm9kZXMubGVuZ3RoID09PSAwICkKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVfaW5pdEdyYXBoID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZV9pbml0R3JhcGggPSB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gdGhpcy5kaXNhYmxlX2luaXRHcmFwaCA9IHRoaXMuaW5mby5ub2Rlcy5sZW5ndGggIT09IDA7CgogICAgICAgICAgICAgICAgbGV0IHtsaW5rcywgbm9kZXN9ID0gaW5mbzsKCiAgICAgICAgICAgICAgICAvL+WFs+ezu+WIhue7hAogICAgICAgICAgICAgICAgc2V0TGlua0dyb3VwKGxpbmtzKTsKCgogICAgICAgICAgICAgICAgZDMuc2VsZWN0KCIjZ3JhcGgiKS5odG1sKCcnKTsKCgogICAgICAgICAgICAgICAgbGV0IGZvcmNlID0gZDMubGF5b3V0LmZvcmNlKCkvL2xheW91dOWwhmpzb27moLzlvI/ovazljJbkuLrlipvlrablm77lj6/nlKjnmoTmoLzlvI8KICAgICAgICAgICAgICAgICAgICAubm9kZXMobm9kZXMpLy/orr7lrproioLngrnmlbDnu4QKICAgICAgICAgICAgICAgICAgICAubGlua3MobGlua3MpLy/orr7lrprov57nur/mlbDnu4QKICAgICAgICAgICAgICAgICAgICAubGlua0Rpc3RhbmNlKDUwMCkvL+i/nuaOpee6v+mVv+W6pgogICAgICAgICAgICAgICAgICAgIC5jaGFyZ2UoLTE1MDApLy/pobbngrnnmoTnlLXojbfmlbDjgILor6Xlj4LmlbDlhrPlrprmmK/mjpLmlqXov5jmmK/lkLjlvJXvvIzmlbDlgLzotorlsI/otorkupLnm7jmjpLmlqUKICAgICAgICAgICAgICAgICAgICAub24oInRpY2siLCBmdW5jdGlvbiAoKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2soKQogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICkvL+aMh+aXtumXtOmXtOmalO+8jOmalOS4gOauteaXtumXtOWIt+aWsOS4gOasoeeUu+mdogogICAgICAgICAgICAgICAgICAgIC5zdGFydCgpOy8v5byA5aeL6L2s5o2iCgoKCiAgICAgICAgICAgICAgICBsZXQgem9vbSA9IGQzLmJlaGF2aW9yLnpvb20oKQogICAgICAgICAgICAgICAgICAgIC5zY2FsZUV4dGVudChbLjQsIDJdKQogICAgICAgICAgICAgICAgICAgIC5vbigiem9vbSIsIHpvb21lZCk7CgogICAgICAgICAgICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgiI2dyYXBoIikuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50IiwgImFsbCIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInByZXNlcnZlQXNwZWN0UmF0aW8iLCAieE1pZFlNaWQgbWVldCIpLy/oh6rpgILlupTlrrnlmajlpKflsI8KICAgICAgICAgICAgICAgICAgICAuYXR0cigidmlld0JveCIsICItNDYwIC0yMjAgMTIwMCAxMjAwIikKICAgICAgICAgICAgICAgICAgICAvLyAub24oImRibGNsaWNrIiwgZG91YmxlQ2xpY2spCiAgICAgICAgICAgICAgICAgICAgLmNhbGwoem9vbSk7CgoKCgogICAgICAgICAgICAgICAgLy8gb2xkX25vZGVzID0gbm9kZXM7CiAgICAgICAgICAgICAgICBsZXQgY2lyY2xlX2cgPSBzdmcuc2VsZWN0QWxsKCJjaXJjbGUiKQogICAgICAgICAgICAgICAgICAgIC5kYXRhKGZvcmNlLm5vZGVzKCkpLy/ooajnpLrkvb/nlKhmb3JjZS5ub2Rlc+aVsOaNrgogICAgICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiZyIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIixmdW5jdGlvbihub2RlLGkpewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gImdfY2lyY2xlXyIgKyBpOyB9KS8v5qCH6K6wY2lyY2xl55qE54i26IqC54K5CiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJjdXJzb3IiLCJwb2ludGVyIikKICAgICAgICAgICAgICAgICAgICAuY2FsbChkcmFnKCkpIC8v5bCG5b2T5YmN6YCJ5Lit55qE5YWD57Sg5Lyg5YiwZHJhZ+WHveaVsOS4re+8jOS9v+mhtueCueWPr+S7peiiq+aLluWKqAogICAgICAgICAgICAgICAgICAgIC5vbigiY2xpY2siLCAobm9kZSwgaSwpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsKCgogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVJZCk7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrVGltZUlkID0gc2V0VGltZW91dCggKCk9PiB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXAucHVzaChub2RlLmluZGV4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGl1bGl1Jyx0aGlzLnRlbXApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudGVtcC5sZW5ndGggPT09IDIgJiYgdGhpcy50ZW1wWzBdICE9PSB0aGlzLnRlbXBbMV0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbmsgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnRlbXAubGVuZ3RoID09PSAyICYmIHRoaXMudGVtcFswXSA9PT0gdGhpcy50ZW1wWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50ZW1wLmxlbmd0aCA9IDAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zaW5nbGVDbGljayhpbmZvLCBub2RlLCB0ZW1wLCB0aGlzLnN0YXRlMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xpY2tTdHlsZShub2RlLCBpLCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICwgMjUwKTsKICAgICAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIChub2RlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd2RldGFpbF9ub2RlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsVmFsdWUgPSBub2RlCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGV0YWlsbmFtZSA9IG5vZGUucHJvcGVydGllcy5uYW1lCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNob3dOb2RlSW5mbyhub2RlLCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2hvd0NpcmNsZUJvcmRlck91dGVyQXJjKG5vZGUsIGkpOwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsKG5vZGUpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd2RldGFpbF9ub2RlID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAub24oImRibGNsaWNrIiwgKG5vZGUsICk9PnsKCgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5jbGlja1RpbWVJZCk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdlbC1pbnB1dF9faW5uZXInKSkKICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5kb3VibGVDbGljayhpbmZvLCBub2RlLCBub2RlcywgbGlua3MpCgoKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC5vbignY29udGV4dG1lbnUnLChkLG5vZGUpPT57CiAgICAgICAgICAgICAgICAgICAgICAgIE1lbnUodGhpcy5tZW51KShkLCBkMy5ldmVudCwgbm9kZSkKCiAgICAgICAgICAgICAgICAgICAgfSk7CgoKCgogICAgICAgICAgICAgICAgc3ZnLm9uKCJkYmxjbGljay56b29tIiwgbnVsbCk7Ly/lj5bmtohzdmflkozlnIblnIjnmoTlj4zlh7vmlL7lpKfkuovku7bvvIhkM+S4rem7mOiupOW8gOWQrzfkuKrkuovku7bvvIzlhbPpl63pmLLmraLkuI7kuIrpnaLnmoTlj4zlh7vkuovku7blhrLnqoHvvIkKICAgICAgICAgICAgICAgIGNpcmNsZV9nLm9uKCJkYmxjbGljay56b29tIiwgbnVsbCk7CgoKCiAgICAgICAgICAgICAgICAvL+WNleWHu+aUueWPmOiKgueCueminOiJsiDooajmmI7pgInkuK0KICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGNsaWNrU3R5bGUobm9kZSwgaSwgX3RoaXMpewoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhfdGhpcy5pZkNsaWNrZWQpOwogICAgICAgICAgICAgICAgICAgIC8vIF90aGlzLmlmQ2xpY2tlZCA9IHRydWU7CgoKICAgICAgICAgICAgICAgICAgICBjaXJjbGVfZy5hdHRyKCdub2RlJywgZnVuY3Rpb24obikgewoKCgogICAgICAgICAgICAgICAgICAgICAgICBpZihuLmluZGV4ID09PSBub2RlLmluZGV4ICYmIF90aGlzLmlmQ2xpY2tlZD09PWZhbHNlICkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgbi5pbmRleCkuc2VsZWN0KCdjaXJjbGUnKS5zdHlsZSgnZmlsbCcsJ3JlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hhaGEnLGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIG4uaW5kZXgpLnNlbGVjdCgnY2lyY2xlJykpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWZDbGlja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmlrDpgInnmoQgdHJ1ZScsX3RoaXMuaWZDbGlja2VkKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihuLmluZGV4ID09PSBub2RlLmluZGV4ICYmIF90aGlzLmlmQ2xpY2tlZD09PXRydWUgKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBuLmluZGV4KS5zZWxlY3QoJ2NpcmNsZScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGdldENpcmNsZUNvbG9yKG5vZGUpO30pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWZDbGlja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn6YeN5aSN6YCJ55qE6aKc6Imy5Y+Y5Zue5Y67IGZhbHNlJyxfdGhpcy5pZkNsaWNrZWQpOwoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG4uaW5kZXggIT09IG5vZGUuaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub2RlIGFyZSBkaWZmZXJlbnQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIG4uaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnY2lyY2xlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gZ2V0Q2lyY2xlQ29sb3Iobm9kZSk7fSkKCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KCgoKCiAgICAgICAgICAgICAgICAvL+WchuWciAogICAgICAgICAgICAgICAgbGV0IGNpcmNsZSA9IGNpcmNsZV9nLmFwcGVuZCgiY2lyY2xlIikKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsICIycHgiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyIiwgMzApLy/orr7nva7lnIblnIjljYrlvoQKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gZ2V0Q2lyY2xlQ29sb3Iobm9kZSk7IH0pOwoKICAgICAgICAgICAgICAgIGxldCB0ZXh0ID0gY2lyY2xlX2cuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZHkiLCAiLjM1ZW0iKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKS8v5Zyo5ZyG5ZyI5Lit5Yqg5LiK5pWw5o2uCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgIiNGRkZGRkYiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JyxmdW5jdGlvbihkKXsgYXBwZW5kQ2lyY2xlVGV4dChkLCB0aGlzKTsgfSk7CgogICAgICAgICAgICAgICAgLy/lnIblnIjnmoTmj5DnpLrmloflrZcKICAgICAgICAgICAgICAgIGNpcmNsZS5hcHBlbmQoInN2Zzp0aXRsZSIpLnRleHQoZnVuY3Rpb24obm9kZSkgewogICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vZGUnOiByZXR1cm4gbm9kZS5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0RldmljZSc6IHJldHVybiBub2RlLmZhY3RvcnlDb2RlOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdBcHBsaWNhdGlvbic6IHJldHVybiBub2RlLmFwcGxpY2F0aW9uTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnUG9zaXRpb24nOiByZXR1cm4gbm9kZS5wb3NpdGlvbkNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ01hbnVmYWN0dXJlcic6IHJldHVybiBub2RlLm1hbnVmYWN0dXJlck5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0lvdEluZnJhc3RydWN0dXJlJzogcmV0dXJuIG5vZGUuaW90SW5mcmFzdHJ1Y3R1cmVOYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdEZXZpY2VBZG1pbic6IHJldHVybiBub2RlLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB0ZXh0LmFwcGVuZCgic3ZnOnRpdGxlIikudGV4dChmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChub2RlLnR5cGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9kZSc6IHJldHVybiBub2RlLnByb3BlcnRpZXMubmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnRGV2aWNlJzogcmV0dXJuIG5vZGUuZmFjdG9yeUNvZGU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0FwcGxpY2F0aW9uJzogcmV0dXJuIG5vZGUuYXBwbGljYXRpb25OYW1lOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdQb3NpdGlvbic6IHJldHVybiBub2RlLnBvc2l0aW9uQ29kZTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnTWFudWZhY3R1cmVyJzogcmV0dXJuIG5vZGUubWFudWZhY3R1cmVyTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnSW90SW5mcmFzdHJ1Y3R1cmUnOiByZXR1cm4gbm9kZS5pb3RJbmZyYXN0cnVjdHVyZU5hbWU7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0RldmljZUFkbWluJzogcmV0dXJuIG5vZGUubmFtZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8v6K6+572u6L+e5o6l57q/CiAgICAgICAgICAgICAgICBsZXQgZGVmcyA9IHN2Zy5hcHBlbmQoImRlZnMiKTsKCiAgICAgICAgICAgICAgICBkZWZzLmFwcGVuZCgibWFya2VyIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiaWQiLCAiZW5kIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCJzdHJva2VXaWR0aCIpLy/orr7nva7kuLpzdHJva2VXaWR0aOeureWktOS8mumaj+edgOe6v+eahOeyl+e7huWPkeeUn+WPmOWMlgogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJVbml0cyIsICJ1c2VyU3BhY2VPblVzZSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlcldpZHRoIiwgMjApLy/moIfor4bnmoTlpKflsI8KICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VySGVpZ2h0IiwgMjApCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInZpZXdCb3giLCAiMCAtNCAxMiAxNSIpLy/lnZDmoIfns7vnmoTljLrln58KICAgICAgICAgICAgICAgICAgICAuYXR0cigicmVmWCIsIDApLy/nrq3lpLTlnZDmoIcKICAgICAgICAgICAgICAgICAgICAuYXR0cigicmVmWSIsIDApCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm9yaWVudCIsICdhdXRvJykvL+e7mOWItuaWueWQke+8jOWPr+iuvuWumuS4uu+8mmF1dG/vvIjoh6rliqjnoa7orqTmlrnlkJHvvInlkowg6KeS5bqm5YC8CiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgic3ZnOnBhdGgiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLDUpLy/nrq3lpLTlrr3luqYKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsICJNMCwtNUwxMCwwTDAsNSIpLy/nrq3lpLTnmoTot6/lvoQKICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICdyZ2JhKDAsMCwwLCAwLjQpJyk7Ly/nrq3lpLTpopzoibIKCiAgICAgICAgICAgICAgICBkZWZzLmFwcGVuZCgibWFya2VyIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiaWQiLCAic3RhcnQiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJVbml0cyIsInN0cm9rZVdpZHRoIikvL+iuvue9ruS4unN0cm9rZVdpZHRo566t5aS05Lya6ZqP552A57q/55qE57KX57uG5Y+R55Sf5Y+Y5YyWCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlclVuaXRzIiwgInVzZXJTcGFjZU9uVXNlIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyV2lkdGgiLCAyMCkvL+agh+ivhueahOWkp+WwjwogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJIZWlnaHQiLCAyMCkKICAgICAgICAgICAgICAgICAgICAuYXR0cigidmlld0JveCIsICIwIC00IDEyIDE1IikvL+WdkOagh+ezu+eahOWMuuWfnwogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyZWZYIiwgMCkvL+eureWktOWdkOaghwogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyZWZZIiwgMCkKICAgICAgICAgICAgICAgICAgICAuYXR0cigib3JpZW50IiwgJ2F1dG8nKS8v57uY5Yi25pa55ZCR77yM5Y+v6K6+5a6a5Li677yaYXV0b++8iOiHquWKqOehruiupOaWueWQke+8ieWSjCDop5LluqblgLwKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCJzdmc6cGF0aCIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsNSkvL+eureWktOWuveW6pgogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJkIiwgIk0wLDBMMTAsLTVMMTAsNSIpLy/nrq3lpLTnmoTot6/lvoQKICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICdyZ2JhKDAsMCwwLCAyKScpOy8v566t5aS06aKc6ImyCgogICAgICAgICAgICAgICAgY29uc3QgZWRnZXNfbGluZSA9IHN2Zy5hcHBlbmQoImciKS5zZWxlY3RBbGwoIi5lZGdlcGF0aCIpCiAgICAgICAgICAgICAgICAgICAgLmRhdGEoZm9yY2UubGlua3MoKSkKICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoInBhdGgiKQoKICAgICAgICAgICAgICAgICAgICAvLyAuYXR0cignbWFya2VyLWVuZCcsIGZ1bmN0aW9uKGQsaSkgewogICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygnbGFsYScsZC5sYWJlbCxkLnhfc3RhcnQpCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChkLnhfc3RhcnQgPCBkLnhfZW5kKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnc291cmNlIDwgZW5kJykKICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIHJldHVybiAgInVybCgjZW5kKSI7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuICcnCiAgICAgICAgICAgICAgICAgICAgLy8gfSkKICAgICAgICAgICAgICAgICAgICAvLyAuYXR0cignbWFya2VyLXN0YXJ0JywgZnVuY3Rpb24oZCxpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIGlmIChkLnhfc3RhcnQgPj0gZC54X2VuZCkgewogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgY29uc29sZS5sb2coJ3NvdXJjZSA+IGVuZCcpCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm4gInVybCgjc3RhcnQpIjsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vICAgICByZXR1cm4gJycKICAgICAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgICAgICAgICAgLy8gLmF0dHIoIm1hcmtlci1zdGFydCIsICJ1cmwoI3N0YXJ0KSIpCiAgICAgICAgICAgICAgICAgICAgLy8gLmF0dHIoIm1hcmtlci1lbmQiLCAgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuIGdldE1hcmtlckFycm93KGkpOyB9KS8v5qC55o2u566t5aS05qCH6K6w55qEaWTlj7fmoIforrDnrq3lpLQKICAgICAgICAgICAgICAgICAgICAvLyAuYXR0cigibWFya2VyLWVuZCIsICApLy/moLnmja7nrq3lpLTmoIforrDnmoRpZOWPt+agh+iusOeureWktAogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgJ2JsYWNrJykKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZS13aWR0aCIsIDMpLy/nur/mnaHnspfnu4YKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwtb3BhY2l0eSIsMCkKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJpZCIsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAnZWRnZXBhdGgnICsgaTsgfSkKICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKGQpeyByZXR1cm4gZ2V0U3Ryb2tlV2lkdGgoZCk7IH0pCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgeyBlZGdlc19saW5lLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAzKSB9KQogICAgICAgICAgICAgICAgICAgIC8vIC5vbignY2xpY2snLCAobGluaykgPT4geyB0aGlzLmRlbGV0ZUxpbmUodGhpcy5pbmZvLGxpbmspOyB9KQogICAgICAgICAgICAgICAgICAgIC5vbignY29udGV4dG1lbnUnLChkLGxpbmspPT57CgogICAgICAgICAgICAgICAgICAgICAgICBNZW51KHRoaXMubWVudV9lZGdlKShkLGQzLmV2ZW50LGxpbmspCgogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VzX3RleHQgPSBzdmcuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIuZWRnZXRleHQiKQogICAgICAgICAgICAgICAgICAgIC5kYXRhKGxpbmtzKQogICAgICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCJwb2ludGVyLWV2ZW50cyIsICJub25lIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiY2xhc3MiLCJsaW5ldGV4dCIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgIm1pZGRsZSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImZpbGwtb3BhY2l0eSIsIDAuNSkKICAgICAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQoKICAgICAgICAgICAgICAgICAgICAuYXR0cih7J2NsYXNzJzogJ2VkZ2VsYWJlbCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdpZCc6IGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAnZWRnZXBhdGgnICsgaTsgfSwKICAgICAgICAgICAgICAgICAgICAgICAgJ2R4JzogMTkwLCAnZHknOiAyMCwKICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpbGwnOidibGFjaycsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICd0cmFuc2Zvcm0nOiBlZGdlX3RleHRfUG9zaXRpb24oKQogICAgICAgICAgICAgICAgICAgIH0pOwoKCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZWRnZV90ZXh0X1Bvc2l0aW9uKCl7CgogICAgICAgICAgICAgICAgICAgIHJldHVybiAncm90YXRlKDE4MCw0MCw1KScKICAgICAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgICAgIC8v6K6+572u57q/5p2h5LiK55qE5paH5a2XCiAgICAgICAgICAgICAgICBlZGdlc190ZXh0LmFwcGVuZCgndGV4dFBhdGgnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4bGluazpocmVmJywgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuICcjZWRnZXBhdGgnICsgaSB9KQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJub25lIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZm9udC1zaXplIiwgMjApCiAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGQubGFiZWw7IH0pOwoKCgogICAgICAgICAgICAgICAgLy8gZm9yY2Uub24oInRpY2siLCB0aWNrKS8v5oyH5pe26Ze06Ze06ZqU77yM6ZqU5LiA5q615pe26Ze05Yi35paw5LiA5qyh55S76Z2iCiAgICAgICAgICAgICAgICAvLyAgICAgLnN0YXJ0KCk7Ly/lvIDlp4vovazmjaIKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21lZCgpIHsvL3N2Z+S4i+eahGfmoIfnrb7np7vliqjlpKflsI8KICAgICAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCJnIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICArZDMuZXZlbnQudHJhbnNsYXRlICsgIilzY2FsZSgiICtkMy5ldmVudC5zY2FsZSArICIpIik7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWFya2VyQXJyb3coaSkgewogICAgICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmQoImRlZnMiKS5hcHBlbmQoIm1hcmtlciIpICAgLy/nrq3lpLQKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoImlkIiwgImFycm93IitpKQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCJzdHJva2VXaWR0aCIpLy/orr7nva7kuLpzdHJva2VXaWR0aOeureWktOS8mumaj+edgOe6v+eahOeyl+e7huWPkeeUn+WPmOWMlgogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCAidXNlclNwYWNlT25Vc2UiKQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyV2lkdGgiLCAyMCkvL+agh+ivhueahOWkp+WwjwogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VySGVpZ2h0IiwgMjApCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ2aWV3Qm94IiwgIjAgLTQgMTIgMTUiKS8v5Z2Q5qCH57O755qE5Yy65Z+fCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJyZWZYIiwgMCkvL+eureWktOWdkOaghwogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigicmVmWSIsIDApCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJvcmllbnQiLCAnYXV0bycpLy/nu5jliLbmlrnlkJHvvIzlj6/orr7lrprkuLrvvJphdXRv77yI6Ieq5Yqo56Gu6K6k5pa55ZCR77yJ5ZKMIOinkuW6puWAvAogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCJzdmc6cGF0aCIpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLDUpLy/nrq3lpLTlrr3luqYKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCAiTTAsLTVMMTAsMEwwLDUiKS8v566t5aS055qE6Lev5b6ECiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ3JnYmEoMCwwLDAsIDAuNCknKTsvL+eureWktOminOiJsgogICAgICAgICAgICAgICAgICAgIHJldHVybiAidXJsKCNhcnJvd19lbmQiICsgaSArICIpIjsKICAgICAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldFN0cm9rZVdpZHRoKGQpIHsKICAgICAgICAgICAgICAgICAgICBlZGdlc19saW5lLnN0eWxlKCJzdHJva2Utd2lkdGgiLCBmdW5jdGlvbiAoZWRnZSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZWRnZS5yZWxhdGlvbi5yZWxhdGlvbnNoaXBJZCA9PT0gZC5yZWxhdGlvbi5yZWxhdGlvbnNoaXBJZCA/IDMgOiAxOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gNgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGRyYWcoKXsvL+aLluaLveWHveaVsAogICAgICAgICAgICAgICAgICAgIHJldHVybiBmb3JjZS5kcmFnKCkub24oImRyYWdzdGFydCIsZnVuY3Rpb24oZCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvL+WPlua2iOm7mOiupOS6i+S7tgogICAgICAgICAgICAgICAgICAgICAgICBkLmZpeGVkID0gdHJ1ZTsvL+aLluaLveW8gOWni+WQjuiuvuWumuiiq+aLluaLveWvueixoeS4uuWbuuWumgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGdldENpcmNsZUNvbG9yKG5vZGUpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgY29sb3IgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICdEZXZpY2UnOiAiI0ZGOUQwMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICdQb3NpdGlvbic6ICIjQzQ3N0U5IiwKICAgICAgICAgICAgICAgICAgICAgICAgJ1dvcmsnOiAnIzY3Q0FGNCcsCiAgICAgICAgICAgICAgICAgICAgICAgICdJbnN0YWxsJzogJyNCQ0RENzMnLAogICAgICAgICAgICAgICAgICAgICAgICAnQXBwbGljYXRpb24nOiAnI0REMUU5RScsCiAgICAgICAgICAgICAgICAgICAgICAgICdNYW51ZmFjdHVyZXInOiAnI0REQkE5RScsCiAgICAgICAgICAgICAgICAgICAgICAgICdJb3RJbmZyYXN0cnVjdHVyZSc6ICcjNmNhNWRkJywKICAgICAgICAgICAgICAgICAgICAgICAgJ0RldmljZUFkbWluJzogJyM1MEREODcnLAogICAgICAgICAgICAgICAgICAgIH07Ly/lnIblnIjog4zmma/oibIKICAgICAgICAgICAgICAgICAgICByZXR1cm4gY29sb3Jbbm9kZS5sYWJlbF0gfHwgJyNDNDc3RTknOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFwcGVuZENpcmNsZVRleHQoZCwgX3RoaXMpIHsKICAgICAgICAgICAgICAgICAgICBsZXQgY2lyY2xlVGV4dCA9ICcnOwogICAgICAgICAgICAgICAgICAgIGlmKGQudHlwZSA9PT0gJ25vZGUnICYmIGQucHJvcGVydGllcy5uYW1lKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLnByb3BlcnRpZXMubmFtZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZC5sYWJlbCA9PT0gJ1Bvc2l0aW9uJykgewogICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gZC5wb3NpdGlvbkNvZGU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmxhYmVsID09PSAnQXBwbGljYXRpb24nKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLmFwcGxpY2F0aW9uTmFtZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQubGFiZWwgPT09ICdNYW51ZmFjdHVyZXInKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLm1hbnVmYWN0dXJlck5hbWU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmxhYmVsID09PSAnSW90SW5mcmFzdHJ1Y3R1cmUnKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLmlvdEluZnJhc3RydWN0dXJlTmFtZTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGQubGFiZWwgPT09ICdEZXZpY2VBZG1pbicpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGQubmFtZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy/lpoLmnpzlsI/kuo7lm5vkuKrlrZfnrKbvvIzkuI3mjaLooYwKICAgICAgICAgICAgICAgICAgICBpZihjaXJjbGVUZXh0ICYmIGNpcmNsZVRleHQubGVuZ3RoID4gMTQpewogICAgICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gY2lyY2xlVGV4dC5zdWJzdHJpbmcoMCwxNCkgKyAiLi4uIjsKICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KF90aGlzKS50ZXh0KGZ1bmN0aW9uKCl7cmV0dXJuICcnO30pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoX3RoaXMpLmFwcGVuZCgndHNwYW4nKS5hdHRyKCd4JywwKS5hdHRyKCd5JywwKS5hdHRyKCJmb250LXNpemUiLCAxMCkKICAgICAgICAgICAgICAgICAgICAgICAgLnRleHQoZnVuY3Rpb24oKXsgcmV0dXJuIGNpcmNsZVRleHQ7IH0pOwogICAgICAgICAgICAgICAgfQoKCgoKCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdGljaygpIHsKCiAgICAgICAgICAgICAgICAgICAgY2lyY2xlLmF0dHIoInRyYW5zZm9ybSIsIHRyYW5zZm9ybTEpOy8v5ZyG5ZyICiAgICAgICAgICAgICAgICAgICAgdGV4dC5hdHRyKCJ0cmFuc2Zvcm0iLCB0cmFuc2Zvcm0yKTsvL+mhtueCueaWh+WtlwogICAgICAgICAgICAgICAgICAgIC8vbGlua+Wlh+aVsOaciemXrumimAogICAgICAgICAgICAgICAgICAgIGVkZ2VzX2xpbmUKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbiAoZCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldE5vZGVzTGluZShkLGVkZ2VzX2xpbmUsZGVmcyk7Ly/mm7Lnur/ot6/lvoQKCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgZWRnZXNfbGluZS5hdHRyKCdtYXJrZXItZW5kJywgZnVuY3Rpb24oZCxpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZC54X3N0YXJ0IDwgZC54X2VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAgInVybCgjZW5kKSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJycKICAgICAgICAgICAgICAgICAgICAgICAgfSkuYXR0cignbWFya2VyLXN0YXJ0JywgZnVuY3Rpb24oZCxpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLnhfc3RhcnQgPj0gZC54X2VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ1cmwoI3N0YXJ0KSI7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnCgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgOwoKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy/orr7nva7lnIblnIjlkozmloflrZfnmoTlnZDmoIcKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybTEoZCkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyBkLnggKyAiLCIgKyBkLnkgKyAiKSI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtMihkKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIChkLngpICsgIiwiICsgZC55ICsgIikiOwogICAgICAgICAgICAgICAgfQoKCgogICAgICAgICAgICAgICAgZnVuY3Rpb24gTWVudSAobWVudSwgb3BlbkNhbGxiYWNrKSB7CgogICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdEFsbCgnLmQzLWNvbnRleHQtbWVudScpLmRhdGEoWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdkaXYnKQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnZDMtY29udGV4dC1tZW51JykKCiAgICAgICAgICAgICAgICAgICAgLy8gY2xvc2UgbWVudQogICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnYm9keScpLm9uKCdjbGljay5kMy1jb250ZXh0LW1lbnUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmQzLWNvbnRleHQtbWVudScpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGVjdCwgZXZlbnQsIGRhdGEpPT4gewoKCgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZWxtID0gdGhpczsKCgogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5kMy1jb250ZXh0LW1lbnUnKS5odG1sKCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBkMy5zZWxlY3RBbGwoJy5kMy1jb250ZXh0LW1lbnUnKS5hcHBlbmQoJ3VsJyk7CgogICAgICAgICAgICAgICAgICAgICAgICBsaXN0LnNlbGVjdEFsbCgnbGknKS5kYXRhKG1lbnUpLmVudGVyKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGQudGl0bGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGQpIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQuYWN0aW9uKGRhdGEsIHNlbGVjdCk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmQzLWNvbnRleHQtbWVudScpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgb3BlbkNhbGxiYWNrIGFsbG93cyBhbiBhY3Rpb24gdG8gZmlyZSBiZWZvcmUgdGhlIG1lbnUgaXMgZGlzcGxheWVkCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFuIGV4YW1wbGUgdXNhZ2Ugd291bGQgYmUgY2xvc2luZyBhIHRvb2x0aXAKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5DYWxsYmFjaykgb3BlbkNhbGxiYWNrKGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gZGlzcGxheSBjb250ZXh0IG1lbnUKCiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmQzLWNvbnRleHQtbWVudScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZXZlbnQucGFnZVggLSAyKSArICdweCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ3RvcCcsIChldmVudC5wYWdlWSAtIDIpICsgJ3B4JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOwogICAgICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZmFsc2UKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgIH0sCi8vCiAgICAgICAgICAgIGRvdWJsZUNsaWNrKGluZm8sbm9kZXMsIGlucHV0KXsKCgogICAgICAgICAgICAgICAgbGV0IG5ld19ub2RlID0gewogICAgICAgICAgICAgICAgICAgICdpZCc6IG5vZGVzLmxlbmd0aCwKICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICJub2RlIiwKICAgICAgICAgICAgICAgICAgICAncHJvcGVydGllcyc6IHsnbmFtZSc6IGlucHV0fSwKICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOidDb25jZXB0JwogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBpbmZvLm5vZGVzLnB1c2gobmV3X25vZGUpOwogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaChpbmZvKTsKCgogICAgICAgICAgICB9LAoKICAgICAgICAgICAgc2luZ2xlQ2xpY2soaW5mbywgbm9kZSxpbnB1dCl7CiAgICAgICAgICAgICAgICAvLyBsZXQgdGVtcCA9IFtdOwoKICAgICAgICAgICAgICAgIC8vIGxldCBzb3VyY2UgPSBub2RlLmlkOwoKCiAgICAgICAgICAgICAgICBpZih0aGlzLnRlbXAubGVuZ3RoID09PTIgJiYgdGhpcy50ZW1wWzBdICE9PSB0aGlzLnRlbXBbMV0gKQogICAgICAgICAgICAgICAgewoKCiAgICAgICAgICAgICAgICAgICAgbGV0IG5ld19saW5rID0gewogICAgICAgICAgICAgICAgICAgICAgICAic291cmNlIjogdGhpcy50ZW1wWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAidGFyZ2V0IjogdGhpcy50ZW1wWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6ICdsaW5rJywKICAgICAgICAgICAgICAgICAgICAgICAgInByb3BlcnRpZXMiOiB7fSwKICAgICAgICAgICAgICAgICAgICAgICAgImxhYmVsIjogaW5wdXQKCiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgaW5mby5saW5rcy5wdXNoKG5ld19saW5rKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbmV3IGxpbmsgYWRkZWQnLCBpbmZvLmxpbmtzKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXAubGVuZ3RoID0gMDsKICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKGluZm8pCgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnRlbXAubGVuZ3RoID09PTIgJiYgdGhpcy50ZW1wWzBdID09PSB0aGlzLnRlbXBbMV0gKQogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICh0aGlzLnRlbXAubGVuZ3RoID09PTApewogICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgoaW5mbykKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY3VycmVudCBzZWxlY3Qgbm9kZSBpZCcsdGhpcy50ZW1wKQoKCiAgICAgICAgICAgIH0sCgoKICAgICAgICAgICAgc3VibWl0RGF0YSgpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWJtaXQgZGF0YScsIHRoaXMuaW5mbyk7CiAgICAgICAgICAgICAgICB0aGlzLnVwbG9hZF9ub2RlcyA9IHRoaXMuaW5mby5ub2Rlcy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAiaWQiOiBTdHJpbmcoZWxlbWVudC5pZCksICJ0eXBlIjogZWxlbWVudC50eXBlLCAibGFiZWwiOiBlbGVtZW50LmxhYmVsLCAicHJvcGVydGllcyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogZWxlbWVudC5wcm9wZXJ0aWVzLm5hbWUKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMudXBsb2FkX2xpbmtzID0gdGhpcy5pbmZvLmxpbmtzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAidHlwZSI6IGVsZW1lbnQudHlwZSwgImlkIjogU3RyaW5nKGVsZW1lbnQuaWQpLCAibGFiZWwiOiBlbGVtZW50LmxhYmVsLAogICAgICAgICAgICAgICAgICAgICAgICAic291cmNlIjogU3RyaW5nKGVsZW1lbnQuc291cmNlLmlkKSwgInRhcmdldCI6IFN0cmluZyhlbGVtZW50LnRhcmdldC5pZCksCiAgICAgICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjogZWxlbWVudC5wcm9wZXJ0aWVzCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25uJywgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRfbm9kZXMpKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdubicsIEpTT04uc3RyaW5naWZ5KHRoaXMudXBsb2FkX2xpbmtzKSk7CiAgICAgICAgICAgICAgICBsZXQgZmxhZyA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5mby5ub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmluZm8ubm9kZXNbaV0ud2VpZ2h0ID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKGZsYWcgPT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICd0eXBlJzogJ3dhcm5pbmcnLAogICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6ICdUaGUgbm9kZSBzaG91bGQgaGF2ZSBhIGxlYXN0IG9uZSBsaW5rLCBwbGVhc2UgY2hlY2sgaXQuJwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlewoKICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbjsnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICB1cmw6ICcvcG9zdFVzZXJHcmFwaCcsCiAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgICAgICB1c2VyOiB0aGlzLmN1cnJlbnRfdXNlciwKICAgICAgICAgICAgICAgICAgICAgICAgbm9kZXM6IHRoaXMudXBsb2FkX25vZGVzLAogICAgICAgICAgICAgICAgICAgICAgICAvLyBub2RlczpbCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgInR5cGUiOiAibm9kZSIsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgImlkIjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICJsYWJlbCI6ICJDb25jZXB0IiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAicHJvcGVydGllcyI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgIm5hbWUiOiAiSW5ub3ZhdGlvbiIKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICJ0eXBlIjogIm5vZGUiLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICJpZCI6ICIxIiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAibGFiZWwiOiAiQ29uY2VwdCIsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgInByb3BlcnRpZXMiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgICJuYW1lIjogIkdsb2JhbGl6YXRpb24iCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfV0sCiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmtzOiB0aGlzLnVwbG9hZF9saW5rcwogICAgICAgICAgICAgICAgICAgICAgICAvLyBsaW5rczogIFsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAidHlwZSI6ICJsaW5rIiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAiaWQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgImxhYmVsIjogImJlbmVmaXRzIiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAic291cmNlIjogIjAiLAogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICJ0YXJnZXQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgInByb3BlcnRpZXMiOiB7fQogICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAvLyBdCiAgICAgICAgICAgICAgICAgICAgfQoKCiAgICAgICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycsIHJlc3BvbnNlKQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAndHlwZSc6J3N1Y2Nlc3MnLAogICAgICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6J1N1Ym1pdCBTdWNjZXNzZnVsbHkhJwogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCgogICAgICAgICAgICByZWxvYWQoKXsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKQogICAgICAgICAgICB9LAoKCgoKCgoKCgoKCgogICAgICAgIH0KCgogICAgfQo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8VA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;;;;AAKA;AACA;;;;AAIA;AACA;;AAEA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AAaA;;;AAGA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n\n\n\n\n\n    <div id=\"app\">\n        <el-row>\n            <el-header style=\"text-align: right;height: 40px;\">\n                <div class=\"grid-content \">\n                    <template >\n                        <el-button style=\"margin-right: 5px;\"  @click=\"onTapLogin\" v-show=\"showLogin\" size=\"small\" round>Login</el-button>\n                        <el-button style=\"margin-right: 5px;\" size=\"small\" type=\"success\" v-show=\"!showLogin\" round>{{username}}</el-button>\n                        <el-button  @click=\"logout\" size=\"small\" v-show=\"!showLogin\" round>Logout</el-button>\n                    </template>\n                </div>\n            </el-header>\n\n            <el-dialog\n                    title=\"Login\"\n                    :visible.sync=\"centerDialogVisible\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"username\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"password\" placeholder=\"Please Input Password\"></el-input></span>\n                <el-button type=\"text\" style=\"margin-top: 15px;\" @click.native=\"dialog_createUser=true; centerDialogVisible=false\">No account?</el-button>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"centerDialogVisible=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click.native=\"handleShow\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n            <el-dialog\n                    title=\"Create New Account\"\n                    :visible.sync=\"dialog_createUser\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"newUsername\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"newPassword\" onkeyup=\"value=value.replace(/[^A-Za-z0-9_]/g,'');\" placeholder=\"Please Input Password\"></el-input></span>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"dialog_createUser=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click=\"createUser\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n\n\n\n        </el-row>\n\n        <el-container>\n\n            <el-row class=\"tac\">\n                <el-col >\n                    <h5>SustainKG</h5>\n                    <el-menu\n\n                            default-active=\"2\"\n                            class=\"el-menu-vertical-demo\"\n\n                    >\n                        <el-submenu index=\"1\">\n                            <template slot=\"title\">\n                                <i class=\"el-icon-location\"></i>\n                                <span>Operation</span>\n                            </template>\n                            <el-menu-item-group>\n                                <!--<template slot=\"title\">分组一</template>-->\n                                <el-menu-item index=\"1-1\" @click=\"submitData()\">Submit Data</el-menu-item>\n                                <el-menu-item index=\"1-2\" @click=\"getWikipedia()\">get Articles</el-menu-item>\n                                <el-menu-item index=\"1-3\" @click=\"reload()\">Reload Data</el-menu-item>\n                                <el-menu-item index=\"1-4\" :disabled='disable_initGraph' @click=\"showInitGraph()\">Init Graph</el-menu-item>\n\n                            </el-menu-item-group>\n\n\n                        </el-submenu>\n                        <el-menu-item >\n                            <i class=\"el-icon-menu\"></i>\n                            <span slot=\"title\">Node Number：{{ info.nodes.length }}</span>\n                        </el-menu-item>\n                        <el-menu-item >\n                            <i class=\"el-icon-setting\"></i>\n                            <span slot=\"title\">Link Number：{{ info.links.length }}</span>\n                        </el-menu-item>\n                    </el-menu>\n                </el-col>\n\n\n                <router-view></router-view>\n\n            </el-row>\n\n            <el-dialog :visible.sync=\"dialogFormVisible_initGraph\"\n                       title=\"Create Start Node\" center\n\n            >\n\n                Node Name\n                <el-select ref=\"init\"\n\n                        @keyup.native = \"showOption_init_nodes\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"init_node_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_init_nodes\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_init_nodes\">\n                        <el-option\n\n                                v-for=\"(item,index) in node_list\"\n                                :key=\"index\"\n                                :label=\"item.label\"\n                                :value=\"item.value\" ></el-option>\n                    </div>\n\n                </el-select>\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"InitGraph\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible\"\n                       title=\"Create Node\" center\n            >\n\n                Node Name\n                <el-select\n                        ref=\"addNode\"\n                        @keyup.native = \"showOption_add_nodes\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"node_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_add_nodes\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_add_nodes\">\n                    <el-option\n                            class=\"bar\"\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                    </div>\n                </el-select>\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"addNodes\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_node_name\"\n                       title=\"Change Node Name\" center\n            >\n\n                    Node Name\n                <el-select\n                        ref=\"changeNodeName\"\n                        @keyup.native = \"showOption_change_nodes\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_node_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_change_nodes\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_change_nodes\">\n                    <el-option\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_node_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_link\"\n                       :show-close=\"false\"\n                       title=\"Create Link\" center>\n\n                Link Name\n\n                <el-select\n                        ref=\"addLink\"\n                        @keyup.native = \"showOption_add_link\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"link_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_add_link\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_add_link\">\n                    <el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n\n                </el-select>\n\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\"  @click=\"addLinks\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_link_name\"\n                       title=\"Change Link Name\" center>\n\n                Link Name\n                <el-select\n                        ref=\"changeLinkName\"\n                        @keyup.native = \"showOption_change_link\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_link_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_change_link\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_change_link\">\n                    <el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_link_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n            <div id=\"node_info\" v-show=\"showdetail_node\" >\n                <el-card\n                        :style=\"{ backgroundColor: 'rgb(253, 216, 186)' }\"\n                        class=\"node-card\"\n                >\n                    <h2 :style=\"{ color: '#ca635f' }\">Node Detail</h2>\n                    <div>\n\n                        <h4 :style=\"{ color: '#aaaaff' }\">ID: {{ detailValue.id }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Name: {{ detailname }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Type: {{ detailValue.type }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Label: {{ detailValue.label }}</h4>\n                    </div>\n                </el-card>\n            </div>\n\n            <div id=\"link_info\" v-show=\"showdetail_link\" >\n                <el-card\n                        :style=\"{ backgroundColor: 'rgb(253, 216, 186)' }\"\n                        class=\"link-card\"\n                >\n                    <h2 :style=\"{ color: '#ca635f' }\">Link Detail</h2>\n                    <div>\n\n                        <h4 :style=\"{ color: '#aaaaff' }\">ID: {{ detailValue.id }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Name: {{ detailname }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Type: {{ detailValue.type }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Label: {{ detailValue.label }}</h4>\n                    </div>\n                </el-card>\n            </div>\n\n\n\n            <el-main id=\"graph\">\n                <!--<div id=\"graph\"></div>-->\n            </el-main>\n\n\n\n\n        </el-container>\n\n\n\n\n    </div>\n\n</template>\n\n<script>\n    import * as d3 from \"d3\";\n    // import Seven from 'node-7z'\n    import sevenBin from '7zip-bin'\n    import { list } from 'node-7z'\n\n    import $ from 'jquery'\n    import {\n        getNodeSelfPath,\n        setLinkGroup,\n        getNodesLine,} from './utils/deviceRelation'\n\n\n\n\n    export default {\n\n\n        data(){\n\n\n\n            let info = {\n                \"links\": [\n                    {\n                        \"source\" : 0,\n                        \"target\" : 1,\n                        \"type\" : \"link\",\n                        'label': 'Link TEST',\n                        \"properties\":{}\n\n                    },\n\n                ],\n                \"nodes\": [\n                    {\n                        \"id\": 0,\n                        \"type\" : \"node\",\n                        \"label\" : \"Device\",\n                        \"properties\":{\"name\":\"hello\"}\n                    },\n                    {\n                        \"id\": 1,\n                        \"type\" : \"node\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"will\"}\n                    },\n                    {\n                        \"id\": 2,\n                        \"type\" : \"node\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"lala\"}\n                    },\n\n                ]\n            };\n\n\n\n            return {\n\n                //////////////////////////////////////\n\n                // log function parameters\n                current_user:'',\n                username:'',\n                password:'',\n                newUsername:'',\n                newPassword:'',\n                showLogin:true,\n                centerDialogVisible:false,\n                dialog_createUser:false,\n\n                optionVisible_init_nodes:false,\n                optionVisible_add_nodes:false,\n                optionVisible_change_nodes:false,\n                optionVisible_add_link:false,\n                optionVisible_change_link:false,\n\n\n                upload_nodes:'',\n                upload_links:'',\n                disable_initGraph:true,\n                dialogFormVisible_initGraph:false,\n\n                //////////////////////////////////////\n                showdetail_node:false, // show the info in the right corner\n                showdetail_link:false,\n\n                detailValue:'',\n                detailname:'',\n                node_value: '',\n                link_value:'',\n                init_node_value:'',\n                btnChangeEnable: true,\n                node_list: [\n                    {\n                        value: 'node1',\n                        label: 'node1'\n                    },\n\n                    {\n                        value: 'node2',\n                        label: 'node2'\n                    },\n\n                    {\n                        value: 'test3',\n                        label: 'test3'\n                    },\n                    {\n                        value: 'bbb',\n                        label: 'bbb'\n                    }\n                ],\n\n                link_list: [\n                    {\n                        value: 'link1',\n                        label: 'link1'\n                    },\n                    {\n                        value: 'link2',\n                        label: 'link2'\n                    },\n                    {\n                        value: 'test_3',\n                        label: 'test_3'\n                    }\n                ],\n\n                info: {\n                    nodes:[],\n                    links:[]\n                },\n\n                // info: info,\n\n                ifClicked:false,\n\n                selected_Node: '',\n\n                dialogFormVisible:false,\n                dialogFormVisible_link:false,\n                dialogFormVisible_change_node_name:false,\n                dialogFormVisible_change_link_name:false,\n                temp : [],\n                clickTimeId : 0,\n\n                node_id: '',\n                link_id: '',\n                new_link_name:'',\n                new_node_name:'',\n\n                menu: [\n                    {\n                        title: 'Delete Nodes',\n                        action: (node,select_node) => {\n\n                            this.$confirm(\"Delete this node?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The node is deleted!'\n                                    });\n                                console.log('test !!!',select_node,node);\n                                this.info.nodes.splice(node,1);\n                                for(let i =this.info.links.length-1; i>=0; i-- )\n                                {\n                                    console.log('link index',i,node);\n                                    if(this.info.links[i].source === select_node\n                                        || this.info.links[i].target === select_node)\n                                    {\n                                        this.info.links.splice(i,1);\n                                    }\n\n                                }\n\n                                console.log('after delete', this.info)\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n\n                    },\n                    {\n                        title: 'Change Node Name',\n                        action:(node_id)=>{\n                            this.dialogFormVisible_change_node_name = true;\n                            this.node_id = node_id;\n\n                        },\n\n                    },\n\n                ],\n\n                menu_edge:[\n                    {\n                        title: 'Delete Links',\n                        action: (link,selected_link) => {\n                            console.log('ll',link,selected_link);\n                            this.$confirm(\"Delete this link?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The link is deleted!'\n                                    });\n                                this.info.links.splice(link,1);\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n                    },\n                    {\n                        title: 'Change link Name',\n                        action:(link_id)=>\n                        {\n                            this.dialogFormVisible_change_link_name = true;\n                            this.link_id = link_id;\n\n                        }\n\n                    }\n                ],\n\n\n\n            }\n        },\n\n        mounted() {\n\n            this.renderGraph(this.info);\n\n        },\n\n        methods: {\n            ////////////////////////////////////////////////////////////\n            // login functions\n\n\n            createUser:function(){\n\n                this.dialog_createUser  = false;\n                console.log('create user function',this.newUsername, this.newPassword)\n\n                this.$axios({\n                    url : '/createNewUser',\n                    method : 'post',\n                    data :\n                        {\n                            \"user\" : this.newUsername,\n                            \"password\" : this.newPassword\n                        }\n                }).then(response=>{\n                    this.username = this.newUsername;\n                    this.password = this.newPassword;\n                    this.newPassword = '';\n                    this.newUsername = '';\n                    console.log(response);\n                    if(response.status === 204)\n                    {\n\n                        this.$message(\n\n                            {\n                                type: 'warning',\n                                message: 'The username is existed !'\n                            });\n                        this.showLogin = true;\n                        this.dialog_createUser  = true;\n                        this.username = '';\n                        this.password = '';\n                    }\n                    else {\n\n                        this.$axios({\n                            url: '/getUserGraph',\n                            method: 'post',\n                            data:\n                                {\n                                    user: this.username,\n                                    password: this.password\n\n                                }\n                        }).then(response => {\n\n                            this.showLogin = false; // control the login status\n                            let user_nodes = response.data.nodes;\n                            let user_links = response.data.links;\n                            let change_node_type = user_nodes.map(function (element) {\n                                element.id = Number(element.id);\n                                return element\n                            });\n                            let change_link_type = user_links.map(function (element) {\n                                element.id = Number(element.id);\n                                element.source = Number(element.source);\n                                element.target = Number(element.target);\n                                return element\n                            });\n\n                            this.info.nodes = change_node_type;\n                            this.info.links = change_link_type;\n                            this.current_user = response.data.user;\n\n                            this.renderGraph(this.info)\n\n\n                        })\n                    }\n                })\n\n            },\n\n            getWikipedia:function(){\n\n\n\n\n\n                // this.$axios({\n                //\n                //     method : 'get',\n                //     url : '/getAllWikipediaArticles',\n                //     data: {}\n                // }).then(response=>{\n                //     console.log(response)\n                // })\n            },\n\n\n            handleShow:function(){\n\n                    this.centerDialogVisible=false;\n                    this.$axios({\n                        url:'/getUserGraph',\n                        method:'post',\n                        data:{\n                            // user : \"some_user\",\n                            // password: \"my_password\"\n                            user : this.username,\n                            password: this.password\n                        }\n\n                    }).then(response=>{\n                            this.showLogin=false;\n                            let user_nodes = response.data.nodes;\n                            let user_links = response.data.links;\n                            // let test = response.data;\n\n                            let change_node_type = user_nodes.map(function (element) {\n                                element.id = Number(element.id);\n                                return element\n                            });\n\n                            let change_link_type = user_links.map(function (element) {\n                                element.id = Number(element.id);\n                                element.source = Number(element.source);\n                                element.target = Number(element.target);\n                                return element\n                            });\n\n\n                            this.info.nodes = change_node_type;\n                            this.info.links = change_link_type;\n                            this.current_user = response.data.user;\n                            this.renderGraph(this.info)\n\n                    }).catch(error=>{\n                        this.showLogin = true;\n                        this.username = '';\n                        this.password = '';\n                    })\n\n\n            },\n\n            onTapLogin:function () {\n                this.centerDialogVisible=true\n            },\n\n            logout:function () {\n                this.showLogin = true;\n                this.username = '';\n                this.password = '';\n                this.info= {\n                    nodes:[],\n                        links:[]\n                };\n                this.renderGraph(this.info)\n            },\n\n            ////////////////////////////////////////////////////////////\n            // optionVisible_init_nodes:false,\n            // optionVisible_add_nodes:false,\n            // optionVisible_change_nodes:false,\n            // optionVisible_add_link:false,\n            // optionVisible_change_link:false,\n\n            showOption_add_nodes()\n            {\n\n\n                let inputContent = this.$refs.addNode.$children[0].value;\n                this.optionVisible_add_nodes = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n            showOption_init_nodes()\n            {\n                let inputContent = this.$refs.init.$children[0].value;\n\n                this.optionVisible_init_nodes = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n            showOption_change_nodes()\n            {\n                let inputContent = this.$refs.changeNodeName.$children[0].value;\n                this.optionVisible_change_nodes = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n\n            showOption_add_link()\n            {\n                let inputContent = this.$refs.addLink.$children[0].value;\n\n                this.optionVisible_add_link = inputContent.length >=2;\n                this.$forceUpdate()\n            },\n\n            showOption_change_link()\n            {\n\n                let inputContent = this.$refs.changeLinkName.$children[0].value;\n                this.optionVisible_change_link = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n\n            selectBlur(e) {\n                // 意见类型\n                this.btnChangeEnable = true;\n                if (e.target.value !== '') {\n                    // this.$forceUpdate()   // 强制更新\n                }\n                this.$forceUpdate()\n                this.selectClear()\n            },\n\n            selectClear() {\n                this.node_value = '';\n                this.link_value = '';\n                this.new_node_name = '';\n                this.new_link_name = '';\n\n                this.optionVisible_init_nodes=false;\n                this.optionVisible_add_nodes=false;\n                this.optionVisible_change_nodes=false;\n                this.optionVisible_add_link=false;\n                this.optionVisible_change_link=false;\n\n\n\n                // let elements = document.getElementsByClassName('el-input__inner');\n                // elements[0].parentNode.removeChild(elements[0]);\n                // while(elements.length > 0){\n                //     elements[0].parentNode.removeChild(elements[0]);\n                // }\n\n                this.$forceUpdate()\n            },\n\n            selectChange(val) {\n\n                if(val !== '')\n                {\n                    this.btnChangeEnable = false\n                }\n                if(this.dialogFormVisible_link===true){\n                    this.link_value = val\n                }\n                else if (this.dialogFormVisible_change_link_name === true){\n                    this.new_link_name = val\n                }\n                else if (this.dialogFormVisible_change_node_name === true){\n                    this.new_node_name = val\n                }\n                else if(this.dialogFormVisible === true){\n                    this.node_value = val;\n                }\n                else if(this.dialogFormVisible_initGraph === true){\n                    this.init_node_value = val;\n                }\n                this.$forceUpdate()\n            },\n\n\n            cancel()\n            {\n                this.dialogFormVisible = false;\n                this.dialogFormVisible_link = false;\n                this.dialogFormVisible_change_node_name = false;\n                this.dialogFormVisible_change_link_name = false;\n\n                this.temp.length = 0;\n                this.newPassword = '';\n                this.newUsername = '';\n                this.btnChangeEnable = true;\n                this.dialogFormVisible_initGraph = false;\n\n                this.selectClear();\n\n            },\n            showInitGraph:function(){\n                this.dialogFormVisible_initGraph = true;\n            },\n            InitGraph:function()\n            {\n                console.log(this.info);\n                console.log(document.getElementById('init'));\n\n                console.log('add a start node');\n                let init_node= {\n                    \"id\": 0,\n                    \"type\" : \"node\",\n                    \"label\" : \"Device\",\n                    \"properties\":{\"name\":this.init_node_value}\n                };\n\n                this.dialogFormVisible_initGraph  = false;\n\n\n                this.info.nodes.push(init_node);\n\n\n                this.renderGraph(this.info);\n                this.selectClear();\n            },\n\n\n            addNodes(){\n\n                this.dialogFormVisible = false;\n                this.doubleClick(this.info, this.info.nodes, this.node_value);\n\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n                this.btnChangeEnable = true;\n                this.selectClear();\n\n\n            },\n\n            change_node_name(){\n\n                this.info.nodes[this.node_id].properties.name = this.new_node_name;\n                this.dialogFormVisible_change_node_name = false;\n\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n                this.btnChangeEnable = true;\n\n\n                this.renderGraph(this.info);\n                this.selectClear();\n\n            },\n\n\n            change_link_name()\n            {\n\n                this.info.links[this.link_id].label = this.new_link_name;\n                this.dialogFormVisible_change_link_name = false;\n\n                this.btnChangeEnable = true;\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n\n\n\n\n                this.renderGraph(this.info)\n                this.selectClear();\n            },\n\n            addLinks()\n            {\n                console.log('add link',this.optionVisible,this.optionVisible_link);\n\n                this.dialogFormVisible_link = false;\n\n                if (this.temp.length === 2) {\n                    this.singleClick(this.info, this.selected_Node, this.link_value);\n                }\n\n                this.$message(\n\n                    {\n                        type: 'success',\n                        message: 'Add Links!'\n                    });\n                this.btnChangeEnable = true;\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n\n\n                this.selectClear()\n\n            },\n\n\n            renderGraph(info) {\n                // let temp = [];\n\n\n                console.log('render data',info);\n                if(this.showLogin === false && this.info.nodes.length === 0 )\n                {\n                    this.disable_initGraph = false;\n                }\n                else{\n                    this.disable_initGraph = true;\n                }\n                // this.disable_initGraph = this.info.nodes.length !== 0;\n\n                let {links, nodes} = info;\n\n                //关系分组\n                setLinkGroup(links);\n\n\n                d3.select(\"#graph\").html('');\n\n\n                let force = d3.layout.force()//layout将json格式转化为力学图可用的格式\n                    .nodes(nodes)//设定节点数组\n                    .links(links)//设定连线数组\n                    .linkDistance(500)//连接线长度\n                    .charge(-1500)//顶点的电荷数。该参数决定是排斥还是吸引，数值越小越互相排斥\n                    .on(\"tick\", function (){\n                            tick()\n                        },\n                    )//指时间间隔，隔一段时间刷新一次画面\n                    .start();//开始转换\n\n\n\n                let zoom = d3.behavior.zoom()\n                    .scaleExtent([.4, 2])\n                    .on(\"zoom\", zoomed);\n\n                let svg = d3.select(\"#graph\").append(\"svg\")\n                    .attr(\"pointer-event\", \"all\")\n                    .attr(\"preserveAspectRatio\", \"xMidYMid meet\")//自适应容器大小\n                    .attr(\"viewBox\", \"-460 -220 1200 1200\")\n                    // .on(\"dblclick\", doubleClick)\n                    .call(zoom);\n\n\n\n\n                // old_nodes = nodes;\n                let circle_g = svg.selectAll(\"circle\")\n                    .data(force.nodes())//表示使用force.nodes数据\n                    .enter()\n                    .append(\"g\")\n                    .attr(\"class\",function(node,i){\n                        return \"g_circle_\" + i; })//标记circle的父节点\n                    .style(\"cursor\",\"pointer\")\n                    .call(drag()) //将当前选中的元素传到drag函数中，使顶点可以被拖动\n                    .on(\"click\", (node, i,) => {\n                        if (d3.event.defaultPrevented) return;\n\n\n                        clearTimeout(this.clickTimeId);\n\n                        this.clickTimeId = setTimeout( ()=> {\n\n\n                                this.temp.push(node.index);\n                                console.log('liuliu',this.temp);\n                                if(this.temp.length === 2 && this.temp[0] !== this.temp[1]){\n                                    this.dialogFormVisible_link = true;\n\n                                }\n                                else if(this.temp.length === 2 && this.temp[0] === this.temp[1])\n                                {\n                                    this.temp.length = 0\n                                }\n                                // this.singleClick(info, node, temp, this.state2);\n                                clickStyle(node, i, this);\n                            }\n                            , 250);\n                    })\n\n                    .on('mouseover', (node) => {\n                        if (d3.event.defaultPrevented) return;\n                        this.showdetail_node = true;\n                        console.log(node);\n                        this.detailValue = node\n                        this.detailname = node.properties.name\n                        // showNodeInfo(node, this);\n                        // showCircleBorderOuterArc(node, i);\n                    })\n                    .on('mouseout',(node)=>{\n                        this.showdetail_node = false;\n                    })\n                    .on(\"dblclick\", (node, )=>{\n\n\n                        if (d3.event.defaultPrevented) return;\n                        clearTimeout(this.clickTimeId);\n                        this.dialogFormVisible = true;\n                        console.log(document.getElementsByClassName('el-input__inner'))\n                        // this.doubleClick(info, node, nodes, links)\n\n\n                    })\n                    .on('contextmenu',(d,node)=>{\n                        Menu(this.menu)(d, d3.event, node)\n\n                    });\n\n\n\n\n                svg.on(\"dblclick.zoom\", null);//取消svg和圆圈的双击放大事件（d3中默认开启7个事件，关闭防止与上面的双击事件冲突）\n                circle_g.on(\"dblclick.zoom\", null);\n\n\n\n                //单击改变节点颜色 表明选中\n                function clickStyle(node, i, _this){\n\n                    console.log(_this.ifClicked);\n                    // _this.ifClicked = true;\n\n\n                    circle_g.attr('node', function(n) {\n\n\n\n                        if(n.index === node.index && _this.ifClicked===false ) {\n                            d3.select('.g_circle_'+ n.index).select('circle').style('fill','red');\n                            console.log('haha',d3.select('.g_circle_'+ n.index).select('circle'));\n                            _this.ifClicked = true;\n                            console.log('新选的 true',_this.ifClicked);\n\n                        }\n                        else if(n.index === node.index && _this.ifClicked===true )\n                        {\n                            d3.select('.g_circle_'+ n.index).select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);});\n                            _this.ifClicked = false;\n                            console.log('重复选的颜色变回去 false',_this.ifClicked);\n\n                        }\n                        else if(n.index !== node.index) {\n                            console.log('node are different');\n                            d3.select('.g_circle_'+ n.index)\n                                .select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);})\n\n                        }\n                    });\n                }\n\n\n\n\n                //圆圈\n                let circle = circle_g.append(\"circle\")\n                    .style(\"stroke-width\", \"2px\")\n                    .attr(\"r\", 30)//设置圆圈半径\n                    .style(\"fill\", function (node) { return getCircleColor(node); });\n\n                let text = circle_g.append(\"text\")\n                    .attr(\"dy\", \".35em\")\n                    .attr(\"text-anchor\", \"middle\")//在圆圈中加上数据\n                    .style('fill', \"#FFFFFF\")\n                    .attr('x',function(d){ appendCircleText(d, this); });\n\n                //圆圈的提示文字\n                circle.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                text.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                //设置连接线\n                let defs = svg.append(\"defs\");\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"end\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"start\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,0L10,-5L10,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 2)');//箭头颜色\n\n                const edges_line = svg.append(\"g\").selectAll(\".edgepath\")\n                    .data(force.links())\n                    .enter()\n                    .append(\"path\")\n\n                    // .attr('marker-end', function(d,i) {\n                    //     console.log('lala',d.label,d.x_start)\n                    //     if (d.x_start < d.x_end) {\n                    //         console.log('source < end')\n                    //         return  \"url(#end)\";\n                    //     }\n                    //     return ''\n                    // })\n                    // .attr('marker-start', function(d,i) {\n                    //     if (d.x_start >= d.x_end) {\n                    //         console.log('source > end')\n                    //         return \"url(#start)\";\n                    //     }\n                    //     return ''\n                    //\n                    // })\n                    // .attr(\"marker-start\", \"url(#start)\")\n                    // .attr(\"marker-end\",  function (d, i) { return getMarkerArrow(i); })//根据箭头标记的id号标记箭头\n                    // .attr(\"marker-end\",  )//根据箭头标记的id号标记箭头\n                    .style(\"stroke\", 'black')\n                    .style(\"stroke-width\", 3)//线条粗细\n                    .style(\"fill-opacity\",0)\n                    .style(\"cursor\",\"pointer\")\n                    .attr(\"id\", function (d, i) { return 'edgepath' + i; })\n                    .on(\"mouseover\", function(d){ return getStrokeWidth(d); })\n                    .on(\"mouseout\", function() { edges_line.style(\"stroke-width\", 3) })\n                    // .on('click', (link) => { this.deleteLine(this.info,link); })\n                    .on('contextmenu',(d,link)=>{\n\n                        Menu(this.menu_edge)(d,d3.event,link)\n\n                    });\n\n                const edges_text = svg.append(\"g\").selectAll(\".edgetext\")\n                    .data(links)\n                    .enter()\n                    .append(\"text\")\n                    .style(\"pointer-events\", \"none\")\n                    .attr(\"class\",\"linetext\")\n                    .attr('text-anchor', \"middle\")\n                    .attr(\"fill-opacity\", 0.5)\n                    .style(\"cursor\",\"pointer\")\n\n                    .attr({'class': 'edgelabel',\n                        'id': function (d, i) { return 'edgepath' + i; },\n                        'dx': 190, 'dy': 20,\n                        'fill':'black',\n                        // 'transform': edge_text_Position()\n                    });\n\n\n\n                function edge_text_Position(){\n\n                    return 'rotate(180,40,5)'\n                }\n\n\n\n                //设置线条上的文字\n                edges_text.append('textPath')\n                    .attr('xlink:href', function (d, i) { return '#edgepath' + i })\n                    .attr(\"pointer-events\", \"none\")\n                    .attr(\"font-size\", 20)\n                    .text(function (d) { return d.label; });\n\n\n\n                // force.on(\"tick\", tick)//指时间间隔，隔一段时间刷新一次画面\n                //     .start();//开始转换\n                function zoomed() {//svg下的g标签移动大小\n                    svg.selectAll(\"g\").attr(\"transform\", \"translate(\"  +d3.event.translate + \")scale(\" +d3.event.scale + \")\");\n                }\n\n                function getMarkerArrow(i) {\n                    svg.append(\"defs\").append(\"marker\")   //箭头\n                        .attr(\"id\", \"arrow\"+i)\n                        .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                        .attr(\"markerUnits\", \"userSpaceOnUse\")\n                        .attr(\"markerWidth\", 20)//标识的大小\n                        .attr(\"markerHeight\", 20)\n                        .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                        .attr(\"refX\", 0)//箭头坐标\n                        .attr(\"refY\", 0)\n                        .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                        .append(\"svg:path\")\n                        .attr(\"stroke-width\",5)//箭头宽度\n                        .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                        .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n                    return \"url(#arrow_end\" + i + \")\";\n                }\n\n\n\n                function getStrokeWidth(d) {\n                    edges_line.style(\"stroke-width\", function (edge) {\n                        // return edge.relation.relationshipId === d.relation.relationshipId ? 3 : 1;\n                        return 6\n                    });\n                }\n\n                function drag(){//拖拽函数\n                    return force.drag().on(\"dragstart\",function(d){\n                        d3.event.sourceEvent.stopPropagation(); //取消默认事件\n                        d.fixed = true;//拖拽开始后设定被拖拽对象为固定\n                    });\n                }\n\n                function getCircleColor(node) {\n                    let color = {\n                        'Device': \"#FF9D00\",\n                        'Position': \"#C477E9\",\n                        'Work': '#67CAF4',\n                        'Install': '#BCDD73',\n                        'Application': '#DD1E9E',\n                        'Manufacturer': '#DDBA9E',\n                        'IotInfrastructure': '#6ca5dd',\n                        'DeviceAdmin': '#50DD87',\n                    };//圆圈背景色\n                    return color[node.label] || '#C477E9';\n                }\n\n                function appendCircleText(d, _this) {\n                    let circleText = '';\n                    if(d.type === 'node' && d.properties.name) {\n                        circleText = d.properties.name;\n                    } else if(d.label === 'Position') {\n                        circleText = d.positionCode;\n                    } else if (d.label === 'Application') {\n                        circleText = d.applicationName;\n                    } else if (d.label === 'Manufacturer') {\n                        circleText = d.manufacturerName;\n                    } else if (d.label === 'IotInfrastructure') {\n                        circleText = d.iotInfrastructureName;\n                    } else if (d.label === 'DeviceAdmin') {\n                        circleText = d.name;\n                    }\n                    //如果小于四个字符，不换行\n                    if(circleText && circleText.length > 14){\n                        circleText = circleText.substring(0,14) + \"...\";\n                        d3.select(_this).text(function(){return '';});\n                    }\n                    d3.select(_this).append('tspan').attr('x',0).attr('y',0).attr(\"font-size\", 10)\n                        .text(function(){ return circleText; });\n                }\n\n\n\n\n\n\n                function tick() {\n\n                    circle.attr(\"transform\", transform1);//圆圈\n                    text.attr(\"transform\", transform2);//顶点文字\n                    //link奇数有问题\n                    edges_line\n                        .attr('d', function (d) {\n\n                        return getNodesLine(d,edges_line,defs);//曲线路径\n\n                    });\n                    edges_line.attr('marker-end', function(d,i) {\n                            if (d.x_start < d.x_end) {\n                                return  \"url(#end)\";\n                            }\n                            return ''\n                        }).attr('marker-start', function(d,i) {\n                        if (d.x_start >= d.x_end) {\n                            return \"url(#start)\";\n                        }\n                        return ''\n\n                    })\n                    ;\n\n\n                }\n\n                //设置圆圈和文字的坐标\n                function transform1(d) {\n                    return \"translate(\" + d.x + \",\" + d.y + \")\";\n                }\n\n                function transform2(d) {\n                    return \"translate(\" + (d.x) + \",\" + d.y + \")\";\n                }\n\n\n\n                function Menu (menu, openCallback) {\n\n                    d3.event.preventDefault();\n\n                    d3.selectAll('.d3-context-menu').data([1])\n                        .enter()\n                        .append('div')\n                        .attr('class', 'd3-context-menu')\n\n                    // close menu\n                    d3.select('body').on('click.d3-context-menu', function () {\n                        d3.select('.d3-context-menu').style('display', 'none')\n                    });\n\n                    return (select, event, data)=> {\n\n\n\n                        let elm = this;\n\n\n                        d3.selectAll('.d3-context-menu').html('');\n                        let list = d3.selectAll('.d3-context-menu').append('ul');\n\n                        list.selectAll('li').data(menu).enter()\n                            .append('li')\n                            .html(function (d) {\n                                return d.title\n                            })\n                            .on('click', function (d) {\n\n\n                                d.action(data, select);\n\n                                d3.select('.d3-context-menu').style('display', 'none')\n                            });\n\n                        // the openCallback allows an action to fire before the menu is displayed\n                        // an example usage would be closing a tooltip\n                        if (openCallback) openCallback(data);\n\n                        // display context menu\n\n                        d3.select('.d3-context-menu')\n                            .style('left', (event.pageX - 2) + 'px')\n                            .style('top', (event.pageY - 2) + 'px')\n                            .style('display', 'block');\n                        d3.event.preventDefault();\n                        // return false\n                    }\n\n                }\n\n\n            },\n//\n            doubleClick(info,nodes, input){\n\n\n                let new_node = {\n                    'id': nodes.length,\n                    \"type\": \"node\",\n                    'properties': {'name': input},\n                    'label':'Concept'\n                };\n\n                info.nodes.push(new_node);\n                this.renderGraph(info);\n\n\n            },\n\n            singleClick(info, node,input){\n                // let temp = [];\n\n                // let source = node.id;\n\n\n                if(this.temp.length ===2 && this.temp[0] !== this.temp[1] )\n                {\n\n\n                    let new_link = {\n                        \"source\": this.temp[0],\n                        \"target\": this.temp[1],\n                        \"type\": 'link',\n                        \"properties\": {},\n                        \"label\": input\n\n                    };\n\n                    info.links.push(new_link);\n                    console.log('new link added', info.links);\n                    this.temp.length = 0;\n                    this.renderGraph(info)\n\n                }\n                else if(this.temp.length ===2 && this.temp[0] === this.temp[1] )\n                {\n                    this.temp.length = 0;\n                }\n\n                if (this.temp.length ===0){\n                    this.renderGraph(info)\n                }\n\n                console.log('current select node id',this.temp)\n\n\n            },\n\n\n            submitData() {\n                console.log('submit data', this.info);\n                this.upload_nodes = this.info.nodes.map(function (element) {\n                    return {\n                        \"id\": String(element.id), \"type\": element.type, \"label\": element.label, \"properties\": {\n                            \"name\": element.properties.name\n                        }\n                    }\n\n                });\n                this.upload_links = this.info.links.map(function (element) {\n\n                    return {\n                        \"type\": element.type, \"id\": String(element.id), \"label\": element.label,\n                        \"source\": String(element.source.id), \"target\": String(element.target.id),\n                        \"properties\": element.properties\n                    }\n                });\n                //\n                console.log('nn', JSON.stringify(this.upload_nodes));\n                console.log('nn', JSON.stringify(this.upload_links));\n                let flag = true;\n                for (let i = 0; i < this.info.nodes.length; i++) {\n                    if (this.info.nodes[i].weight === 0) {\n                        flag = false;\n                    }\n                }\n\n                if (flag === false) {\n                    this.$message({\n                        'type': 'warning',\n                        'message': 'The node should have a least one link, please check it.'\n                    })\n                }\n                else{\n\n                this.$axios({\n                    headers: {\n                        'Content-Type': 'application/json;'\n                    },\n                    url: '/postUserGraph',\n                    method: 'post',\n                    data: {\n                        user: this.current_user,\n                        nodes: this.upload_nodes,\n                        // nodes:[\n                        //     {\n                        //         \"type\": \"node\",\n                        //         \"id\": \"0\",\n                        //         \"label\": \"Concept\",\n                        //         \"properties\": {\n                        //             \"name\": \"Innovation\"\n                        //         }\n                        //     },\n                        //     {\n                        //         \"type\": \"node\",\n                        //         \"id\": \"1\",\n                        //         \"label\": \"Concept\",\n                        //         \"properties\": {\n                        //             \"name\": \"Globalization\"\n                        //         }\n                        //     }],\n                        links: this.upload_links\n                        // links:  [\n                        //     {\n                        //         \"type\": \"link\",\n                        //         \"id\": \"0\",\n                        //         \"label\": \"benefits\",\n                        //         \"source\": \"0\",\n                        //         \"target\": \"1\",\n                        //         \"properties\": {}\n                        //     }\n                        // ]\n                    }\n\n\n                }).then(response => {\n                    console.log('success', response)\n                    this.$message({\n                        'type':'success',\n                        'message':'Submit Successfully!'\n                    })\n                    this.renderGraph(this.info)\n                })\n            }\n            },\n\n            reload(){\n                this.renderGraph(this.info)\n            },\n\n\n\n\n\n\n\n\n\n\n\n\n        }\n\n\n    }\n</script>\n\n<style>\n    #graph {\n        width: 100vw;\n        height: 100vh;\n    }\n\n    .d3-context-menu {\n        position: absolute;\n        display: none;\n        background-color: #f2f2f2;\n        border-radius: 4px;\n\n        font-family: Arial, sans-serif;\n        font-size: 14px;\n        min-width: 150px;\n        border: 1px solid #d4d4d4;\n\n        z-index:1200;\n    }\n\n    .d3-context-menu ul {\n        list-style-type: none;\n        margin: 4px 0px;\n        padding: 0px;\n        cursor: default;\n    }\n\n    .d3-context-menu ul li {\n        padding: 4px 16px;\n    }\n\n    .d3-context-menu ul li:hover {\n        background-color: #4677f8;\n        color: #fefefe;\n    }\n\n    #node_info {\n        position: absolute;\n        bottom: 40px;\n        right: 30px;\n        width: 270px;\n    }\n    #link_info {\n        position: absolute;\n        bottom: 40px;\n        right: 30px;\n        width: 270px;\n    }\n    .node-card {\n        border: 1px solid #9faecf;\n        background-color: #00aeff6b;\n        color: #fff;\n        text-align: left;\n\n    }\n    .link-card {\n        border: 1px solid #9faecf;\n        background-color: #00aeff6b;\n        color: #fff;\n        text-align: left;\n\n    }\n    .el-card__header {\n        border-bottom: 1px solid #50596d;\n    }\n\n\n</style>\n\n"]}]}