{"remainingRequest":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/src/App.vue","mtime":1627454648473},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKLy8gaW1wb3J0IFNldmVuIGZyb20gJ25vZGUtN3onCmltcG9ydCBzZXZlbkJpbiBmcm9tICc3emlwLWJpbicKaW1wb3J0IHsgbGlzdCB9IGZyb20gJ25vZGUtN3onCgppbXBvcnQgJCBmcm9tICdqcXVlcnknCmltcG9ydCB7CiAgICBnZXROb2RlU2VsZlBhdGgsCiAgICBzZXRMaW5rR3JvdXAsCiAgICBnZXROb2Rlc0xpbmUsfSBmcm9tICcuL3V0aWxzL2RldmljZVJlbGF0aW9uJwoKCgoKZXhwb3J0IGRlZmF1bHQgewoKCiAgICBkYXRhKCl7CgoKCiAgICAgICAgbGV0IGluZm8gPSB7CiAgICAgICAgICAgICJsaW5rcyI6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAic291cmNlIiA6IDAsCiAgICAgICAgICAgICAgICAgICAgInRhcmdldCIgOiAxLAogICAgICAgICAgICAgICAgICAgICJ0eXBlIiA6ICJsaW5rIiwKICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiAnTGluayBURVNUJywKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6e30KCiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgXSwKICAgICAgICAgICAgIm5vZGVzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJpZCI6IDAsCiAgICAgICAgICAgICAgICAgICAgInR5cGUiIDogIm5vZGUiLAogICAgICAgICAgICAgICAgICAgICJsYWJlbCIgOiAiRGV2aWNlIiwKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6eyJuYW1lIjoiaGVsbG8ifQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAiaWQiOiAxLAogICAgICAgICAgICAgICAgICAgICJ0eXBlIiA6ICJub2RlIiwKICAgICAgICAgICAgICAgICAgICAibGFiZWwiOiAiRGV2aWNlIiwKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6eyJuYW1lIjoid2lsbCJ9CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJpZCI6IDIsCiAgICAgICAgICAgICAgICAgICAgInR5cGUiIDogIm5vZGUiLAogICAgICAgICAgICAgICAgICAgICJsYWJlbCI6ICJEZXZpY2UiLAogICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjp7Im5hbWUiOiJsYWxhIn0KICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICBdCiAgICAgICAgfTsKCgoKICAgICAgICByZXR1cm4gewoKICAgICAgICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KCiAgICAgICAgICAgIC8vIGxvZyBmdW5jdGlvbiBwYXJhbWV0ZXJzCiAgICAgICAgICAgIGN1cnJlbnRfdXNlcjonJywKICAgICAgICAgICAgdXNlcm5hbWU6JycsCiAgICAgICAgICAgIHBhc3N3b3JkOicnLAogICAgICAgICAgICBuZXdVc2VybmFtZTonJywKICAgICAgICAgICAgbmV3UGFzc3dvcmQ6JycsCiAgICAgICAgICAgIHNob3dMb2dpbjp0cnVlLAogICAgICAgICAgICBjZW50ZXJEaWFsb2dWaXNpYmxlOmZhbHNlLAogICAgICAgICAgICBkaWFsb2dfY3JlYXRlVXNlcjpmYWxzZSwKCiAgICAgICAgICAgIG9wdGlvblZpc2libGVfaW5pdF9ub2RlczpmYWxzZSwKICAgICAgICAgICAgb3B0aW9uVmlzaWJsZV9hZGRfbm9kZXM6ZmFsc2UsCiAgICAgICAgICAgIG9wdGlvblZpc2libGVfY2hhbmdlX25vZGVzOmZhbHNlLAogICAgICAgICAgICBvcHRpb25WaXNpYmxlX2FkZF9saW5rOmZhbHNlLAogICAgICAgICAgICBvcHRpb25WaXNpYmxlX2NoYW5nZV9saW5rOmZhbHNlLAoKCiAgICAgICAgICAgIHVwbG9hZF9ub2RlczonJywKICAgICAgICAgICAgdXBsb2FkX2xpbmtzOicnLAogICAgICAgICAgICBkaXNhYmxlX2luaXRHcmFwaDp0cnVlLAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9pbml0R3JhcGg6ZmFsc2UsCgogICAgICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgICAgICBzaG93ZGV0YWlsX25vZGU6ZmFsc2UsIC8vIHNob3cgdGhlIGluZm8gaW4gdGhlIHJpZ2h0IGNvcm5lcgogICAgICAgICAgICBzaG93ZGV0YWlsX2xpbms6ZmFsc2UsCgogICAgICAgICAgICBkZXRhaWxWYWx1ZTonJywKICAgICAgICAgICAgZGV0YWlsbmFtZTonJywKICAgICAgICAgICAgbm9kZV92YWx1ZTogJycsCiAgICAgICAgICAgIGxpbmtfdmFsdWU6JycsCiAgICAgICAgICAgIGluaXRfbm9kZV92YWx1ZTonJywKICAgICAgICAgICAgYnRuQ2hhbmdlRW5hYmxlOiB0cnVlLAogICAgICAgICAgICBub2RlX2xpc3Q6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogJ25vZGUxJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ25vZGUxJwogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdub2RlMicsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdub2RlMicKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAndGVzdDMnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAndGVzdDMnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnYmJiJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ2JiYicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCiAgICAgICAgICAgIGxpbmtfbGlzdDogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGluazEnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbGluazEnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGluazInLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbGluazInCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAndGVzdF8zJywKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ3Rlc3RfMycKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCiAgICAgICAgICAgIGluZm86IHsKICAgICAgICAgICAgICAgIG5vZGVzOltdLAogICAgICAgICAgICAgICAgbGlua3M6W10KICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIC8vIGluZm86IGluZm8sCgogICAgICAgICAgICBpZkNsaWNrZWQ6ZmFsc2UsCgogICAgICAgICAgICBzZWxlY3RlZF9Ob2RlOiAnJywKCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOmZhbHNlLAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9saW5rOmZhbHNlLAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2Vfbm9kZV9uYW1lOmZhbHNlLAogICAgICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lOmZhbHNlLAogICAgICAgICAgICB0ZW1wIDogW10sCiAgICAgICAgICAgIGNsaWNrVGltZUlkIDogMCwKCiAgICAgICAgICAgIG5vZGVfaWQ6ICcnLAogICAgICAgICAgICBsaW5rX2lkOiAnJywKICAgICAgICAgICAgbmV3X2xpbmtfbmFtZTonJywKICAgICAgICAgICAgbmV3X25vZGVfbmFtZTonJywKCiAgICAgICAgICAgIG1lbnU6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSBOb2RlcycsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobm9kZSxzZWxlY3Rfbm9kZSkgPT4gewoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgiRGVsZXRlIHRoaXMgbm9kZT8iLCAiVGlwcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJObyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgbm9kZSBpcyBkZWxldGVkIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0ICEhIScsc2VsZWN0X25vZGUsbm9kZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmluZm8ubm9kZXMuc3BsaWNlKG5vZGUsMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IobGV0IGkgPXRoaXMuaW5mby5saW5rcy5sZW5ndGgtMTsgaT49MDsgaS0tICkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbGluayBpbmRleCcsaSxub2RlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmluZm8ubGlua3NbaV0uc291cmNlID09PSBzZWxlY3Rfbm9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCB0aGlzLmluZm8ubGlua3NbaV0udGFyZ2V0ID09PSBzZWxlY3Rfbm9kZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mby5saW5rcy5zcGxpY2UoaSwxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdhZnRlciBkZWxldGUnLCB0aGlzLmluZm8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CgogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NhbmNlbCBEZWxldGUhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB9LAoKCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ2hhbmdlIE5vZGUgTmFtZScsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOihub2RlX2lkKT0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVfaWQgPSBub2RlX2lkOwoKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICBdLAoKICAgICAgICAgICAgbWVudV9lZGdlOlsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSBMaW5rcycsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobGluayxzZWxlY3RlZF9saW5rKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsbCcsbGluayxzZWxlY3RlZF9saW5rKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgiRGVsZXRlIHRoaXMgbGluaz8iLCAiVGlwcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJObyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgbGluayBpcyBkZWxldGVkIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaW5mby5saW5rcy5zcGxpY2UobGluaywxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ2FuY2VsIERlbGV0ZSEnCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0NoYW5nZSBsaW5rIE5hbWUnLAogICAgICAgICAgICAgICAgICAgIGFjdGlvbjoobGlua19pZCk9PgogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5rX2lkID0gbGlua19pZDsKCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCgoKICAgICAgICB9CiAgICB9LAoKICAgIG1vdW50ZWQoKSB7CgogICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKCiAgICB9LAoKICAgIG1ldGhvZHM6IHsKICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBsb2dpbiBmdW5jdGlvbnMKCgogICAgICAgIGNyZWF0ZVVzZXI6ZnVuY3Rpb24oKXsKCiAgICAgICAgICAgIHRoaXMuZGlhbG9nX2NyZWF0ZVVzZXIgID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjcmVhdGUgdXNlciBmdW5jdGlvbicsdGhpcy5uZXdVc2VybmFtZSwgdGhpcy5uZXdQYXNzd29yZCkKCiAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgIHVybCA6ICcvY3JlYXRlTmV3VXNlcicsCiAgICAgICAgICAgICAgICBtZXRob2QgOiAncG9zdCcsCiAgICAgICAgICAgICAgICBkYXRhIDoKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICJ1c2VyIiA6IHRoaXMubmV3VXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICJwYXNzd29yZCIgOiB0aGlzLm5ld1Bhc3N3b3JkCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gdGhpcy5uZXdVc2VybmFtZTsKICAgICAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSB0aGlzLm5ld1Bhc3N3b3JkOwogICAgICAgICAgICAgICAgdGhpcy5uZXdQYXNzd29yZCA9ICcnOwogICAgICAgICAgICAgICAgdGhpcy5uZXdVc2VybmFtZSA9ICcnOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwogICAgICAgICAgICAgICAgaWYocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpCiAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoCgogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGhlIHVzZXJuYW1lIGlzIGV4aXN0ZWQgIScKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nX2NyZWF0ZVVzZXIgID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gJyc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXNzd29yZCA9ICcnOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CgogICAgICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnL2dldFVzZXJHcmFwaCcsCiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgICAgICAgICBkYXRhOgogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXI6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dMb2dpbiA9IGZhbHNlOyAvLyBjb250cm9sIHRoZSBsb2dpbiBzdGF0dXMKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJfbm9kZXMgPSByZXNwb25zZS5kYXRhLm5vZGVzOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgdXNlcl9saW5rcyA9IHJlc3BvbnNlLmRhdGEubGlua3M7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjaGFuZ2Vfbm9kZV90eXBlID0gdXNlcl9ub2Rlcy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuaWQgPSBOdW1iZXIoZWxlbWVudC5pZCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZWxlbWVudAogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGNoYW5nZV9saW5rX3R5cGUgPSB1c2VyX2xpbmtzLm1hcChmdW5jdGlvbiAoZWxlbWVudCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5pZCA9IE51bWJlcihlbGVtZW50LmlkKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc291cmNlID0gTnVtYmVyKGVsZW1lbnQuc291cmNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQudGFyZ2V0ID0gTnVtYmVyKGVsZW1lbnQudGFyZ2V0KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzID0gY2hhbmdlX25vZGVfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmtzID0gY2hhbmdlX2xpbmtfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X3VzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbykKCgogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCgogICAgICAgIH0sCgogICAgICAgIGdldFdpa2lwZWRpYTpmdW5jdGlvbigpewoKCgoKCiAgICAgICAgICAgIC8vIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gICAgIG1ldGhvZCA6ICdnZXQnLAogICAgICAgICAgICAvLyAgICAgdXJsIDogJy9nZXRBbGxXaWtpcGVkaWFBcnRpY2xlcycsCiAgICAgICAgICAgIC8vICAgICBkYXRhOiB7fQogICAgICAgICAgICAvLyB9KS50aGVuKHJlc3BvbnNlPT57CiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSkKICAgICAgICAgICAgLy8gfSkKICAgICAgICB9LAoKCiAgICAgICAgaGFuZGxlU2hvdzpmdW5jdGlvbigpewoKICAgICAgICAgICAgICAgIHRoaXMuY2VudGVyRGlhbG9nVmlzaWJsZT1mYWxzZTsKICAgICAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgICAgICB1cmw6Jy9nZXRVc2VyR3JhcGgnLAogICAgICAgICAgICAgICAgICAgIG1ldGhvZDoncG9zdCcsCiAgICAgICAgICAgICAgICAgICAgZGF0YTp7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVzZXIgOiAic29tZV91c2VyIiwKICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGFzc3dvcmQ6ICJteV9wYXNzd29yZCIKICAgICAgICAgICAgICAgICAgICAgICAgdXNlciA6IHRoaXMudXNlcm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkCiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzcG9uc2U9PnsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW49ZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB1c2VyX25vZGVzID0gcmVzcG9uc2UuZGF0YS5ub2RlczsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHVzZXJfbGlua3MgPSByZXNwb25zZS5kYXRhLmxpbmtzOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBsZXQgdGVzdCA9IHJlc3BvbnNlLmRhdGE7CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhbmdlX25vZGVfdHlwZSA9IHVzZXJfbm9kZXMubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gTnVtYmVyKGVsZW1lbnQuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICBsZXQgY2hhbmdlX2xpbmtfdHlwZSA9IHVzZXJfbGlua3MubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmlkID0gTnVtYmVyKGVsZW1lbnQuaWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zb3VyY2UgPSBOdW1iZXIoZWxlbWVudC5zb3VyY2UpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC50YXJnZXQgPSBOdW1iZXIoZWxlbWVudC50YXJnZXQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzID0gY2hhbmdlX25vZGVfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pbmZvLmxpbmtzID0gY2hhbmdlX2xpbmtfdHlwZTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50X3VzZXIgPSByZXNwb25zZS5kYXRhLnVzZXI7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKQoKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGVycm9yPT57CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93TG9naW4gPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIHRoaXMudXNlcm5hbWUgPSAnJzsKICAgICAgICAgICAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gJyc7CiAgICAgICAgICAgICAgICB9KQoKCiAgICAgICAgfSwKCiAgICAgICAgb25UYXBMb2dpbjpmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHRoaXMuY2VudGVyRGlhbG9nVmlzaWJsZT10cnVlCiAgICAgICAgfSwKCiAgICAgICAgbG9nb3V0OmZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdGhpcy5zaG93TG9naW4gPSB0cnVlOwogICAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gJyc7CiAgICAgICAgICAgIHRoaXMucGFzc3dvcmQgPSAnJzsKICAgICAgICAgICAgdGhpcy5pbmZvPSB7CiAgICAgICAgICAgICAgICBub2RlczpbXSwKICAgICAgICAgICAgICAgICAgICBsaW5rczpbXQogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbykKICAgICAgICB9LAoKICAgICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBvcHRpb25WaXNpYmxlX2luaXRfbm9kZXM6ZmFsc2UsCiAgICAgICAgLy8gb3B0aW9uVmlzaWJsZV9hZGRfbm9kZXM6ZmFsc2UsCiAgICAgICAgLy8gb3B0aW9uVmlzaWJsZV9jaGFuZ2Vfbm9kZXM6ZmFsc2UsCiAgICAgICAgLy8gb3B0aW9uVmlzaWJsZV9hZGRfbGluazpmYWxzZSwKICAgICAgICAvLyBvcHRpb25WaXNpYmxlX2NoYW5nZV9saW5rOmZhbHNlLAoKICAgICAgICBzaG93T3B0aW9uX2FkZF9ub2RlcygpCiAgICAgICAgewoKCiAgICAgICAgICAgIGxldCBpbnB1dENvbnRlbnQgPSB0aGlzLiRyZWZzLmFkZE5vZGUuJGNoaWxkcmVuWzBdLnZhbHVlOwogICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfYWRkX25vZGVzID0gaW5wdXRDb250ZW50Lmxlbmd0aCA+PTI7CgogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKCiAgICAgICAgc2hvd09wdGlvbl9pbml0X25vZGVzKCkKICAgICAgICB7CiAgICAgICAgICAgIGxldCBpbnB1dENvbnRlbnQgPSB0aGlzLiRyZWZzLmluaXQuJGNoaWxkcmVuWzBdLnZhbHVlOwoKICAgICAgICAgICAgdGhpcy5vcHRpb25WaXNpYmxlX2luaXRfbm9kZXMgPSBpbnB1dENvbnRlbnQubGVuZ3RoID49MjsKCiAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICB9LAoKICAgICAgICBzaG93T3B0aW9uX2NoYW5nZV9ub2RlcygpCiAgICAgICAgewogICAgICAgICAgICBsZXQgaW5wdXRDb250ZW50ID0gdGhpcy4kcmVmcy5jaGFuZ2VOb2RlTmFtZS4kY2hpbGRyZW5bMF0udmFsdWU7CiAgICAgICAgICAgIHRoaXMub3B0aW9uVmlzaWJsZV9jaGFuZ2Vfbm9kZXMgPSBpbnB1dENvbnRlbnQubGVuZ3RoID49MjsKCiAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICB9LAoKCiAgICAgICAgc2hvd09wdGlvbl9hZGRfbGluaygpCiAgICAgICAgewogICAgICAgICAgICBsZXQgaW5wdXRDb250ZW50ID0gdGhpcy4kcmVmcy5hZGRMaW5rLiRjaGlsZHJlblswXS52YWx1ZTsKCiAgICAgICAgICAgIHRoaXMub3B0aW9uVmlzaWJsZV9hZGRfbGluayA9IGlucHV0Q29udGVudC5sZW5ndGggPj0yOwogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKCiAgICAgICAgc2hvd09wdGlvbl9jaGFuZ2VfbGluaygpCiAgICAgICAgewoKICAgICAgICAgICAgbGV0IGlucHV0Q29udGVudCA9IHRoaXMuJHJlZnMuY2hhbmdlTGlua05hbWUuJGNoaWxkcmVuWzBdLnZhbHVlOwogICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfY2hhbmdlX2xpbmsgPSBpbnB1dENvbnRlbnQubGVuZ3RoID49MjsKCiAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICB9LAoKCiAgICAgICAgc2VsZWN0Qmx1cihlKSB7CiAgICAgICAgICAgIC8vIOaEj+ingeexu+WeiwogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgIGlmIChlLnRhcmdldC52YWx1ZSAhPT0gJycpIHsKICAgICAgICAgICAgICAgIC8vIHRoaXMuJGZvcmNlVXBkYXRlKCkgICAvLyDlvLrliLbmm7TmlrAKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKQogICAgICAgIH0sCgogICAgICAgIHNlbGVjdENsZWFyKCkgewogICAgICAgICAgICB0aGlzLm5vZGVfdmFsdWUgPSAnJzsKICAgICAgICAgICAgdGhpcy5saW5rX3ZhbHVlID0gJyc7CiAgICAgICAgICAgIHRoaXMubmV3X25vZGVfbmFtZSA9ICcnOwogICAgICAgICAgICB0aGlzLm5ld19saW5rX25hbWUgPSAnJzsKCiAgICAgICAgICAgIHRoaXMub3B0aW9uVmlzaWJsZV9pbml0X25vZGVzPWZhbHNlOwogICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfYWRkX25vZGVzPWZhbHNlOwogICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfY2hhbmdlX25vZGVzPWZhbHNlOwogICAgICAgICAgICB0aGlzLm9wdGlvblZpc2libGVfYWRkX2xpbms9ZmFsc2U7CiAgICAgICAgICAgIHRoaXMub3B0aW9uVmlzaWJsZV9jaGFuZ2VfbGluaz1mYWxzZTsKCgoKICAgICAgICAgICAgLy8gbGV0IGVsZW1lbnRzID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnZWwtaW5wdXRfX2lubmVyJyk7CiAgICAgICAgICAgIC8vIGVsZW1lbnRzWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudHNbMF0pOwogICAgICAgICAgICAvLyB3aGlsZShlbGVtZW50cy5sZW5ndGggPiAwKXsKICAgICAgICAgICAgLy8gICAgIGVsZW1lbnRzWzBdLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWxlbWVudHNbMF0pOwogICAgICAgICAgICAvLyB9CgogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKCiAgICAgICAgc2VsZWN0Q2hhbmdlKHZhbCkgewoKICAgICAgICAgICAgaWYodmFsICE9PSAnJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmKHRoaXMuZGlhbG9nRm9ybVZpc2libGVfbGluaz09PXRydWUpewogICAgICAgICAgICAgICAgdGhpcy5saW5rX3ZhbHVlID0gdmFsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lID09PSB0cnVlKXsKICAgICAgICAgICAgICAgIHRoaXMubmV3X2xpbmtfbmFtZSA9IHZhbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX25vZGVfbmFtZSA9PT0gdHJ1ZSl7CiAgICAgICAgICAgICAgICB0aGlzLm5ld19ub2RlX25hbWUgPSB2YWwKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPT09IHRydWUpewogICAgICAgICAgICAgICAgdGhpcy5ub2RlX3ZhbHVlID0gdmFsOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYodGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9pbml0R3JhcGggPT09IHRydWUpewogICAgICAgICAgICAgICAgdGhpcy5pbml0X25vZGVfdmFsdWUgPSB2YWw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy4kZm9yY2VVcGRhdGUoKQogICAgICAgIH0sCgoKICAgICAgICBjYW5jZWwoKQogICAgICAgIHsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbmsgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2Vfbm9kZV9uYW1lID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX2xpbmtfbmFtZSA9IGZhbHNlOwoKICAgICAgICAgICAgdGhpcy50ZW1wLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIHRoaXMubmV3UGFzc3dvcmQgPSAnJzsKICAgICAgICAgICAgdGhpcy5uZXdVc2VybmFtZSA9ICcnOwogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfaW5pdEdyYXBoID0gZmFsc2U7CgogICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCk7CgogICAgICAgIH0sCiAgICAgICAgc2hvd0luaXRHcmFwaDpmdW5jdGlvbigpewogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2luaXRHcmFwaCA9IHRydWU7CiAgICAgICAgfSwKICAgICAgICBJbml0R3JhcGg6ZnVuY3Rpb24oKQogICAgICAgIHsKICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5pbmZvKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2luaXQnKSk7CgogICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkIGEgc3RhcnQgbm9kZScpOwogICAgICAgICAgICBsZXQgaW5pdF9ub2RlPSB7CiAgICAgICAgICAgICAgICAiaWQiOiAwLAogICAgICAgICAgICAgICAgInR5cGUiIDogIm5vZGUiLAogICAgICAgICAgICAgICAgImxhYmVsIiA6ICJEZXZpY2UiLAogICAgICAgICAgICAgICAgInByb3BlcnRpZXMiOnsibmFtZSI6dGhpcy5pbml0X25vZGVfdmFsdWV9CiAgICAgICAgICAgIH07CgogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2luaXRHcmFwaCAgPSBmYWxzZTsKCgogICAgICAgICAgICB0aGlzLmluZm8ubm9kZXMucHVzaChpbml0X25vZGUpOwoKCiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RDbGVhcigpOwogICAgICAgIH0sCgoKICAgICAgICBhZGROb2RlcygpewoKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRvdWJsZUNsaWNrKHRoaXMuaW5mbywgdGhpcy5pbmZvLm5vZGVzLCB0aGlzLm5vZGVfdmFsdWUpOwoKICAgICAgICAgICAgLy8gdGhpcy5vcHRpb25WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIC8vIHRoaXMub3B0aW9uVmlzaWJsZV9saW5rID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RDbGVhcigpOwoKCiAgICAgICAgfSwKCiAgICAgICAgY2hhbmdlX25vZGVfbmFtZSgpewoKICAgICAgICAgICAgdGhpcy5pbmZvLm5vZGVzW3RoaXMubm9kZV9pZF0ucHJvcGVydGllcy5uYW1lID0gdGhpcy5uZXdfbm9kZV9uYW1lOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSBmYWxzZTsKCiAgICAgICAgICAgIC8vIHRoaXMub3B0aW9uVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAvLyB0aGlzLm9wdGlvblZpc2libGVfbGluayA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CgoKICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pOwogICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCk7CgogICAgICAgIH0sCgoKICAgICAgICBjaGFuZ2VfbGlua19uYW1lKCkKICAgICAgICB7CgogICAgICAgICAgICB0aGlzLmluZm8ubGlua3NbdGhpcy5saW5rX2lkXS5sYWJlbCA9IHRoaXMubmV3X2xpbmtfbmFtZTsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lID0gZmFsc2U7CgogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgIC8vIHRoaXMub3B0aW9uVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAvLyB0aGlzLm9wdGlvblZpc2libGVfbGluayA9IGZhbHNlOwoKCgoKICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pCiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKTsKICAgICAgICB9LAoKICAgICAgICBhZGRMaW5rcygpCiAgICAgICAgewogICAgICAgICAgICBjb25zb2xlLmxvZygnYWRkIGxpbmsnLHRoaXMub3B0aW9uVmlzaWJsZSx0aGlzLm9wdGlvblZpc2libGVfbGluayk7CgogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbmsgPSBmYWxzZTsKCiAgICAgICAgICAgIGlmICh0aGlzLnRlbXAubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZUNsaWNrKHRoaXMuaW5mbywgdGhpcy5zZWxlY3RlZF9Ob2RlLCB0aGlzLmxpbmtfdmFsdWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKAoKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0FkZCBMaW5rcyEnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSB0cnVlOwogICAgICAgICAgICAvLyB0aGlzLm9wdGlvblZpc2libGUgPSBmYWxzZTsKICAgICAgICAgICAgLy8gdGhpcy5vcHRpb25WaXNpYmxlX2xpbmsgPSBmYWxzZTsKCgogICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCkKCiAgICAgICAgfSwKCgogICAgICAgIHJlbmRlckdyYXBoKGluZm8pIHsKICAgICAgICAgICAgLy8gbGV0IHRlbXAgPSBbXTsKCgogICAgICAgICAgICBjb25zb2xlLmxvZygncmVuZGVyIGRhdGEnLGluZm8pOwogICAgICAgICAgICBpZih0aGlzLnNob3dMb2dpbiA9PT0gZmFsc2UgJiYgdGhpcy5pbmZvLm5vZGVzLmxlbmd0aCA9PT0gMCApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZV9pbml0R3JhcGggPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlewogICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlX2luaXRHcmFwaCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gdGhpcy5kaXNhYmxlX2luaXRHcmFwaCA9IHRoaXMuaW5mby5ub2Rlcy5sZW5ndGggIT09IDA7CgogICAgICAgICAgICBsZXQge2xpbmtzLCBub2Rlc30gPSBpbmZvOwoKICAgICAgICAgICAgLy/lhbPns7vliIbnu4QKICAgICAgICAgICAgc2V0TGlua0dyb3VwKGxpbmtzKTsKCgogICAgICAgICAgICBkMy5zZWxlY3QoIiNncmFwaCIpLmh0bWwoJycpOwoKCiAgICAgICAgICAgIGxldCBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpLy9sYXlvdXTlsIZqc29u5qC85byP6L2s5YyW5Li65Yqb5a2m5Zu+5Y+v55So55qE5qC85byPCiAgICAgICAgICAgICAgICAubm9kZXMobm9kZXMpLy/orr7lrproioLngrnmlbDnu4QKICAgICAgICAgICAgICAgIC5saW5rcyhsaW5rcykvL+iuvuWumui/nue6v+aVsOe7hAogICAgICAgICAgICAgICAgLmxpbmtEaXN0YW5jZSg1MDApLy/ov57mjqXnur/plb/luqYKICAgICAgICAgICAgICAgIC5jaGFyZ2UoLTE1MDApLy/pobbngrnnmoTnlLXojbfmlbDjgILor6Xlj4LmlbDlhrPlrprmmK/mjpLmlqXov5jmmK/lkLjlvJXvvIzmlbDlgLzotorlsI/otorkupLnm7jmjpLmlqUKICAgICAgICAgICAgICAgIC5vbigidGljayIsIGZ1bmN0aW9uICgpewogICAgICAgICAgICAgICAgICAgICAgICB0aWNrKCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKS8v5oyH5pe26Ze06Ze06ZqU77yM6ZqU5LiA5q615pe26Ze05Yi35paw5LiA5qyh55S76Z2iCiAgICAgICAgICAgICAgICAuc3RhcnQoKTsvL+W8gOWni+i9rOaNogoKCgogICAgICAgICAgICBsZXQgem9vbSA9IGQzLmJlaGF2aW9yLnpvb20oKQogICAgICAgICAgICAgICAgLnNjYWxlRXh0ZW50KFsuNCwgMl0pCiAgICAgICAgICAgICAgICAub24oInpvb20iLCB6b29tZWQpOwoKICAgICAgICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgiI2dyYXBoIikuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAgICAgLmF0dHIoInBvaW50ZXItZXZlbnQiLCAiYWxsIikKICAgICAgICAgICAgICAgIC5hdHRyKCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwgInhNaWRZTWlkIG1lZXQiKS8v6Ieq6YCC5bqU5a655Zmo5aSn5bCPCiAgICAgICAgICAgICAgICAuYXR0cigidmlld0JveCIsICItNDYwIC0yMjAgMTIwMCAxMjAwIikKICAgICAgICAgICAgICAgIC8vIC5vbigiZGJsY2xpY2siLCBkb3VibGVDbGljaykKICAgICAgICAgICAgICAgIC5jYWxsKHpvb20pOwoKCgoKICAgICAgICAgICAgLy8gb2xkX25vZGVzID0gbm9kZXM7CiAgICAgICAgICAgIGxldCBjaXJjbGVfZyA9IHN2Zy5zZWxlY3RBbGwoImNpcmNsZSIpCiAgICAgICAgICAgICAgICAuZGF0YShmb3JjZS5ub2RlcygpKS8v6KGo56S65L2/55SoZm9yY2Uubm9kZXPmlbDmja4KICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsZnVuY3Rpb24obm9kZSxpKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImdfY2lyY2xlXyIgKyBpOyB9KS8v5qCH6K6wY2lyY2xl55qE54i26IqC54K5CiAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgLmNhbGwoZHJhZygpKSAvL+WwhuW9k+WJjemAieS4reeahOWFg+e0oOS8oOWIsGRyYWflh73mlbDkuK3vvIzkvb/pobbngrnlj6/ku6Xooqvmi5bliqgKICAgICAgICAgICAgICAgIC5vbigiY2xpY2siLCAobm9kZSwgaSwpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOwoKCiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lSWQpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrVGltZUlkID0gc2V0VGltZW91dCggKCk9PiB7CgoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcC5wdXNoKG5vZGUuaW5kZXgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2xpdWxpdScsdGhpcy50ZW1wKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHRoaXMudGVtcC5sZW5ndGggPT09IDIgJiYgdGhpcy50ZW1wWzBdICE9PSB0aGlzLnRlbXBbMV0pewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfbGluayA9IHRydWU7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZih0aGlzLnRlbXAubGVuZ3RoID09PSAyICYmIHRoaXMudGVtcFswXSA9PT0gdGhpcy50ZW1wWzFdKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLnNpbmdsZUNsaWNrKGluZm8sIG5vZGUsIHRlbXAsIHRoaXMuc3RhdGUyKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsaWNrU3R5bGUobm9kZSwgaSwgdGhpcyk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgLCAyNTApOwogICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAub24oJ21vdXNlb3ZlcicsIChub2RlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGQzLmV2ZW50LmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICB0aGlzLnNob3dkZXRhaWxfbm9kZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobm9kZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZXRhaWxWYWx1ZSA9IG5vZGUKICAgICAgICAgICAgICAgICAgICB0aGlzLmRldGFpbG5hbWUgPSBub2RlLnByb3BlcnRpZXMubmFtZQogICAgICAgICAgICAgICAgICAgIC8vIHNob3dOb2RlSW5mbyhub2RlLCB0aGlzKTsKICAgICAgICAgICAgICAgICAgICAvLyBzaG93Q2lyY2xlQm9yZGVyT3V0ZXJBcmMobm9kZSwgaSk7CiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLm9uKCdtb3VzZW91dCcsKG5vZGUpPT57CiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93ZGV0YWlsX25vZGUgPSBmYWxzZTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAub24oImRibGNsaWNrIiwgKG5vZGUsICk9PnsKCgogICAgICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lSWQpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ2VsLWlucHV0X19pbm5lcicpKQogICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuZG91YmxlQ2xpY2soaW5mbywgbm9kZSwgbm9kZXMsIGxpbmtzKQoKCiAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgLm9uKCdjb250ZXh0bWVudScsKGQsbm9kZSk9PnsKICAgICAgICAgICAgICAgICAgICBNZW51KHRoaXMubWVudSkoZCwgZDMuZXZlbnQsIG5vZGUpCgogICAgICAgICAgICAgICAgfSk7CgoKCgogICAgICAgICAgICBzdmcub24oImRibGNsaWNrLnpvb20iLCBudWxsKTsvL+WPlua2iHN2Z+WSjOWchuWciOeahOWPjOWHu+aUvuWkp+S6i+S7tu+8iGQz5Lit6buY6K6k5byA5ZCvN+S4quS6i+S7tu+8jOWFs+mXremYsuatouS4juS4iumdoueahOWPjOWHu+S6i+S7tuWGsueqge+8iQogICAgICAgICAgICBjaXJjbGVfZy5vbigiZGJsY2xpY2suem9vbSIsIG51bGwpOwoKCgogICAgICAgICAgICAvL+WNleWHu+aUueWPmOiKgueCueminOiJsiDooajmmI7pgInkuK0KICAgICAgICAgICAgZnVuY3Rpb24gY2xpY2tTdHlsZShub2RlLCBpLCBfdGhpcyl7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMuaWZDbGlja2VkKTsKICAgICAgICAgICAgICAgIC8vIF90aGlzLmlmQ2xpY2tlZCA9IHRydWU7CgoKICAgICAgICAgICAgICAgIGNpcmNsZV9nLmF0dHIoJ25vZGUnLCBmdW5jdGlvbihuKSB7CgoKCiAgICAgICAgICAgICAgICAgICAgaWYobi5pbmRleCA9PT0gbm9kZS5pbmRleCAmJiBfdGhpcy5pZkNsaWNrZWQ9PT1mYWxzZSApIHsKICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgbi5pbmRleCkuc2VsZWN0KCdjaXJjbGUnKS5zdHlsZSgnZmlsbCcsJ3JlZCcpOwogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnaGFoYScsZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgbi5pbmRleCkuc2VsZWN0KCdjaXJjbGUnKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmlmQ2xpY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmlrDpgInnmoQgdHJ1ZScsX3RoaXMuaWZDbGlja2VkKTsKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYobi5pbmRleCA9PT0gbm9kZS5pbmRleCAmJiBfdGhpcy5pZkNsaWNrZWQ9PT10cnVlICkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIG4uaW5kZXgpLnNlbGVjdCgnY2lyY2xlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBnZXRDaXJjbGVDb2xvcihub2RlKTt9KTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWZDbGlja2VkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfph43lpI3pgInnmoTpopzoibLlj5jlm57ljrsgZmFsc2UnLF90aGlzLmlmQ2xpY2tlZCk7CgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIGlmKG4uaW5kZXggIT09IG5vZGUuaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vZGUgYXJlIGRpZmZlcmVudCcpOwogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBuLmluZGV4KQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNlbGVjdCgnY2lyY2xlJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsIGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBnZXRDaXJjbGVDb2xvcihub2RlKTt9KQoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKCgoKICAgICAgICAgICAgLy/lnIblnIgKICAgICAgICAgICAgbGV0IGNpcmNsZSA9IGNpcmNsZV9nLmFwcGVuZCgiY2lyY2xlIikKICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgIjJweCIpCiAgICAgICAgICAgICAgICAuYXR0cigiciIsIDMwKS8v6K6+572u5ZyG5ZyI5Y2K5b6ECiAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAobm9kZSkgeyByZXR1cm4gZ2V0Q2lyY2xlQ29sb3Iobm9kZSk7IH0pOwoKICAgICAgICAgICAgbGV0IHRleHQgPSBjaXJjbGVfZy5hcHBlbmQoInRleHQiKQogICAgICAgICAgICAgICAgLmF0dHIoImR5IiwgIi4zNWVtIikKICAgICAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKS8v5Zyo5ZyG5ZyI5Lit5Yqg5LiK5pWw5o2uCiAgICAgICAgICAgICAgICAuc3R5bGUoJ2ZpbGwnLCAiI0ZGRkZGRiIpCiAgICAgICAgICAgICAgICAuYXR0cigneCcsZnVuY3Rpb24oZCl7IGFwcGVuZENpcmNsZVRleHQoZCwgdGhpcyk7IH0pOwoKICAgICAgICAgICAgLy/lnIblnIjnmoTmj5DnpLrmloflrZcKICAgICAgICAgICAgY2lyY2xlLmFwcGVuZCgic3ZnOnRpdGxlIikudGV4dChmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vZGUudHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vZGUnOiByZXR1cm4gbm9kZS5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnRGV2aWNlJzogcmV0dXJuIG5vZGUuZmFjdG9yeUNvZGU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnQXBwbGljYXRpb24nOiByZXR1cm4gbm9kZS5hcHBsaWNhdGlvbk5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnUG9zaXRpb24nOiByZXR1cm4gbm9kZS5wb3NpdGlvbkNvZGU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnTWFudWZhY3R1cmVyJzogcmV0dXJuIG5vZGUubWFudWZhY3R1cmVyTmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdJb3RJbmZyYXN0cnVjdHVyZSc6IHJldHVybiBub2RlLmlvdEluZnJhc3RydWN0dXJlTmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdEZXZpY2VBZG1pbic6IHJldHVybiBub2RlLm5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0ZXh0LmFwcGVuZCgic3ZnOnRpdGxlIikudGV4dChmdW5jdGlvbihub2RlKSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG5vZGUudHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ25vZGUnOiByZXR1cm4gbm9kZS5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnRGV2aWNlJzogcmV0dXJuIG5vZGUuZmFjdG9yeUNvZGU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnQXBwbGljYXRpb24nOiByZXR1cm4gbm9kZS5hcHBsaWNhdGlvbk5hbWU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnUG9zaXRpb24nOiByZXR1cm4gbm9kZS5wb3NpdGlvbkNvZGU7CiAgICAgICAgICAgICAgICAgICAgLy8gY2FzZSAnTWFudWZhY3R1cmVyJzogcmV0dXJuIG5vZGUubWFudWZhY3R1cmVyTmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdJb3RJbmZyYXN0cnVjdHVyZSc6IHJldHVybiBub2RlLmlvdEluZnJhc3RydWN0dXJlTmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdEZXZpY2VBZG1pbic6IHJldHVybiBub2RlLm5hbWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvL+iuvue9rui/nuaOpee6vwogICAgICAgICAgICBsZXQgZGVmcyA9IHN2Zy5hcHBlbmQoImRlZnMiKTsKCiAgICAgICAgICAgIGRlZnMuYXBwZW5kKCJtYXJrZXIiKQogICAgICAgICAgICAgICAgLmF0dHIoImlkIiwgImVuZCIpCiAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCJzdHJva2VXaWR0aCIpLy/orr7nva7kuLpzdHJva2VXaWR0aOeureWktOS8mumaj+edgOe6v+eahOeyl+e7huWPkeeUn+WPmOWMlgogICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlclVuaXRzIiwgInVzZXJTcGFjZU9uVXNlIikKICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJXaWR0aCIsIDIwKS8v5qCH6K+G55qE5aSn5bCPCiAgICAgICAgICAgICAgICAuYXR0cigibWFya2VySGVpZ2h0IiwgMjApCiAgICAgICAgICAgICAgICAuYXR0cigidmlld0JveCIsICIwIC00IDEyIDE1IikvL+WdkOagh+ezu+eahOWMuuWfnwogICAgICAgICAgICAgICAgLmF0dHIoInJlZlgiLCAwKS8v566t5aS05Z2Q5qCHCiAgICAgICAgICAgICAgICAuYXR0cigicmVmWSIsIDApCiAgICAgICAgICAgICAgICAuYXR0cigib3JpZW50IiwgJ2F1dG8nKS8v57uY5Yi25pa55ZCR77yM5Y+v6K6+5a6a5Li677yaYXV0b++8iOiHquWKqOehruiupOaWueWQke+8ieWSjCDop5LluqblgLwKICAgICAgICAgICAgICAgIC5hcHBlbmQoInN2ZzpwYXRoIikKICAgICAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLDUpLy/nrq3lpLTlrr3luqYKICAgICAgICAgICAgICAgIC5hdHRyKCJkIiwgIk0wLC01TDEwLDBMMCw1IikvL+eureWktOeahOi3r+W+hAogICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAncmdiYSgwLDAsMCwgMC40KScpOy8v566t5aS06aKc6ImyCgogICAgICAgICAgICBkZWZzLmFwcGVuZCgibWFya2VyIikKICAgICAgICAgICAgICAgIC5hdHRyKCJpZCIsICJzdGFydCIpCiAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCJzdHJva2VXaWR0aCIpLy/orr7nva7kuLpzdHJva2VXaWR0aOeureWktOS8mumaj+edgOe6v+eahOeyl+e7huWPkeeUn+WPmOWMlgogICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlclVuaXRzIiwgInVzZXJTcGFjZU9uVXNlIikKICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJXaWR0aCIsIDIwKS8v5qCH6K+G55qE5aSn5bCPCiAgICAgICAgICAgICAgICAuYXR0cigibWFya2VySGVpZ2h0IiwgMjApCiAgICAgICAgICAgICAgICAuYXR0cigidmlld0JveCIsICIwIC00IDEyIDE1IikvL+WdkOagh+ezu+eahOWMuuWfnwogICAgICAgICAgICAgICAgLmF0dHIoInJlZlgiLCAwKS8v566t5aS05Z2Q5qCHCiAgICAgICAgICAgICAgICAuYXR0cigicmVmWSIsIDApCiAgICAgICAgICAgICAgICAuYXR0cigib3JpZW50IiwgJ2F1dG8nKS8v57uY5Yi25pa55ZCR77yM5Y+v6K6+5a6a5Li677yaYXV0b++8iOiHquWKqOehruiupOaWueWQke+8ieWSjCDop5LluqblgLwKICAgICAgICAgICAgICAgIC5hcHBlbmQoInN2ZzpwYXRoIikKICAgICAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLDUpLy/nrq3lpLTlrr3luqYKICAgICAgICAgICAgICAgIC5hdHRyKCJkIiwgIk0wLDBMMTAsLTVMMTAsNSIpLy/nrq3lpLTnmoTot6/lvoQKICAgICAgICAgICAgICAgIC5hdHRyKCdmaWxsJywgJ3JnYmEoMCwwLDAsIDIpJyk7Ly/nrq3lpLTpopzoibIKCiAgICAgICAgICAgIGNvbnN0IGVkZ2VzX2xpbmUgPSBzdmcuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIuZWRnZXBhdGgiKQogICAgICAgICAgICAgICAgLmRhdGEoZm9yY2UubGlua3MoKSkKICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCJwYXRoIikKCiAgICAgICAgICAgICAgICAvLyAuYXR0cignbWFya2VyLWVuZCcsIGZ1bmN0aW9uKGQsaSkgewogICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKCdsYWxhJyxkLmxhYmVsLGQueF9zdGFydCkKICAgICAgICAgICAgICAgIC8vICAgICBpZiAoZC54X3N0YXJ0IDwgZC54X2VuZCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnc291cmNlIDwgZW5kJykKICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuICAidXJsKCNlbmQpIjsKICAgICAgICAgICAgICAgIC8vICAgICB9CiAgICAgICAgICAgICAgICAvLyAgICAgcmV0dXJuICcnCiAgICAgICAgICAgICAgICAvLyB9KQogICAgICAgICAgICAgICAgLy8gLmF0dHIoJ21hcmtlci1zdGFydCcsIGZ1bmN0aW9uKGQsaSkgewogICAgICAgICAgICAgICAgLy8gICAgIGlmIChkLnhfc3RhcnQgPj0gZC54X2VuZCkgewogICAgICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnc291cmNlID4gZW5kJykKICAgICAgICAgICAgICAgIC8vICAgICAgICAgcmV0dXJuICJ1cmwoI3N0YXJ0KSI7CiAgICAgICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIHJldHVybiAnJwogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgICAgICAvLyAuYXR0cigibWFya2VyLXN0YXJ0IiwgInVybCgjc3RhcnQpIikKICAgICAgICAgICAgICAgIC8vIC5hdHRyKCJtYXJrZXItZW5kIiwgIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiBnZXRNYXJrZXJBcnJvdyhpKTsgfSkvL+agueaNrueureWktOagh+iusOeahGlk5Y+35qCH6K6w566t5aS0CiAgICAgICAgICAgICAgICAvLyAuYXR0cigibWFya2VyLWVuZCIsICApLy/moLnmja7nrq3lpLTmoIforrDnmoRpZOWPt+agh+iusOeureWktAogICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAnYmxhY2snKQogICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAzKS8v57q/5p2h57KX57uGCiAgICAgICAgICAgICAgICAuc3R5bGUoImZpbGwtb3BhY2l0eSIsMCkKICAgICAgICAgICAgICAgIC5zdHlsZSgiY3Vyc29yIiwicG9pbnRlciIpCiAgICAgICAgICAgICAgICAuYXR0cigiaWQiLCBmdW5jdGlvbiAoZCwgaSkgeyByZXR1cm4gJ2VkZ2VwYXRoJyArIGk7IH0pCiAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKGQpeyByZXR1cm4gZ2V0U3Ryb2tlV2lkdGgoZCk7IH0pCiAgICAgICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7IGVkZ2VzX2xpbmUuc3R5bGUoInN0cm9rZS13aWR0aCIsIDMpIH0pCiAgICAgICAgICAgICAgICAvLyAub24oJ2NsaWNrJywgKGxpbmspID0+IHsgdGhpcy5kZWxldGVMaW5lKHRoaXMuaW5mbyxsaW5rKTsgfSkKICAgICAgICAgICAgICAgIC5vbignY29udGV4dG1lbnUnLChkLGxpbmspPT57CgogICAgICAgICAgICAgICAgICAgIE1lbnUodGhpcy5tZW51X2VkZ2UpKGQsZDMuZXZlbnQsbGluaykKCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IGVkZ2VzX3RleHQgPSBzdmcuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIuZWRnZXRleHQiKQogICAgICAgICAgICAgICAgLmRhdGEobGlua3MpCiAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgICAgICAuc3R5bGUoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwibGluZXRleHQiKQogICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgIm1pZGRsZSIpCiAgICAgICAgICAgICAgICAuYXR0cigiZmlsbC1vcGFjaXR5IiwgMC41KQogICAgICAgICAgICAgICAgLnN0eWxlKCJjdXJzb3IiLCJwb2ludGVyIikKCiAgICAgICAgICAgICAgICAuYXR0cih7J2NsYXNzJzogJ2VkZ2VsYWJlbCcsCiAgICAgICAgICAgICAgICAgICAgJ2lkJzogZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuICdlZGdlcGF0aCcgKyBpOyB9LAogICAgICAgICAgICAgICAgICAgICdkeCc6IDE5MCwgJ2R5JzogMjAsCiAgICAgICAgICAgICAgICAgICAgJ2ZpbGwnOidibGFjaycsCiAgICAgICAgICAgICAgICAgICAgLy8gJ3RyYW5zZm9ybSc6IGVkZ2VfdGV4dF9Qb3NpdGlvbigpCiAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgZnVuY3Rpb24gZWRnZV90ZXh0X1Bvc2l0aW9uKCl7CgogICAgICAgICAgICAgICAgcmV0dXJuICdyb3RhdGUoMTgwLDQwLDUpJwogICAgICAgICAgICB9CgoKCiAgICAgICAgICAgIC8v6K6+572u57q/5p2h5LiK55qE5paH5a2XCiAgICAgICAgICAgIGVkZ2VzX3RleHQuYXBwZW5kKCd0ZXh0UGF0aCcpCiAgICAgICAgICAgICAgICAuYXR0cigneGxpbms6aHJlZicsIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAnI2VkZ2VwYXRoJyArIGkgfSkKICAgICAgICAgICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJub25lIikKICAgICAgICAgICAgICAgIC5hdHRyKCJmb250LXNpemUiLCAyMCkKICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmxhYmVsOyB9KTsKCgoKICAgICAgICAgICAgLy8gZm9yY2Uub24oInRpY2siLCB0aWNrKS8v5oyH5pe26Ze06Ze06ZqU77yM6ZqU5LiA5q615pe26Ze05Yi35paw5LiA5qyh55S76Z2iCiAgICAgICAgICAgIC8vICAgICAuc3RhcnQoKTsvL+W8gOWni+i9rOaNogogICAgICAgICAgICBmdW5jdGlvbiB6b29tZWQoKSB7Ly9zdmfkuIvnmoRn5qCH562+56e75Yqo5aSn5bCPCiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCJnIikuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICArZDMuZXZlbnQudHJhbnNsYXRlICsgIilzY2FsZSgiICtkMy5ldmVudC5zY2FsZSArICIpIik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIGdldE1hcmtlckFycm93KGkpIHsKICAgICAgICAgICAgICAgIHN2Zy5hcHBlbmQoImRlZnMiKS5hcHBlbmQoIm1hcmtlciIpICAgLy/nrq3lpLQKICAgICAgICAgICAgICAgICAgICAuYXR0cigiaWQiLCAiYXJyb3ciK2kpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlclVuaXRzIiwic3Ryb2tlV2lkdGgiKS8v6K6+572u5Li6c3Ryb2tlV2lkdGjnrq3lpLTkvJrpmo/nnYDnur/nmoTnspfnu4blj5HnlJ/lj5jljJYKICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCAidXNlclNwYWNlT25Vc2UiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJXaWR0aCIsIDIwKS8v5qCH6K+G55qE5aSn5bCPCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlckhlaWdodCIsIDIwKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ2aWV3Qm94IiwgIjAgLTQgMTIgMTUiKS8v5Z2Q5qCH57O755qE5Yy65Z+fCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInJlZlgiLCAwKS8v566t5aS05Z2Q5qCHCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInJlZlkiLCAwKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJvcmllbnQiLCAnYXV0bycpLy/nu5jliLbmlrnlkJHvvIzlj6/orr7lrprkuLrvvJphdXRv77yI6Ieq5Yqo56Gu6K6k5pa55ZCR77yJ5ZKMIOinkuW6puWAvAogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoInN2ZzpwYXRoIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiw1KS8v566t5aS05a695bqmCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCAiTTAsLTVMMTAsMEwwLDUiKS8v566t5aS055qE6Lev5b6ECiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2ZpbGwnLCAncmdiYSgwLDAsMCwgMC40KScpOy8v566t5aS06aKc6ImyCiAgICAgICAgICAgICAgICByZXR1cm4gInVybCgjYXJyb3dfZW5kIiArIGkgKyAiKSI7CiAgICAgICAgICAgIH0KCgoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3Ryb2tlV2lkdGgoZCkgewogICAgICAgICAgICAgICAgZWRnZXNfbGluZS5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgZnVuY3Rpb24gKGVkZ2UpIHsKICAgICAgICAgICAgICAgICAgICAvLyByZXR1cm4gZWRnZS5yZWxhdGlvbi5yZWxhdGlvbnNoaXBJZCA9PT0gZC5yZWxhdGlvbi5yZWxhdGlvbnNoaXBJZCA/IDMgOiAxOwogICAgICAgICAgICAgICAgICAgIHJldHVybiA2CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZHJhZygpey8v5ouW5ou95Ye95pWwCiAgICAgICAgICAgICAgICByZXR1cm4gZm9yY2UuZHJhZygpLm9uKCJkcmFnc3RhcnQiLGZ1bmN0aW9uKGQpewogICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnNvdXJjZUV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOyAvL+WPlua2iOm7mOiupOS6i+S7tgogICAgICAgICAgICAgICAgICAgIGQuZml4ZWQgPSB0cnVlOy8v5ouW5ou95byA5aeL5ZCO6K6+5a6a6KKr5ouW5ou95a+56LGh5Li65Zu65a6aCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q2lyY2xlQ29sb3Iobm9kZSkgewogICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gewogICAgICAgICAgICAgICAgICAgICdEZXZpY2UnOiAiI0ZGOUQwMCIsCiAgICAgICAgICAgICAgICAgICAgJ1Bvc2l0aW9uJzogIiNDNDc3RTkiLAogICAgICAgICAgICAgICAgICAgICdXb3JrJzogJyM2N0NBRjQnLAogICAgICAgICAgICAgICAgICAgICdJbnN0YWxsJzogJyNCQ0RENzMnLAogICAgICAgICAgICAgICAgICAgICdBcHBsaWNhdGlvbic6ICcjREQxRTlFJywKICAgICAgICAgICAgICAgICAgICAnTWFudWZhY3R1cmVyJzogJyNEREJBOUUnLAogICAgICAgICAgICAgICAgICAgICdJb3RJbmZyYXN0cnVjdHVyZSc6ICcjNmNhNWRkJywKICAgICAgICAgICAgICAgICAgICAnRGV2aWNlQWRtaW4nOiAnIzUwREQ4NycsCiAgICAgICAgICAgICAgICB9Oy8v5ZyG5ZyI6IOM5pmv6ImyCiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3Jbbm9kZS5sYWJlbF0gfHwgJyNDNDc3RTknOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBhcHBlbmRDaXJjbGVUZXh0KGQsIF90aGlzKSB7CiAgICAgICAgICAgICAgICBsZXQgY2lyY2xlVGV4dCA9ICcnOwogICAgICAgICAgICAgICAgaWYoZC50eXBlID09PSAnbm9kZScgJiYgZC5wcm9wZXJ0aWVzLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gZC5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZC5sYWJlbCA9PT0gJ1Bvc2l0aW9uJykgewogICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLnBvc2l0aW9uQ29kZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5sYWJlbCA9PT0gJ0FwcGxpY2F0aW9uJykgewogICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLmFwcGxpY2F0aW9uTmFtZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5sYWJlbCA9PT0gJ01hbnVmYWN0dXJlcicpIHsKICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gZC5tYW51ZmFjdHVyZXJOYW1lOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmxhYmVsID09PSAnSW90SW5mcmFzdHJ1Y3R1cmUnKSB7CiAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGQuaW90SW5mcmFzdHJ1Y3R1cmVOYW1lOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmxhYmVsID09PSAnRGV2aWNlQWRtaW4nKSB7CiAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGQubmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8v5aaC5p6c5bCP5LqO5Zub5Liq5a2X56ym77yM5LiN5o2i6KGMCiAgICAgICAgICAgICAgICBpZihjaXJjbGVUZXh0ICYmIGNpcmNsZVRleHQubGVuZ3RoID4gMTQpewogICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBjaXJjbGVUZXh0LnN1YnN0cmluZygwLDE0KSArICIuLi4iOwogICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdChfdGhpcykudGV4dChmdW5jdGlvbigpe3JldHVybiAnJzt9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGQzLnNlbGVjdChfdGhpcykuYXBwZW5kKCd0c3BhbicpLmF0dHIoJ3gnLDApLmF0dHIoJ3knLDApLmF0dHIoImZvbnQtc2l6ZSIsIDEwKQogICAgICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uKCl7IHJldHVybiBjaXJjbGVUZXh0OyB9KTsKICAgICAgICAgICAgfQoKCgoKCgogICAgICAgICAgICBmdW5jdGlvbiB0aWNrKCkgewoKICAgICAgICAgICAgICAgIGNpcmNsZS5hdHRyKCJ0cmFuc2Zvcm0iLCB0cmFuc2Zvcm0xKTsvL+WchuWciAogICAgICAgICAgICAgICAgdGV4dC5hdHRyKCJ0cmFuc2Zvcm0iLCB0cmFuc2Zvcm0yKTsvL+mhtueCueaWh+WtlwogICAgICAgICAgICAgICAgLy9saW5r5aWH5pWw5pyJ6Zeu6aKYCiAgICAgICAgICAgICAgICBlZGdlc19saW5lCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBmdW5jdGlvbiAoZCkgewoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Tm9kZXNMaW5lKGQsZWRnZXNfbGluZSxkZWZzKTsvL+absue6v+i3r+W+hAoKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgZWRnZXNfbGluZS5hdHRyKCdtYXJrZXItZW5kJywgZnVuY3Rpb24oZCxpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkLnhfc3RhcnQgPCBkLnhfZW5kKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gICJ1cmwoI2VuZCkiOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnJwogICAgICAgICAgICAgICAgICAgIH0pLmF0dHIoJ21hcmtlci1zdGFydCcsIGZ1bmN0aW9uKGQsaSkgewogICAgICAgICAgICAgICAgICAgIGlmIChkLnhfc3RhcnQgPj0gZC54X2VuZCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gInVybCgjc3RhcnQpIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICcnCgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIDsKCgogICAgICAgICAgICB9CgogICAgICAgICAgICAvL+iuvue9ruWchuWciOWSjOaWh+Wtl+eahOWdkOaghwogICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2Zvcm0xKGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyBkLnggKyAiLCIgKyBkLnkgKyAiKSI7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybTIoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIChkLngpICsgIiwiICsgZC55ICsgIikiOwogICAgICAgICAgICB9CgoKCiAgICAgICAgICAgIGZ1bmN0aW9uIE1lbnUgKG1lbnUsIG9wZW5DYWxsYmFjaykgewoKICAgICAgICAgICAgICAgIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7CgogICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuZDMtY29udGV4dC1tZW51JykuZGF0YShbMV0pCiAgICAgICAgICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdkaXYnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdkMy1jb250ZXh0LW1lbnUnKQoKICAgICAgICAgICAgICAgIC8vIGNsb3NlIG1lbnUKICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnYm9keScpLm9uKCdjbGljay5kMy1jb250ZXh0LW1lbnUnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZDMtY29udGV4dC1tZW51Jykuc3R5bGUoJ2Rpc3BsYXknLCAnbm9uZScpCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICByZXR1cm4gKHNlbGVjdCwgZXZlbnQsIGRhdGEpPT4gewoKCgogICAgICAgICAgICAgICAgICAgIGxldCBlbG0gPSB0aGlzOwoKCiAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0QWxsKCcuZDMtY29udGV4dC1tZW51JykuaHRtbCgnJyk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGxpc3QgPSBkMy5zZWxlY3RBbGwoJy5kMy1jb250ZXh0LW1lbnUnKS5hcHBlbmQoJ3VsJyk7CgogICAgICAgICAgICAgICAgICAgIGxpc3Quc2VsZWN0QWxsKCdsaScpLmRhdGEobWVudSkuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCdsaScpCiAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZC50aXRsZQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24gKGQpIHsKCgogICAgICAgICAgICAgICAgICAgICAgICAgICAgZC5hY3Rpb24oZGF0YSwgc2VsZWN0KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5kMy1jb250ZXh0LW1lbnUnKS5zdHlsZSgnZGlzcGxheScsICdub25lJykKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIC8vIHRoZSBvcGVuQ2FsbGJhY2sgYWxsb3dzIGFuIGFjdGlvbiB0byBmaXJlIGJlZm9yZSB0aGUgbWVudSBpcyBkaXNwbGF5ZWQKICAgICAgICAgICAgICAgICAgICAvLyBhbiBleGFtcGxlIHVzYWdlIHdvdWxkIGJlIGNsb3NpbmcgYSB0b29sdGlwCiAgICAgICAgICAgICAgICAgICAgaWYgKG9wZW5DYWxsYmFjaykgb3BlbkNhbGxiYWNrKGRhdGEpOwoKICAgICAgICAgICAgICAgICAgICAvLyBkaXNwbGF5IGNvbnRleHQgbWVudQoKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5kMy1jb250ZXh0LW1lbnUnKQogICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2xlZnQnLCAoZXZlbnQucGFnZVggLSAyKSArICdweCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgndG9wJywgKGV2ZW50LnBhZ2VZIC0gMikgKyAncHgnKQogICAgICAgICAgICAgICAgICAgICAgICAuc3R5bGUoJ2Rpc3BsYXknLCAnYmxvY2snKTsKICAgICAgICAgICAgICAgICAgICBkMy5ldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBmYWxzZQogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgfQoKCiAgICAgICAgfSwKCiAgICAgICAgZG91YmxlQ2xpY2soaW5mbyxub2RlcywgaW5wdXQpewoKCiAgICAgICAgICAgIGxldCBuZXdfbm9kZSA9IHsKICAgICAgICAgICAgICAgICdpZCc6IG5vZGVzLmxlbmd0aCwKICAgICAgICAgICAgICAgICJ0eXBlIjogIm5vZGUiLAogICAgICAgICAgICAgICAgJ3Byb3BlcnRpZXMnOiB7J25hbWUnOiBpbnB1dH0sCiAgICAgICAgICAgICAgICAnbGFiZWwnOidDb25jZXB0JwogICAgICAgICAgICB9OwoKICAgICAgICAgICAgaW5mby5ub2Rlcy5wdXNoKG5ld19ub2RlKTsKICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaChpbmZvKTsKCgogICAgICAgIH0sCgogICAgICAgIHNpbmdsZUNsaWNrKGluZm8sIG5vZGUsaW5wdXQpewogICAgICAgICAgICAvLyBsZXQgdGVtcCA9IFtdOwoKICAgICAgICAgICAgLy8gbGV0IHNvdXJjZSA9IG5vZGUuaWQ7CgoKICAgICAgICAgICAgaWYodGhpcy50ZW1wLmxlbmd0aCA9PT0yICYmIHRoaXMudGVtcFswXSAhPT0gdGhpcy50ZW1wWzFdICkKICAgICAgICAgICAgewoKCiAgICAgICAgICAgICAgICBsZXQgbmV3X2xpbmsgPSB7CiAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6IHRoaXMudGVtcFswXSwKICAgICAgICAgICAgICAgICAgICAidGFyZ2V0IjogdGhpcy50ZW1wWzFdLAogICAgICAgICAgICAgICAgICAgICJ0eXBlIjogJ2xpbmsnLAogICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjoge30sCiAgICAgICAgICAgICAgICAgICAgImxhYmVsIjogaW5wdXQKCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGluZm8ubGlua3MucHVzaChuZXdfbGluayk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbmV3IGxpbmsgYWRkZWQnLCBpbmZvLmxpbmtzKTsKICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaChpbmZvKQoKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmKHRoaXMudGVtcC5sZW5ndGggPT09MiAmJiB0aGlzLnRlbXBbMF0gPT09IHRoaXMudGVtcFsxXSApCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAodGhpcy50ZW1wLmxlbmd0aCA9PT0wKXsKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgoaW5mbykKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coJ2N1cnJlbnQgc2VsZWN0IG5vZGUgaWQnLHRoaXMudGVtcCkKCgogICAgICAgIH0sCgoKICAgICAgICBzdWJtaXREYXRhKCkgewogICAgICAgICAgICBjb25zb2xlLmxvZygnc3VibWl0IGRhdGEnLCB0aGlzLmluZm8pOwogICAgICAgICAgICB0aGlzLnVwbG9hZF9ub2RlcyA9IHRoaXMuaW5mby5ub2Rlcy5tYXAoZnVuY3Rpb24gKGVsZW1lbnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgImlkIjogU3RyaW5nKGVsZW1lbnQuaWQpLCAidHlwZSI6IGVsZW1lbnQudHlwZSwgImxhYmVsIjogZWxlbWVudC5sYWJlbCwgInByb3BlcnRpZXMiOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICJuYW1lIjogZWxlbWVudC5wcm9wZXJ0aWVzLm5hbWUKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy51cGxvYWRfbGlua3MgPSB0aGlzLmluZm8ubGlua3MubWFwKGZ1bmN0aW9uIChlbGVtZW50KSB7CgogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAidHlwZSI6IGVsZW1lbnQudHlwZSwgImlkIjogU3RyaW5nKGVsZW1lbnQuaWQpLCAibGFiZWwiOiBlbGVtZW50LmxhYmVsLAogICAgICAgICAgICAgICAgICAgICJzb3VyY2UiOiBTdHJpbmcoZWxlbWVudC5zb3VyY2UuaWQpLCAidGFyZ2V0IjogU3RyaW5nKGVsZW1lbnQudGFyZ2V0LmlkKSwKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6IGVsZW1lbnQucHJvcGVydGllcwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgY29uc29sZS5sb2coJ25uJywgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRfbm9kZXMpKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ25uJywgSlNPTi5zdHJpbmdpZnkodGhpcy51cGxvYWRfbGlua3MpKTsKICAgICAgICAgICAgbGV0IGZsYWcgPSB0cnVlOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuaW5mby5ub2Rlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgaWYgKHRoaXMuaW5mby5ub2Rlc1tpXS53ZWlnaHQgPT09IDApIHsKICAgICAgICAgICAgICAgICAgICBmbGFnID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChmbGFnID09PSBmYWxzZSkgewogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOiAnd2FybmluZycsCiAgICAgICAgICAgICAgICAgICAgJ21lc3NhZ2UnOiAnVGhlIG5vZGUgc2hvdWxkIGhhdmUgYSBsZWFzdCBvbmUgbGluaywgcGxlYXNlIGNoZWNrIGl0LicKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZXsKCiAgICAgICAgICAgIHRoaXMuJGF4aW9zKHsKICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb247JwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHVybDogJy9wb3N0VXNlckdyYXBoJywKICAgICAgICAgICAgICAgIG1ldGhvZDogJ3Bvc3QnLAogICAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgICAgIHVzZXI6IHRoaXMuY3VycmVudF91c2VyLAogICAgICAgICAgICAgICAgICAgIG5vZGVzOiB0aGlzLnVwbG9hZF9ub2RlcywKICAgICAgICAgICAgICAgICAgICAvLyBub2RlczpbCiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICJ0eXBlIjogIm5vZGUiLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgImlkIjogIjAiLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgImxhYmVsIjogIkNvbmNlcHQiLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgInByb3BlcnRpZXMiOiB7CiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAgICAgIm5hbWUiOiAiSW5ub3ZhdGlvbiIKICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyAgICAgfSwKICAgICAgICAgICAgICAgICAgICAvLyAgICAgewogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgInR5cGUiOiAibm9kZSIsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAiaWQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAibGFiZWwiOiAiQ29uY2VwdCIsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAicHJvcGVydGllcyI6IHsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICAibmFtZSI6ICJHbG9iYWxpemF0aW9uIgogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIC8vICAgICB9XSwKICAgICAgICAgICAgICAgICAgICBsaW5rczogdGhpcy51cGxvYWRfbGlua3MKICAgICAgICAgICAgICAgICAgICAvLyBsaW5rczogIFsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgewogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgInR5cGUiOiAibGluayIsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAiaWQiOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAibGFiZWwiOiAiYmVuZWZpdHMiLAogICAgICAgICAgICAgICAgICAgIC8vICAgICAgICAgInNvdXJjZSI6ICIwIiwKICAgICAgICAgICAgICAgICAgICAvLyAgICAgICAgICJ0YXJnZXQiOiAiMSIsCiAgICAgICAgICAgICAgICAgICAgLy8gICAgICAgICAicHJvcGVydGllcyI6IHt9CiAgICAgICAgICAgICAgICAgICAgLy8gICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBdCiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfSkudGhlbihyZXNwb25zZSA9PiB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY2VzcycsIHJlc3BvbnNlKQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAgICAgJ3R5cGUnOidzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAnbWVzc2FnZSc6J1N1Ym1pdCBTdWNjZXNzZnVsbHkhJwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKQogICAgICAgICAgICB9KQogICAgICAgIH0KICAgICAgICB9LAoKICAgICAgICByZWxvYWQoKXsKICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaCh0aGlzLmluZm8pCiAgICAgICAgfSwKCgoKCgoKCgoKCgoKICAgIH0KCgp9Cg=="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8VA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;;;;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;;AAGA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;;;;;AAKA;AACA;;;;AAIA;AACA;;AAEA;AACA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AAOA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;AAIA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AAaA;;;AAGA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n\n\n\n\n\n    <div id=\"app\">\n        <el-row>\n            <el-header style=\"text-align: right;height: 40px;\">\n                <div class=\"grid-content \">\n                    <template >\n                        <el-button style=\"margin-right: 5px;\"  @click=\"onTapLogin\" v-show=\"showLogin\" size=\"small\" round>Login</el-button>\n                        <el-button style=\"margin-right: 5px;\" size=\"small\" type=\"success\" v-show=\"!showLogin\" round>{{username}}</el-button>\n                        <el-button  @click=\"logout\" size=\"small\" v-show=\"!showLogin\" round>Logout</el-button>\n                    </template>\n                </div>\n            </el-header>\n\n            <el-dialog\n                    title=\"Login\"\n                    :visible.sync=\"centerDialogVisible\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"username\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"password\" placeholder=\"Please Input Password\"></el-input></span>\n                <el-button type=\"text\" style=\"margin-top: 15px;\" @click.native=\"dialog_createUser=true; centerDialogVisible=false\">No account?</el-button>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"centerDialogVisible=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click.native=\"handleShow\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n            <el-dialog\n                    title=\"Create New Account\"\n                    :visible.sync=\"dialog_createUser\"\n                    width=\"30%\"\n                    center>\n                <span>Username<el-input v-model=\"newUsername\" placeholder=\"Please Input Username\"></el-input></span>\n                <br><br>\n                <span>Password<el-input type=\"password\" v-model=\"newPassword\" onkeyup=\"value=value.replace(/[^A-Za-z0-9_]/g,'');\" placeholder=\"Please Input Password\"></el-input></span>\n                <span slot=\"footer\" class=\"dialog-footer\">\n            <el-button @click.native=\"dialog_createUser=false\">Cancel</el-button>\n            <el-button type=\"primary\" @click=\"createUser\" >Yes</el-button>\n          </span>\n            </el-dialog>\n\n\n\n\n\n        </el-row>\n\n        <el-container>\n\n            <el-row class=\"tac\">\n                <el-col >\n                    <h5>SustainKG</h5>\n                    <el-menu\n\n                            default-active=\"2\"\n                            class=\"el-menu-vertical-demo\"\n\n                    >\n                        <el-submenu index=\"1\">\n                            <template slot=\"title\">\n                                <i class=\"el-icon-location\"></i>\n                                <span>Operation</span>\n                            </template>\n                            <el-menu-item-group>\n                                <!--<template slot=\"title\">分组一</template>-->\n                                <el-menu-item index=\"1-1\" @click=\"submitData()\">Submit Data</el-menu-item>\n                                <el-menu-item index=\"1-2\" @click=\"getWikipedia()\">get Articles</el-menu-item>\n                                <el-menu-item index=\"1-3\" @click=\"reload()\">Reload Data</el-menu-item>\n                                <el-menu-item index=\"1-4\" :disabled='disable_initGraph' @click=\"showInitGraph()\">Init Graph</el-menu-item>\n\n                            </el-menu-item-group>\n\n\n                        </el-submenu>\n                        <el-menu-item >\n                            <i class=\"el-icon-menu\"></i>\n                            <span slot=\"title\">Node Number：{{ info.nodes.length }}</span>\n                        </el-menu-item>\n                        <el-menu-item >\n                            <i class=\"el-icon-setting\"></i>\n                            <span slot=\"title\">Link Number：{{ info.links.length }}</span>\n                        </el-menu-item>\n                    </el-menu>\n                </el-col>\n\n\n                <router-view></router-view>\n\n            </el-row>\n\n            <el-dialog :visible.sync=\"dialogFormVisible_initGraph\"\n                       title=\"Create Start Node\" center\n\n            >\n\n                Node Name\n                <el-select ref=\"init\"\n\n                        @keyup.native = \"showOption_init_nodes\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"init_node_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_init_nodes\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_init_nodes\">\n                        <el-option\n\n                                v-for=\"(item,index) in node_list\"\n                                :key=\"index\"\n                                :label=\"item.label\"\n                                :value=\"item.value\" ></el-option>\n                    </div>\n\n                </el-select>\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"InitGraph\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible\"\n                       title=\"Create Node\" center\n            >\n\n                Node Name\n                <el-select\n                        ref=\"addNode\"\n                        @keyup.native = \"showOption_add_nodes\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"node_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_add_nodes\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_add_nodes\">\n                    <el-option\n                            class=\"bar\"\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                    </div>\n                </el-select>\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"addNodes\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_node_name\"\n                       title=\"Change Node Name\" center\n            >\n\n                    Node Name\n                <el-select\n                        ref=\"changeNodeName\"\n                        @keyup.native = \"showOption_change_nodes\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_node_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_change_nodes\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_change_nodes\">\n                    <el-option\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_node_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_link\"\n                       :show-close=\"false\"\n                       title=\"Create Link\" center>\n\n                Link Name\n\n                <el-select\n                        ref=\"addLink\"\n                        @keyup.native = \"showOption_add_link\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"link_value\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_add_link\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_add_link\">\n                    <el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n\n                </el-select>\n\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\"  @click=\"addLinks\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_link_name\"\n                       title=\"Change Link Name\" center>\n\n                Link Name\n                <el-select\n                        ref=\"changeLinkName\"\n                        @keyup.native = \"showOption_change_link\"\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_link_name\"\n                        placeholder=\"Please select\"\n                        clearable\n                        filterable\n                        @blur=\"showOption_change_link\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                >\n                    <div  v-show=\"optionVisible_change_link\">\n                    <el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option></div>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_link_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n            <div id=\"node_info\" v-show=\"showdetail_node\" >\n                <el-card\n                        :style=\"{ backgroundColor: 'rgb(253, 216, 186)' }\"\n                        class=\"node-card\"\n                >\n                    <h2 :style=\"{ color: '#ca635f' }\">Node Detail</h2>\n                    <div>\n\n                        <h4 :style=\"{ color: '#aaaaff' }\">ID: {{ detailValue.id }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Name: {{ detailname }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Type: {{ detailValue.type }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Label: {{ detailValue.label }}</h4>\n                    </div>\n                </el-card>\n            </div>\n\n            <div id=\"link_info\" v-show=\"showdetail_link\" >\n                <el-card\n                        :style=\"{ backgroundColor: 'rgb(253, 216, 186)' }\"\n                        class=\"link-card\"\n                >\n                    <h2 :style=\"{ color: '#ca635f' }\">Link Detail</h2>\n                    <div>\n\n                        <h4 :style=\"{ color: '#aaaaff' }\">ID: {{ detailValue.id }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Name: {{ detailname }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Type: {{ detailValue.type }}</h4>\n                        <h4 :style=\"{ color: '#aaaaff' }\">Label: {{ detailValue.label }}</h4>\n                    </div>\n                </el-card>\n            </div>\n\n\n\n            <el-main id=\"graph\">\n                <!--<div id=\"graph\"></div>-->\n            </el-main>\n\n\n\n\n        </el-container>\n\n\n\n\n    </div>\n\n</template>\n\n<script>\n    import * as d3 from \"d3\";\n    // import Seven from 'node-7z'\n    import sevenBin from '7zip-bin'\n    import { list } from 'node-7z'\n\n    import $ from 'jquery'\n    import {\n        getNodeSelfPath,\n        setLinkGroup,\n        getNodesLine,} from './utils/deviceRelation'\n\n\n\n\n    export default {\n\n\n        data(){\n\n\n\n            let info = {\n                \"links\": [\n                    {\n                        \"source\" : 0,\n                        \"target\" : 1,\n                        \"type\" : \"link\",\n                        'label': 'Link TEST',\n                        \"properties\":{}\n\n                    },\n\n                ],\n                \"nodes\": [\n                    {\n                        \"id\": 0,\n                        \"type\" : \"node\",\n                        \"label\" : \"Device\",\n                        \"properties\":{\"name\":\"hello\"}\n                    },\n                    {\n                        \"id\": 1,\n                        \"type\" : \"node\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"will\"}\n                    },\n                    {\n                        \"id\": 2,\n                        \"type\" : \"node\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"lala\"}\n                    },\n\n                ]\n            };\n\n\n\n            return {\n\n                //////////////////////////////////////\n\n                // log function parameters\n                current_user:'',\n                username:'',\n                password:'',\n                newUsername:'',\n                newPassword:'',\n                showLogin:true,\n                centerDialogVisible:false,\n                dialog_createUser:false,\n\n                optionVisible_init_nodes:false,\n                optionVisible_add_nodes:false,\n                optionVisible_change_nodes:false,\n                optionVisible_add_link:false,\n                optionVisible_change_link:false,\n\n\n                upload_nodes:'',\n                upload_links:'',\n                disable_initGraph:true,\n                dialogFormVisible_initGraph:false,\n\n                //////////////////////////////////////\n                showdetail_node:false, // show the info in the right corner\n                showdetail_link:false,\n\n                detailValue:'',\n                detailname:'',\n                node_value: '',\n                link_value:'',\n                init_node_value:'',\n                btnChangeEnable: true,\n                node_list: [\n                    {\n                        value: 'node1',\n                        label: 'node1'\n                    },\n\n                    {\n                        value: 'node2',\n                        label: 'node2'\n                    },\n\n                    {\n                        value: 'test3',\n                        label: 'test3'\n                    },\n                    {\n                        value: 'bbb',\n                        label: 'bbb'\n                    }\n                ],\n\n                link_list: [\n                    {\n                        value: 'link1',\n                        label: 'link1'\n                    },\n                    {\n                        value: 'link2',\n                        label: 'link2'\n                    },\n                    {\n                        value: 'test_3',\n                        label: 'test_3'\n                    }\n                ],\n\n                info: {\n                    nodes:[],\n                    links:[]\n                },\n\n                // info: info,\n\n                ifClicked:false,\n\n                selected_Node: '',\n\n                dialogFormVisible:false,\n                dialogFormVisible_link:false,\n                dialogFormVisible_change_node_name:false,\n                dialogFormVisible_change_link_name:false,\n                temp : [],\n                clickTimeId : 0,\n\n                node_id: '',\n                link_id: '',\n                new_link_name:'',\n                new_node_name:'',\n\n                menu: [\n                    {\n                        title: 'Delete Nodes',\n                        action: (node,select_node) => {\n\n                            this.$confirm(\"Delete this node?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The node is deleted!'\n                                    });\n                                console.log('test !!!',select_node,node);\n                                this.info.nodes.splice(node,1);\n                                for(let i =this.info.links.length-1; i>=0; i-- )\n                                {\n                                    console.log('link index',i,node);\n                                    if(this.info.links[i].source === select_node\n                                        || this.info.links[i].target === select_node)\n                                    {\n                                        this.info.links.splice(i,1);\n                                    }\n\n                                }\n\n                                console.log('after delete', this.info)\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n\n                    },\n                    {\n                        title: 'Change Node Name',\n                        action:(node_id)=>{\n                            this.dialogFormVisible_change_node_name = true;\n                            this.node_id = node_id;\n\n                        },\n\n                    },\n\n                ],\n\n                menu_edge:[\n                    {\n                        title: 'Delete Links',\n                        action: (link,selected_link) => {\n                            console.log('ll',link,selected_link);\n                            this.$confirm(\"Delete this link?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The link is deleted!'\n                                    });\n                                this.info.links.splice(link,1);\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n                    },\n                    {\n                        title: 'Change link Name',\n                        action:(link_id)=>\n                        {\n                            this.dialogFormVisible_change_link_name = true;\n                            this.link_id = link_id;\n\n                        }\n\n                    }\n                ],\n\n\n\n            }\n        },\n\n        mounted() {\n\n            this.renderGraph(this.info);\n\n        },\n\n        methods: {\n            ////////////////////////////////////////////////////////////\n            // login functions\n\n\n            createUser:function(){\n\n                this.dialog_createUser  = false;\n                console.log('create user function',this.newUsername, this.newPassword)\n\n                this.$axios({\n                    url : '/createNewUser',\n                    method : 'post',\n                    data :\n                        {\n                            \"user\" : this.newUsername,\n                            \"password\" : this.newPassword\n                        }\n                }).then(response=>{\n                    this.username = this.newUsername;\n                    this.password = this.newPassword;\n                    this.newPassword = '';\n                    this.newUsername = '';\n                    console.log(response);\n                    if(response.status === 204)\n                    {\n\n                        this.$message(\n\n                            {\n                                type: 'warning',\n                                message: 'The username is existed !'\n                            });\n                        this.showLogin = true;\n                        this.dialog_createUser  = true;\n                        this.username = '';\n                        this.password = '';\n                    }\n                    else {\n\n                        this.$axios({\n                            url: '/getUserGraph',\n                            method: 'post',\n                            data:\n                                {\n                                    user: this.username,\n                                    password: this.password\n\n                                }\n                        }).then(response => {\n\n                            this.showLogin = false; // control the login status\n                            let user_nodes = response.data.nodes;\n                            let user_links = response.data.links;\n                            let change_node_type = user_nodes.map(function (element) {\n                                element.id = Number(element.id);\n                                return element\n                            });\n                            let change_link_type = user_links.map(function (element) {\n                                element.id = Number(element.id);\n                                element.source = Number(element.source);\n                                element.target = Number(element.target);\n                                return element\n                            });\n\n                            this.info.nodes = change_node_type;\n                            this.info.links = change_link_type;\n                            this.current_user = response.data.user;\n\n                            this.renderGraph(this.info)\n\n\n                        })\n                    }\n                })\n\n            },\n\n            getWikipedia:function(){\n\n\n\n\n\n                // this.$axios({\n                //\n                //     method : 'get',\n                //     url : '/getAllWikipediaArticles',\n                //     data: {}\n                // }).then(response=>{\n                //     console.log(response)\n                // })\n            },\n\n\n            handleShow:function(){\n\n                    this.centerDialogVisible=false;\n                    this.$axios({\n                        url:'/getUserGraph',\n                        method:'post',\n                        data:{\n                            // user : \"some_user\",\n                            // password: \"my_password\"\n                            user : this.username,\n                            password: this.password\n                        }\n\n                    }).then(response=>{\n                            this.showLogin=false;\n                            let user_nodes = response.data.nodes;\n                            let user_links = response.data.links;\n                            // let test = response.data;\n\n                            let change_node_type = user_nodes.map(function (element) {\n                                element.id = Number(element.id);\n                                return element\n                            });\n\n                            let change_link_type = user_links.map(function (element) {\n                                element.id = Number(element.id);\n                                element.source = Number(element.source);\n                                element.target = Number(element.target);\n                                return element\n                            });\n\n\n                            this.info.nodes = change_node_type;\n                            this.info.links = change_link_type;\n                            this.current_user = response.data.user;\n                            this.renderGraph(this.info)\n\n                    }).catch(error=>{\n                        this.showLogin = true;\n                        this.username = '';\n                        this.password = '';\n                    })\n\n\n            },\n\n            onTapLogin:function () {\n                this.centerDialogVisible=true\n            },\n\n            logout:function () {\n                this.showLogin = true;\n                this.username = '';\n                this.password = '';\n                this.info= {\n                    nodes:[],\n                        links:[]\n                };\n                this.renderGraph(this.info)\n            },\n\n            ////////////////////////////////////////////////////////////\n            // optionVisible_init_nodes:false,\n            // optionVisible_add_nodes:false,\n            // optionVisible_change_nodes:false,\n            // optionVisible_add_link:false,\n            // optionVisible_change_link:false,\n\n            showOption_add_nodes()\n            {\n\n\n                let inputContent = this.$refs.addNode.$children[0].value;\n                this.optionVisible_add_nodes = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n            showOption_init_nodes()\n            {\n                let inputContent = this.$refs.init.$children[0].value;\n\n                this.optionVisible_init_nodes = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n            showOption_change_nodes()\n            {\n                let inputContent = this.$refs.changeNodeName.$children[0].value;\n                this.optionVisible_change_nodes = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n\n            showOption_add_link()\n            {\n                let inputContent = this.$refs.addLink.$children[0].value;\n\n                this.optionVisible_add_link = inputContent.length >=2;\n                this.$forceUpdate()\n            },\n\n            showOption_change_link()\n            {\n\n                let inputContent = this.$refs.changeLinkName.$children[0].value;\n                this.optionVisible_change_link = inputContent.length >=2;\n\n                this.$forceUpdate()\n            },\n\n\n            selectBlur(e) {\n                // 意见类型\n                this.btnChangeEnable = true;\n                if (e.target.value !== '') {\n                    // this.$forceUpdate()   // 强制更新\n                }\n                this.$forceUpdate()\n                this.selectClear()\n            },\n\n            selectClear() {\n                this.node_value = '';\n                this.link_value = '';\n                this.new_node_name = '';\n                this.new_link_name = '';\n\n                this.optionVisible_init_nodes=false;\n                this.optionVisible_add_nodes=false;\n                this.optionVisible_change_nodes=false;\n                this.optionVisible_add_link=false;\n                this.optionVisible_change_link=false;\n\n\n\n                // let elements = document.getElementsByClassName('el-input__inner');\n                // elements[0].parentNode.removeChild(elements[0]);\n                // while(elements.length > 0){\n                //     elements[0].parentNode.removeChild(elements[0]);\n                // }\n\n                this.$forceUpdate()\n            },\n\n            selectChange(val) {\n\n                if(val !== '')\n                {\n                    this.btnChangeEnable = false\n                }\n                if(this.dialogFormVisible_link===true){\n                    this.link_value = val\n                }\n                else if (this.dialogFormVisible_change_link_name === true){\n                    this.new_link_name = val\n                }\n                else if (this.dialogFormVisible_change_node_name === true){\n                    this.new_node_name = val\n                }\n                else if(this.dialogFormVisible === true){\n                    this.node_value = val;\n                }\n                else if(this.dialogFormVisible_initGraph === true){\n                    this.init_node_value = val;\n                }\n                this.$forceUpdate()\n            },\n\n\n            cancel()\n            {\n                this.dialogFormVisible = false;\n                this.dialogFormVisible_link = false;\n                this.dialogFormVisible_change_node_name = false;\n                this.dialogFormVisible_change_link_name = false;\n\n                this.temp.length = 0;\n                this.newPassword = '';\n                this.newUsername = '';\n                this.btnChangeEnable = true;\n                this.dialogFormVisible_initGraph = false;\n\n                this.selectClear();\n\n            },\n            showInitGraph:function(){\n                this.dialogFormVisible_initGraph = true;\n            },\n            InitGraph:function()\n            {\n                console.log(this.info);\n                console.log(document.getElementById('init'));\n\n                console.log('add a start node');\n                let init_node= {\n                    \"id\": 0,\n                    \"type\" : \"node\",\n                    \"label\" : \"Device\",\n                    \"properties\":{\"name\":this.init_node_value}\n                };\n\n                this.dialogFormVisible_initGraph  = false;\n\n\n                this.info.nodes.push(init_node);\n\n\n                this.renderGraph(this.info);\n                this.selectClear();\n            },\n\n\n            addNodes(){\n\n                this.dialogFormVisible = false;\n                this.doubleClick(this.info, this.info.nodes, this.node_value);\n\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n                this.btnChangeEnable = true;\n                this.selectClear();\n\n\n            },\n\n            change_node_name(){\n\n                this.info.nodes[this.node_id].properties.name = this.new_node_name;\n                this.dialogFormVisible_change_node_name = false;\n\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n                this.btnChangeEnable = true;\n\n\n                this.renderGraph(this.info);\n                this.selectClear();\n\n            },\n\n\n            change_link_name()\n            {\n\n                this.info.links[this.link_id].label = this.new_link_name;\n                this.dialogFormVisible_change_link_name = false;\n\n                this.btnChangeEnable = true;\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n\n\n\n\n                this.renderGraph(this.info)\n                this.selectClear();\n            },\n\n            addLinks()\n            {\n                console.log('add link',this.optionVisible,this.optionVisible_link);\n\n                this.dialogFormVisible_link = false;\n\n                if (this.temp.length === 2) {\n                    this.singleClick(this.info, this.selected_Node, this.link_value);\n                }\n\n                this.$message(\n\n                    {\n                        type: 'success',\n                        message: 'Add Links!'\n                    });\n                this.btnChangeEnable = true;\n                // this.optionVisible = false;\n                // this.optionVisible_link = false;\n\n\n                this.selectClear()\n\n            },\n\n\n            renderGraph(info) {\n                // let temp = [];\n\n\n                console.log('render data',info);\n                if(this.showLogin === false && this.info.nodes.length === 0 )\n                {\n                    this.disable_initGraph = false;\n                }\n                else{\n                    this.disable_initGraph = true;\n                }\n                // this.disable_initGraph = this.info.nodes.length !== 0;\n\n                let {links, nodes} = info;\n\n                //关系分组\n                setLinkGroup(links);\n\n\n                d3.select(\"#graph\").html('');\n\n\n                let force = d3.layout.force()//layout将json格式转化为力学图可用的格式\n                    .nodes(nodes)//设定节点数组\n                    .links(links)//设定连线数组\n                    .linkDistance(500)//连接线长度\n                    .charge(-1500)//顶点的电荷数。该参数决定是排斥还是吸引，数值越小越互相排斥\n                    .on(\"tick\", function (){\n                            tick()\n                        },\n                    )//指时间间隔，隔一段时间刷新一次画面\n                    .start();//开始转换\n\n\n\n                let zoom = d3.behavior.zoom()\n                    .scaleExtent([.4, 2])\n                    .on(\"zoom\", zoomed);\n\n                let svg = d3.select(\"#graph\").append(\"svg\")\n                    .attr(\"pointer-event\", \"all\")\n                    .attr(\"preserveAspectRatio\", \"xMidYMid meet\")//自适应容器大小\n                    .attr(\"viewBox\", \"-460 -220 1200 1200\")\n                    // .on(\"dblclick\", doubleClick)\n                    .call(zoom);\n\n\n\n\n                // old_nodes = nodes;\n                let circle_g = svg.selectAll(\"circle\")\n                    .data(force.nodes())//表示使用force.nodes数据\n                    .enter()\n                    .append(\"g\")\n                    .attr(\"class\",function(node,i){\n                        return \"g_circle_\" + i; })//标记circle的父节点\n                    .style(\"cursor\",\"pointer\")\n                    .call(drag()) //将当前选中的元素传到drag函数中，使顶点可以被拖动\n                    .on(\"click\", (node, i,) => {\n                        if (d3.event.defaultPrevented) return;\n\n\n                        clearTimeout(this.clickTimeId);\n\n                        this.clickTimeId = setTimeout( ()=> {\n\n\n                                this.temp.push(node.index);\n                                console.log('liuliu',this.temp);\n                                if(this.temp.length === 2 && this.temp[0] !== this.temp[1]){\n                                    this.dialogFormVisible_link = true;\n\n                                }\n                                else if(this.temp.length === 2 && this.temp[0] === this.temp[1])\n                                {\n                                    this.temp.length = 0\n                                }\n                                // this.singleClick(info, node, temp, this.state2);\n                                clickStyle(node, i, this);\n                            }\n                            , 250);\n                    })\n\n                    .on('mouseover', (node) => {\n                        if (d3.event.defaultPrevented) return;\n                        this.showdetail_node = true;\n                        console.log(node);\n                        this.detailValue = node\n                        this.detailname = node.properties.name\n                        // showNodeInfo(node, this);\n                        // showCircleBorderOuterArc(node, i);\n                    })\n                    .on('mouseout',(node)=>{\n                        this.showdetail_node = false;\n                    })\n                    .on(\"dblclick\", (node, )=>{\n\n\n                        if (d3.event.defaultPrevented) return;\n                        clearTimeout(this.clickTimeId);\n                        this.dialogFormVisible = true;\n                        console.log(document.getElementsByClassName('el-input__inner'))\n                        // this.doubleClick(info, node, nodes, links)\n\n\n                    })\n                    .on('contextmenu',(d,node)=>{\n                        Menu(this.menu)(d, d3.event, node)\n\n                    });\n\n\n\n\n                svg.on(\"dblclick.zoom\", null);//取消svg和圆圈的双击放大事件（d3中默认开启7个事件，关闭防止与上面的双击事件冲突）\n                circle_g.on(\"dblclick.zoom\", null);\n\n\n\n                //单击改变节点颜色 表明选中\n                function clickStyle(node, i, _this){\n\n                    console.log(_this.ifClicked);\n                    // _this.ifClicked = true;\n\n\n                    circle_g.attr('node', function(n) {\n\n\n\n                        if(n.index === node.index && _this.ifClicked===false ) {\n                            d3.select('.g_circle_'+ n.index).select('circle').style('fill','red');\n                            console.log('haha',d3.select('.g_circle_'+ n.index).select('circle'));\n                            _this.ifClicked = true;\n                            console.log('新选的 true',_this.ifClicked);\n\n                        }\n                        else if(n.index === node.index && _this.ifClicked===true )\n                        {\n                            d3.select('.g_circle_'+ n.index).select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);});\n                            _this.ifClicked = false;\n                            console.log('重复选的颜色变回去 false',_this.ifClicked);\n\n                        }\n                        else if(n.index !== node.index) {\n                            console.log('node are different');\n                            d3.select('.g_circle_'+ n.index)\n                                .select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);})\n\n                        }\n                    });\n                }\n\n\n\n\n                //圆圈\n                let circle = circle_g.append(\"circle\")\n                    .style(\"stroke-width\", \"2px\")\n                    .attr(\"r\", 30)//设置圆圈半径\n                    .style(\"fill\", function (node) { return getCircleColor(node); });\n\n                let text = circle_g.append(\"text\")\n                    .attr(\"dy\", \".35em\")\n                    .attr(\"text-anchor\", \"middle\")//在圆圈中加上数据\n                    .style('fill', \"#FFFFFF\")\n                    .attr('x',function(d){ appendCircleText(d, this); });\n\n                //圆圈的提示文字\n                circle.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                text.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                //设置连接线\n                let defs = svg.append(\"defs\");\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"end\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n\n                defs.append(\"marker\")\n                    .attr(\"id\", \"start\")\n                    .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                    .attr(\"markerUnits\", \"userSpaceOnUse\")\n                    .attr(\"markerWidth\", 20)//标识的大小\n                    .attr(\"markerHeight\", 20)\n                    .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                    .attr(\"refX\", 0)//箭头坐标\n                    .attr(\"refY\", 0)\n                    .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                    .append(\"svg:path\")\n                    .attr(\"stroke-width\",5)//箭头宽度\n                    .attr(\"d\", \"M0,0L10,-5L10,5\")//箭头的路径\n                    .attr('fill', 'rgba(0,0,0, 2)');//箭头颜色\n\n                const edges_line = svg.append(\"g\").selectAll(\".edgepath\")\n                    .data(force.links())\n                    .enter()\n                    .append(\"path\")\n\n                    // .attr('marker-end', function(d,i) {\n                    //     console.log('lala',d.label,d.x_start)\n                    //     if (d.x_start < d.x_end) {\n                    //         console.log('source < end')\n                    //         return  \"url(#end)\";\n                    //     }\n                    //     return ''\n                    // })\n                    // .attr('marker-start', function(d,i) {\n                    //     if (d.x_start >= d.x_end) {\n                    //         console.log('source > end')\n                    //         return \"url(#start)\";\n                    //     }\n                    //     return ''\n                    //\n                    // })\n                    // .attr(\"marker-start\", \"url(#start)\")\n                    // .attr(\"marker-end\",  function (d, i) { return getMarkerArrow(i); })//根据箭头标记的id号标记箭头\n                    // .attr(\"marker-end\",  )//根据箭头标记的id号标记箭头\n                    .style(\"stroke\", 'black')\n                    .style(\"stroke-width\", 3)//线条粗细\n                    .style(\"fill-opacity\",0)\n                    .style(\"cursor\",\"pointer\")\n                    .attr(\"id\", function (d, i) { return 'edgepath' + i; })\n                    .on(\"mouseover\", function(d){ return getStrokeWidth(d); })\n                    .on(\"mouseout\", function() { edges_line.style(\"stroke-width\", 3) })\n                    // .on('click', (link) => { this.deleteLine(this.info,link); })\n                    .on('contextmenu',(d,link)=>{\n\n                        Menu(this.menu_edge)(d,d3.event,link)\n\n                    });\n\n                const edges_text = svg.append(\"g\").selectAll(\".edgetext\")\n                    .data(links)\n                    .enter()\n                    .append(\"text\")\n                    .style(\"pointer-events\", \"none\")\n                    .attr(\"class\",\"linetext\")\n                    .attr('text-anchor', \"middle\")\n                    .attr(\"fill-opacity\", 0.5)\n                    .style(\"cursor\",\"pointer\")\n\n                    .attr({'class': 'edgelabel',\n                        'id': function (d, i) { return 'edgepath' + i; },\n                        'dx': 190, 'dy': 20,\n                        'fill':'black',\n                        // 'transform': edge_text_Position()\n                    });\n\n\n\n                function edge_text_Position(){\n\n                    return 'rotate(180,40,5)'\n                }\n\n\n\n                //设置线条上的文字\n                edges_text.append('textPath')\n                    .attr('xlink:href', function (d, i) { return '#edgepath' + i })\n                    .attr(\"pointer-events\", \"none\")\n                    .attr(\"font-size\", 20)\n                    .text(function (d) { return d.label; });\n\n\n\n                // force.on(\"tick\", tick)//指时间间隔，隔一段时间刷新一次画面\n                //     .start();//开始转换\n                function zoomed() {//svg下的g标签移动大小\n                    svg.selectAll(\"g\").attr(\"transform\", \"translate(\"  +d3.event.translate + \")scale(\" +d3.event.scale + \")\");\n                }\n\n                function getMarkerArrow(i) {\n                    svg.append(\"defs\").append(\"marker\")   //箭头\n                        .attr(\"id\", \"arrow\"+i)\n                        .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                        .attr(\"markerUnits\", \"userSpaceOnUse\")\n                        .attr(\"markerWidth\", 20)//标识的大小\n                        .attr(\"markerHeight\", 20)\n                        .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                        .attr(\"refX\", 0)//箭头坐标\n                        .attr(\"refY\", 0)\n                        .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                        .append(\"svg:path\")\n                        .attr(\"stroke-width\",5)//箭头宽度\n                        .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                        .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n                    return \"url(#arrow_end\" + i + \")\";\n                }\n\n\n\n                function getStrokeWidth(d) {\n                    edges_line.style(\"stroke-width\", function (edge) {\n                        // return edge.relation.relationshipId === d.relation.relationshipId ? 3 : 1;\n                        return 6\n                    });\n                }\n\n                function drag(){//拖拽函数\n                    return force.drag().on(\"dragstart\",function(d){\n                        d3.event.sourceEvent.stopPropagation(); //取消默认事件\n                        d.fixed = true;//拖拽开始后设定被拖拽对象为固定\n                    });\n                }\n\n                function getCircleColor(node) {\n                    let color = {\n                        'Device': \"#FF9D00\",\n                        'Position': \"#C477E9\",\n                        'Work': '#67CAF4',\n                        'Install': '#BCDD73',\n                        'Application': '#DD1E9E',\n                        'Manufacturer': '#DDBA9E',\n                        'IotInfrastructure': '#6ca5dd',\n                        'DeviceAdmin': '#50DD87',\n                    };//圆圈背景色\n                    return color[node.label] || '#C477E9';\n                }\n\n                function appendCircleText(d, _this) {\n                    let circleText = '';\n                    if(d.type === 'node' && d.properties.name) {\n                        circleText = d.properties.name;\n                    } else if(d.label === 'Position') {\n                        circleText = d.positionCode;\n                    } else if (d.label === 'Application') {\n                        circleText = d.applicationName;\n                    } else if (d.label === 'Manufacturer') {\n                        circleText = d.manufacturerName;\n                    } else if (d.label === 'IotInfrastructure') {\n                        circleText = d.iotInfrastructureName;\n                    } else if (d.label === 'DeviceAdmin') {\n                        circleText = d.name;\n                    }\n                    //如果小于四个字符，不换行\n                    if(circleText && circleText.length > 14){\n                        circleText = circleText.substring(0,14) + \"...\";\n                        d3.select(_this).text(function(){return '';});\n                    }\n                    d3.select(_this).append('tspan').attr('x',0).attr('y',0).attr(\"font-size\", 10)\n                        .text(function(){ return circleText; });\n                }\n\n\n\n\n\n\n                function tick() {\n\n                    circle.attr(\"transform\", transform1);//圆圈\n                    text.attr(\"transform\", transform2);//顶点文字\n                    //link奇数有问题\n                    edges_line\n                        .attr('d', function (d) {\n\n                        return getNodesLine(d,edges_line,defs);//曲线路径\n\n                    });\n                    edges_line.attr('marker-end', function(d,i) {\n                            if (d.x_start < d.x_end) {\n                                return  \"url(#end)\";\n                            }\n                            return ''\n                        }).attr('marker-start', function(d,i) {\n                        if (d.x_start >= d.x_end) {\n                            return \"url(#start)\";\n                        }\n                        return ''\n\n                    })\n                    ;\n\n\n                }\n\n                //设置圆圈和文字的坐标\n                function transform1(d) {\n                    return \"translate(\" + d.x + \",\" + d.y + \")\";\n                }\n\n                function transform2(d) {\n                    return \"translate(\" + (d.x) + \",\" + d.y + \")\";\n                }\n\n\n\n                function Menu (menu, openCallback) {\n\n                    d3.event.preventDefault();\n\n                    d3.selectAll('.d3-context-menu').data([1])\n                        .enter()\n                        .append('div')\n                        .attr('class', 'd3-context-menu')\n\n                    // close menu\n                    d3.select('body').on('click.d3-context-menu', function () {\n                        d3.select('.d3-context-menu').style('display', 'none')\n                    });\n\n                    return (select, event, data)=> {\n\n\n\n                        let elm = this;\n\n\n                        d3.selectAll('.d3-context-menu').html('');\n                        let list = d3.selectAll('.d3-context-menu').append('ul');\n\n                        list.selectAll('li').data(menu).enter()\n                            .append('li')\n                            .html(function (d) {\n                                return d.title\n                            })\n                            .on('click', function (d) {\n\n\n                                d.action(data, select);\n\n                                d3.select('.d3-context-menu').style('display', 'none')\n                            });\n\n                        // the openCallback allows an action to fire before the menu is displayed\n                        // an example usage would be closing a tooltip\n                        if (openCallback) openCallback(data);\n\n                        // display context menu\n\n                        d3.select('.d3-context-menu')\n                            .style('left', (event.pageX - 2) + 'px')\n                            .style('top', (event.pageY - 2) + 'px')\n                            .style('display', 'block');\n                        d3.event.preventDefault();\n                        // return false\n                    }\n\n                }\n\n\n            },\n\n            doubleClick(info,nodes, input){\n\n\n                let new_node = {\n                    'id': nodes.length,\n                    \"type\": \"node\",\n                    'properties': {'name': input},\n                    'label':'Concept'\n                };\n\n                info.nodes.push(new_node);\n                this.renderGraph(info);\n\n\n            },\n\n            singleClick(info, node,input){\n                // let temp = [];\n\n                // let source = node.id;\n\n\n                if(this.temp.length ===2 && this.temp[0] !== this.temp[1] )\n                {\n\n\n                    let new_link = {\n                        \"source\": this.temp[0],\n                        \"target\": this.temp[1],\n                        \"type\": 'link',\n                        \"properties\": {},\n                        \"label\": input\n\n                    };\n\n                    info.links.push(new_link);\n                    console.log('new link added', info.links);\n                    this.temp.length = 0;\n                    this.renderGraph(info)\n\n                }\n                else if(this.temp.length ===2 && this.temp[0] === this.temp[1] )\n                {\n                    this.temp.length = 0;\n                }\n\n                if (this.temp.length ===0){\n                    this.renderGraph(info)\n                }\n\n                console.log('current select node id',this.temp)\n\n\n            },\n\n\n            submitData() {\n                console.log('submit data', this.info);\n                this.upload_nodes = this.info.nodes.map(function (element) {\n                    return {\n                        \"id\": String(element.id), \"type\": element.type, \"label\": element.label, \"properties\": {\n                            \"name\": element.properties.name\n                        }\n                    }\n\n                });\n                this.upload_links = this.info.links.map(function (element) {\n\n                    return {\n                        \"type\": element.type, \"id\": String(element.id), \"label\": element.label,\n                        \"source\": String(element.source.id), \"target\": String(element.target.id),\n                        \"properties\": element.properties\n                    }\n                });\n                //\n                console.log('nn', JSON.stringify(this.upload_nodes));\n                console.log('nn', JSON.stringify(this.upload_links));\n                let flag = true;\n                for (let i = 0; i < this.info.nodes.length; i++) {\n                    if (this.info.nodes[i].weight === 0) {\n                        flag = false;\n                    }\n                }\n\n                if (flag === false) {\n                    this.$message({\n                        'type': 'warning',\n                        'message': 'The node should have a least one link, please check it.'\n                    })\n                }\n                else{\n\n                this.$axios({\n                    headers: {\n                        'Content-Type': 'application/json;'\n                    },\n                    url: '/postUserGraph',\n                    method: 'post',\n                    data: {\n                        user: this.current_user,\n                        nodes: this.upload_nodes,\n                        // nodes:[\n                        //     {\n                        //         \"type\": \"node\",\n                        //         \"id\": \"0\",\n                        //         \"label\": \"Concept\",\n                        //         \"properties\": {\n                        //             \"name\": \"Innovation\"\n                        //         }\n                        //     },\n                        //     {\n                        //         \"type\": \"node\",\n                        //         \"id\": \"1\",\n                        //         \"label\": \"Concept\",\n                        //         \"properties\": {\n                        //             \"name\": \"Globalization\"\n                        //         }\n                        //     }],\n                        links: this.upload_links\n                        // links:  [\n                        //     {\n                        //         \"type\": \"link\",\n                        //         \"id\": \"0\",\n                        //         \"label\": \"benefits\",\n                        //         \"source\": \"0\",\n                        //         \"target\": \"1\",\n                        //         \"properties\": {}\n                        //     }\n                        // ]\n                    }\n\n\n                }).then(response => {\n                    console.log('success', response)\n                    this.$message({\n                        'type':'success',\n                        'message':'Submit Successfully!'\n                    })\n                    this.renderGraph(this.info)\n                })\n            }\n            },\n\n            reload(){\n                this.renderGraph(this.info)\n            },\n\n\n\n\n\n\n\n\n\n\n\n\n        }\n\n\n    }\n</script>\n\n<style>\n    #graph {\n        width: 100vw;\n        height: 100vh;\n    }\n\n    .d3-context-menu {\n        position: absolute;\n        display: none;\n        background-color: #f2f2f2;\n        border-radius: 4px;\n\n        font-family: Arial, sans-serif;\n        font-size: 14px;\n        min-width: 150px;\n        border: 1px solid #d4d4d4;\n\n        z-index:1200;\n    }\n\n    .d3-context-menu ul {\n        list-style-type: none;\n        margin: 4px 0px;\n        padding: 0px;\n        cursor: default;\n    }\n\n    .d3-context-menu ul li {\n        padding: 4px 16px;\n    }\n\n    .d3-context-menu ul li:hover {\n        background-color: #4677f8;\n        color: #fefefe;\n    }\n\n    #node_info {\n        position: absolute;\n        bottom: 40px;\n        right: 30px;\n        width: 270px;\n    }\n    #link_info {\n        position: absolute;\n        bottom: 40px;\n        right: 30px;\n        width: 270px;\n    }\n    .node-card {\n        border: 1px solid #9faecf;\n        background-color: #00aeff6b;\n        color: #fff;\n        text-align: left;\n\n    }\n    .link-card {\n        border: 1px solid #9faecf;\n        background-color: #00aeff6b;\n        color: #fff;\n        text-align: left;\n\n    }\n    .el-card__header {\n        border-bottom: 1px solid #50596d;\n    }\n\n\n</style>\n\n"]}]}