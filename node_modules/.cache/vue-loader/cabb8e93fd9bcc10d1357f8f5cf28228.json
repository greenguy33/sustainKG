{"remainingRequest":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js??vue-loader-options!/Users/songqingyu/Documents/GitHub/sustainKG/src/components/home.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/src/components/home.vue","mtime":1626703492685},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_babel-loader@8.2.2@babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/songqingyu/Documents/GitHub/sustainKG/node_modules/_vue-loader@15.9.6@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKCmltcG9ydCAkIGZyb20gJ2pxdWVyeScKaW1wb3J0IHsKICAgIGdldE5vZGVTZWxmUGF0aCwKICAgIHNldExpbmtHcm91cCwKICAgIGdldE5vZGVzTGluZSx9IGZyb20gJy4uL3V0aWxzL2RldmljZVJlbGF0aW9uJwoKCgoKZXhwb3J0IGRlZmF1bHQgewoKCiAgICBkYXRhKCl7CgoKCiAgICAgICAgbGV0IGluZm8gPSB7CiAgICAgICAgICAgICJsaW5rcyI6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAic291cmNlIiA6IDAsCiAgICAgICAgICAgICAgICAgICAgInRhcmdldCIgOiAxLAogICAgICAgICAgICAgICAgICAgICJ0eXBlIiA6ICJsaW5rIiwKICAgICAgICAgICAgICAgICAgICAnbGFiZWwnOiAnTGluayBURVNUJywKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6e30KCiAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgXSwKICAgICAgICAgICAgIm5vZGVzIjogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJpZCI6IDAsCiAgICAgICAgICAgICAgICAgICAgInR5cGUiIDogIm5vZGUiLAogICAgICAgICAgICAgICAgICAgIC8vICJmYWN0b3J5Q29kZSIgOiAiaGVsbG8iLAogICAgICAgICAgICAgICAgICAgICJsYWJlbCIgOiAiRGV2aWNlIiwKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6eyJuYW1lIjoiaGVsbG8ifQogICAgICAgICAgICAgICAgICAgIC8vICJsaW5rSWQiOiAxCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICJpZCI6IDEsCiAgICAgICAgICAgICAgICAgICAgInR5cGUiIDogIm5vZGUiLAogICAgICAgICAgICAgICAgICAgIC8vICJmYWN0b3J5Q29kZSI6ICJXaWxsIiwKICAgICAgICAgICAgICAgICAgICAibGFiZWwiOiAiRGV2aWNlIiwKICAgICAgICAgICAgICAgICAgICAicHJvcGVydGllcyI6eyJuYW1lIjoid2lsbCJ9CiAgICAgICAgICAgICAgICAgICAgLy8gImxpbmtJZCI6IDAKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgImlkIjogMiwKICAgICAgICAgICAgICAgICAgICAidHlwZSIgOiAibm9kZSIsCiAgICAgICAgICAgICAgICAgICAgLy8gImZhY3RvcnlDb2RlIjogImxhbGEiLAogICAgICAgICAgICAgICAgICAgICJsYWJlbCI6ICJEZXZpY2UiLAogICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjp7Im5hbWUiOiJsYWxhIn0KICAgICAgICAgICAgICAgICAgICAvLyAibGlua0lkIjogMQogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgIF0KICAgICAgICB9OwoKCgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5vZGVfdmFsdWU6ICcnLAogICAgICAgICAgICBsaW5rX3ZhbHVlOicnLAogICAgICAgICAgICBidG5DaGFuZ2VFbmFibGU6IHRydWUsCiAgICAgICAgICAgIG5vZGVfbGlzdDogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbm9kZTEnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbm9kZTEnCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdub2RlMicsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdub2RlMicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCiAgICAgICAgICAgIGxpbmtfbGlzdDogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnbGluazEnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAnbGluazEnCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgdmFsdWU6ICdsaW5rMicsCiAgICAgICAgICAgICAgICAgICAgbGFiZWw6ICdsaW5rMicKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgXSwKCiAgICAgICAgICAgIGluZm86IGluZm8sCiAgICAgICAgICAgIGlmQ2xpY2tlZDpmYWxzZSwKCiAgICAgICAgICAgIHNlbGVjdGVkX05vZGU6ICcnLAoKICAgICAgICAgICAgZGlhbG9nRm9ybVZpc2libGU6ZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlX2xpbms6ZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWU6ZmFsc2UsCiAgICAgICAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9saW5rX25hbWU6ZmFsc2UsCiAgICAgICAgICAgIHRlbXAgOiBbXSwKICAgICAgICAgICAgY2xpY2tUaW1lSWQgOiAwLAoKICAgICAgICAgICAgbm9kZV9pZDogJycsCiAgICAgICAgICAgIGxpbmtfaWQ6ICcnLAogICAgICAgICAgICBuZXdfbGlua19uYW1lOicnLAogICAgICAgICAgICBuZXdfbm9kZV9uYW1lOicnLAoKICAgICAgICAgICAgbWVudTogWwogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRGVsZXRlIE5vZGVzJywKICAgICAgICAgICAgICAgICAgICBhY3Rpb246IChub2RlLHNlbGVjdF9ub2RlKSA9PiB7CgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRjb25maXJtKCJEZWxldGUgdGhpcyBub2RlPyIsICJUaXBzIiwgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICJZZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIk5vIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICJ3YXJuaW5nIiwKICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKAoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoZSBub2RlIGlzIGRlbGV0ZWQhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rlc3QgISEhJyxzZWxlY3Rfbm9kZSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8ubm9kZXMuc3BsaWNlKHNlbGVjdF9ub2RlLmluZGV4LDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKGxldCBpID1pbmZvLmxpbmtzLmxlbmd0aC0xOyBpPj0wOyBpLS0gKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsaW5rIGluZGV4JyxpLG5vZGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGluZm8ubGlua3NbaV0uc291cmNlID09PSBzZWxlY3Rfbm9kZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB8fCBpbmZvLmxpbmtzW2ldLnRhcmdldCA9PT0gc2VsZWN0X25vZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZvLmxpbmtzLnNwbGljZShpLDEpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2FmdGVyIGRlbGV0ZScsIGluZm8pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CgogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NhbmNlbCBEZWxldGUhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB9LAoKCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnQ2hhbmdlIE5vZGUgTmFtZScsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOihub2RlX2lkKT0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm5vZGVfaWQgPSBub2RlX2lkOwoKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICBdLAoKICAgICAgICAgICAgbWVudV9lZGdlOlsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0RlbGV0ZSBMaW5rcycsCiAgICAgICAgICAgICAgICAgICAgYWN0aW9uOiAobGluayxzZWxlY3RlZF9saW5rKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsbCcsbGluayxzZWxlY3RlZF9saW5rKTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kY29uZmlybSgiRGVsZXRlIHRoaXMgbGluaz8iLCAiVGlwcyIsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICJObyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAid2FybmluZyIsCiAgICAgICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSgKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdUaGUgbGluayBpcyBkZWxldGVkIScKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZm8ubGlua3Muc3BsaWNlKGxpbmssMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CgogICAgICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0NhbmNlbCBEZWxldGUhJwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdDaGFuZ2UgbGluayBOYW1lJywKICAgICAgICAgICAgICAgICAgICBhY3Rpb246KGxpbmtfaWQpPT4KICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX2xpbmtfbmFtZSA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubGlua19pZCA9IGxpbmtfaWQ7CgogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIF0sCgoKCiAgICAgICAgfQogICAgfSwKCiAgICBtb3VudGVkKCkgewoKICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CgogICAgfSwKCiAgICBtZXRob2RzOiB7CgoKICAgICAgICBzZWxlY3RCbHVyKGUpIHsKICAgICAgICAgICAgLy8g5oSP6KeB57G75Z6LCiAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gdHJ1ZTsKICAgICAgICAgICAgaWYgKGUudGFyZ2V0LnZhbHVlICE9PSAnJykgewoKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBzZWxlY3Rpb24nLGUudGFyZ2V0LnZhbHVlKTsKICAgICAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkgICAvLyDlvLrliLbmm7TmlrAKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCkKICAgICAgICB9LAoKICAgICAgICBzZWxlY3RDbGVhcigpIHsKICAgICAgICAgICAgdGhpcy5ub2RlX3ZhbHVlID0gJyc7CiAgICAgICAgICAgIHRoaXMubGlua192YWx1ZSA9ICcnOwogICAgICAgICAgICB0aGlzLm5ld19ub2RlX25hbWUgPSAnJzsKICAgICAgICAgICAgdGhpcy5uZXdfbGlua19uYW1lID0gJyc7CiAgICAgICAgICAgIHRoaXMuJGZvcmNlVXBkYXRlKCkKICAgICAgICB9LAoKICAgICAgICBzZWxlY3RDaGFuZ2UodmFsKSB7CiAgICAgICAgICAgIGlmKHZhbCAhPT0gJycpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbms9PT10cnVlKXsKICAgICAgICAgICAgICAgIHRoaXMubGlua192YWx1ZSA9IHZhbAogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZGlhbG9nRm9ybVZpc2libGVfY2hhbmdlX2xpbmtfbmFtZSA9PT0gdHJ1ZSl7CiAgICAgICAgICAgICAgICB0aGlzLm5ld19saW5rX25hbWUgPSB2YWwKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPT09IHRydWUpewogICAgICAgICAgICAgICAgdGhpcy5uZXdfbm9kZV9uYW1lID0gdmFsCiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZih0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID09PSB0cnVlKXsKICAgICAgICAgICAgICAgIHRoaXMubm9kZV92YWx1ZSA9IHZhbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLiRmb3JjZVVwZGF0ZSgpCiAgICAgICAgfSwKCgogICAgICAgIGNhbmNlbCgpCiAgICAgICAgewogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGVfbGluayA9IGZhbHNlOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9ub2RlX25hbWUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2VfbGlua19uYW1lID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKTsKICAgICAgICAgICAgdGhpcy50ZW1wLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIHRoaXMuYnRuQ2hhbmdlRW5hYmxlID0gdHJ1ZTsKICAgICAgICB9LAoKICAgICAgICBhZGROb2RlcygpewogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZG91YmxlQ2xpY2sodGhpcy5pbmZvLCB0aGlzLmluZm8ubm9kZXMsIHRoaXMubm9kZV92YWx1ZSk7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKQogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CgogICAgICAgIH0sCgogICAgICAgIGNoYW5nZV9ub2RlX25hbWUoKXsKCiAgICAgICAgICAgIHRoaXMuaW5mby5ub2Rlc1t0aGlzLm5vZGVfaWRdLnByb3BlcnRpZXMubmFtZSA9IHRoaXMubmV3X25vZGVfbmFtZTsKICAgICAgICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZV9jaGFuZ2Vfbm9kZV9uYW1lID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2xlYXIoKTsKICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbyk7CiAgICAgICAgfSwKCgogICAgICAgIGNoYW5nZV9saW5rX25hbWUoKQogICAgICAgIHsKCiAgICAgICAgICAgIHRoaXMuaW5mby5saW5rc1t0aGlzLmxpbmtfaWRdLmxhYmVsID0gdGhpcy5uZXdfbGlua19uYW1lOwogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2NoYW5nZV9saW5rX25hbWUgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5zZWxlY3RDbGVhcigpOwogICAgICAgICAgICB0aGlzLmJ0bkNoYW5nZUVuYWJsZSA9IHRydWU7CiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgodGhpcy5pbmZvKQogICAgICAgIH0sCgogICAgICAgIGFkZExpbmtzKCkKICAgICAgICB7CgogICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbmsgPSBmYWxzZTsKCiAgICAgICAgICAgIGlmICh0aGlzLnRlbXAubGVuZ3RoID09PSAyKSB7CiAgICAgICAgICAgICAgICB0aGlzLnNpbmdsZUNsaWNrKHRoaXMuaW5mbywgdGhpcy5zZWxlY3RlZF9Ob2RlLCB0aGlzLmxpbmtfdmFsdWUpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLiRtZXNzYWdlKAoKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0FkZCBMaW5rcyEnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy5idG5DaGFuZ2VFbmFibGUgPSB0cnVlOwogICAgICAgICAgICB0aGlzLnNlbGVjdENsZWFyKCkKCiAgICAgICAgfSwKCgogICAgICAgIHJlbmRlckdyYXBoKGluZm8pIHsKICAgICAgICAgICAgLy8gbGV0IHRlbXAgPSBbXTsKCgogICAgICAgICAgICBjb25zb2xlLmxvZygncmVuZGVyIGRhdGEnLGluZm8pOwogICAgICAgICAgICBsZXQge2xpbmtzLCBub2Rlc30gPSBpbmZvOwoKICAgICAgICAgICAgLy/lhbPns7vliIbnu4QKICAgICAgICAgICAgc2V0TGlua0dyb3VwKGxpbmtzKTsKCiAgICAgICAgICAgIC8v54K55Ye76IqC54K55ZCO5by55Ye655qE54Gw6Imy5ZyG5ZyI5Lul5Y+K5Zu+5qCH55qE5a6a5LmJ77yM5YiG5Li65LiJ57uE44CQMS7liKDpmaTjgIEyLuiBlOezu+OAgTMu6Kej6Zmk5L2N572u6ZSB5a6a44CRCiAgICAgICAgICAgIGxldCBbcmVtb3ZlUGF0aCxyZW1vdmVfcmVjdDEscmVtb3ZlX3JlY3QyLHJlbW92ZV9saW5lMSxyZW1vdmVfbGluZTIscmVtb3ZlX2xpbmUzXSA9IFtudWxsXTsKICAgICAgICAgICAgbGV0IFt1bmxvY2tQYXRoLHVubG9ja19wYXRoMSx1bmxvY2tfcmVjdDEsdW5sb2NrX2xpbmUxXSA9IFtudWxsXTsKICAgICAgICAgICAgbGV0IFtoaWRlUGF0aCxoaWRlX3BhdGgxLGhpZGVfcGF0aDIsaGlkZV9wYXRoMyxoaWRlX3BhdGg0LGhpZGVfY2lyY2xlMSxoaWRlX2xpbmUxXSA9IFtudWxsXTsKICAgICAgICAgICAgbGV0IHJpZ2h0QXJjID0gZDMuc3ZnLmFyYygpLm91dGVyUmFkaXVzKDYwKS5pbm5lclJhZGl1cygzMCkuc3RhcnRBbmdsZSgwKS5lbmRBbmdsZSgxLjg1KTsKICAgICAgICAgICAgbGV0IGxlZnRBcmMgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMoNjApLmlubmVyUmFkaXVzKDMwKS5zdGFydEFuZ2xlKDQuNSkuZW5kQW5nbGUoNi4yMyk7CiAgICAgICAgICAgIGxldCBib3R0b21BcmMgPSBkMy5zdmcuYXJjKCkub3V0ZXJSYWRpdXMoNjApLmlubmVyUmFkaXVzKDMwKS5zdGFydEFuZ2xlKDEuOSkuZW5kQW5nbGUoNC40NSk7CgogICAgICAgICAgICBkMy5zZWxlY3QoIiNncmFwaCIpLmh0bWwoJycpOwoKCiAgICAgICAgICAgIGxldCBmb3JjZSA9IGQzLmxheW91dC5mb3JjZSgpLy9sYXlvdXTlsIZqc29u5qC85byP6L2s5YyW5Li65Yqb5a2m5Zu+5Y+v55So55qE5qC85byPCiAgICAgICAgICAgICAgICAubm9kZXMobm9kZXMpLy/orr7lrproioLngrnmlbDnu4QKICAgICAgICAgICAgICAgIC5saW5rcyhsaW5rcykvL+iuvuWumui/nue6v+aVsOe7hAogICAgICAgICAgICAgICAgLmxpbmtEaXN0YW5jZSg1MDApLy/ov57mjqXnur/plb/luqYKICAgICAgICAgICAgICAgIC5jaGFyZ2UoLTE1MDApLy/pobbngrnnmoTnlLXojbfmlbDjgILor6Xlj4LmlbDlhrPlrprmmK/mjpLmlqXov5jmmK/lkLjlvJXvvIzmlbDlgLzotorlsI/otorkupLnm7jmjpLmlqUKICAgICAgICAgICAgICAgIC5vbigidGljayIsIGZ1bmN0aW9uICgpewogICAgICAgICAgICAgICAgICAgICAgICB0aWNrKCkKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgKS8v5oyH5pe26Ze06Ze06ZqU77yM6ZqU5LiA5q615pe26Ze05Yi35paw5LiA5qyh55S76Z2iCiAgICAgICAgICAgICAgICAuc3RhcnQoKTsvL+W8gOWni+i9rOaNogoKCgogICAgICAgICAgICBsZXQgem9vbSA9IGQzLmJlaGF2aW9yLnpvb20oKQogICAgICAgICAgICAgICAgLnNjYWxlRXh0ZW50KFsuNCwgMl0pCiAgICAgICAgICAgICAgICAub24oInpvb20iLCB6b29tZWQpOwoKICAgICAgICAgICAgbGV0IHN2ZyA9IGQzLnNlbGVjdCgiI2dyYXBoIikuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAgICAgLmF0dHIoInBvaW50ZXItZXZlbnQiLCAiYWxsIikKICAgICAgICAgICAgICAgIC5hdHRyKCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwgInhNaWRZTWlkIG1lZXQiKS8v6Ieq6YCC5bqU5a655Zmo5aSn5bCPCiAgICAgICAgICAgICAgICAuYXR0cigidmlld0JveCIsICItNDYwIC0yMjAgMTIwMCAxMjAwIikKICAgICAgICAgICAgICAgIC8vIC5vbigiZGJsY2xpY2siLCBkb3VibGVDbGljaykKICAgICAgICAgICAgICAgIC5jYWxsKHpvb20pOwoKCgoKICAgICAgICAgICAgLy8gb2xkX25vZGVzID0gbm9kZXM7CiAgICAgICAgICAgIGxldCBjaXJjbGVfZyA9IHN2Zy5zZWxlY3RBbGwoImNpcmNsZSIpCiAgICAgICAgICAgICAgICAuZGF0YShmb3JjZS5ub2RlcygpKS8v6KGo56S65L2/55SoZm9yY2Uubm9kZXPmlbDmja4KICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsZnVuY3Rpb24obm9kZSxpKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gImdfY2lyY2xlXyIgKyBpOyB9KS8v5qCH6K6wY2lyY2xl55qE54i26IqC54K5CiAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgLmNhbGwoZHJhZygpKSAvL+WwhuW9k+WJjemAieS4reeahOWFg+e0oOS8oOWIsGRyYWflh73mlbDkuK3vvIzkvb/pobbngrnlj6/ku6Xooqvmi5bliqgKICAgICAgICAgICAgICAgIC5vbigiY2xpY2siLCAobm9kZSwgaSwpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAoZDMuZXZlbnQuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygn6byg5qCH5Y2V5Ye7Jyx0aGlzLmNsaWNrVGltZUlkKTsKICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkMy5zZWxlY3QodGhpcykpCiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY2xpY2tUaW1lSWQpOwoKICAgICAgICAgICAgICAgICAgICB0aGlzLmNsaWNrVGltZUlkID0gc2V0VGltZW91dCggKCk9PiB7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coIum8oOagh+WNleWHuyIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoaXMuc2VsZWN0ZWRfTm9kZSA9IG5vZGU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmFkZExpbmtzKCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdzZWxlY3RlZF9Ob2RlJyx0aGlzLnNlbGVjdGVkX05vZGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXAucHVzaChub2RlLmluZGV4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsaXVsaXUnLHRoaXMudGVtcCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZih0aGlzLnRlbXAubGVuZ3RoID09PSAyICYmIHRoaXMudGVtcFswXSAhPT0gdGhpcy50ZW1wWzFdKXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlX2xpbmsgPSB0cnVlOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYodGhpcy50ZW1wLmxlbmd0aCA9PT0gMiAmJiB0aGlzLnRlbXBbMF0gPT09IHRoaXMudGVtcFsxXSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnRlbXAubGVuZ3RoID0gMAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhpcy5zaW5nbGVDbGljayhpbmZvLCBub2RlLCB0ZW1wLCB0aGlzLnN0YXRlMik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGlja1N0eWxlKG5vZGUsIGksIHRoaXMpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICwgMjUwKTsKICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgLy8gLm9uKCdtb3VzZW92ZXInLCAobm9kZSkgPT4gewogICAgICAgICAgICAgICAgLy8gICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47CiAgICAgICAgICAgICAgICAvLyAgICAgLy8gc2hvd05vZGVJbmZvKG5vZGUsIHRoaXMpOwogICAgICAgICAgICAgICAgLy8gICAgIC8vIHNob3dDaXJjbGVCb3JkZXJPdXRlckFyYyhub2RlLCBpKTsKICAgICAgICAgICAgICAgIC8vIH0pCiAgICAgICAgICAgICAgICAub24oImRibGNsaWNrIiwgKG5vZGUsICk9PnsKCgogICAgICAgICAgICAgICAgICAgIGlmIChkMy5ldmVudC5kZWZhdWx0UHJldmVudGVkKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2RvdWJsZSBjbGljaycsbm9kZXMpOwogICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmNsaWNrVGltZUlkKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5Y+M5Ye7Jyx0aGlzLmNsaWNrVGltZUlkKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAvLyB0aGlzLmRvdWJsZUNsaWNrKGluZm8sIG5vZGUsIG5vZGVzLCBsaW5rcykKCgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC5vbignY29udGV4dG1lbnUnLChkLG5vZGUpPT57CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vZGUhISEhIScsZCxub2RlKTsKICAgICAgICAgICAgICAgICAgICBNZW51KHRoaXMubWVudSkoZCwgZDMuZXZlbnQsIG5vZGUpCgogICAgICAgICAgICAgICAgfSk7CgoKCgogICAgICAgICAgICBzdmcub24oImRibGNsaWNrLnpvb20iLCBudWxsKTsvL+WPlua2iHN2Z+WSjOWchuWciOeahOWPjOWHu+aUvuWkp+S6i+S7tu+8iGQz5Lit6buY6K6k5byA5ZCvN+S4quS6i+S7tu+8jOWFs+mXremYsuatouS4juS4iumdoueahOWPjOWHu+S6i+S7tuWGsueqge+8iQogICAgICAgICAgICBjaXJjbGVfZy5vbigiZGJsY2xpY2suem9vbSIsIG51bGwpOwoKCgogICAgICAgICAgICAvL+WNleWHu+aUueWPmOiKgueCueminOiJsiDooajmmI7pgInkuK0KICAgICAgICAgICAgZnVuY3Rpb24gY2xpY2tTdHlsZShub2RlLCBpLCBfdGhpcyl7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coX3RoaXMuaWZDbGlja2VkKTsKICAgICAgICAgICAgICAgIC8vIF90aGlzLmlmQ2xpY2tlZCA9IHRydWU7CgoKICAgICAgICAgICAgICAgIGNpcmNsZV9nLmF0dHIoJ25vZGUnLCBmdW5jdGlvbihuKSB7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjbGljayBjaGFuZ2UgY29sb3InLG4uaWQsbm9kZS5pZCk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdGVkIG5vZGUnLG4uaW5kZXgsbm9kZS5pbmRleCk7CgogICAgICAgICAgICAgICAgICAgIGlmKG4uaW5kZXggPT09IG5vZGUuaW5kZXggJiYgX3RoaXMuaWZDbGlja2VkPT09ZmFsc2UgKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIG4uaW5kZXgpLnNlbGVjdCgnY2lyY2xlJykuc3R5bGUoJ2ZpbGwnLCdyZWQnKTsKICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pyJ6Zeu6aKY77yB77yB77yB77yB77yB77yB77yBCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdoYWhhJyxkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBuLmluZGV4KS5zZWxlY3QoJ2NpcmNsZScpKTsKICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuaWZDbGlja2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+aWsOmAieeahCB0cnVlJyxfdGhpcy5pZkNsaWNrZWQpOwoKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZihuLmluZGV4ID09PSBub2RlLmluZGV4ICYmIF90aGlzLmlmQ2xpY2tlZD09PXRydWUgKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgbi5pbmRleCkuc2VsZWN0KCdjaXJjbGUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGdldENpcmNsZUNvbG9yKG5vZGUpO30pOwogICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5pZkNsaWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+mHjeWkjemAieeahOminOiJsuWPmOWbnuWOuyBmYWxzZScsX3RoaXMuaWZDbGlja2VkKTsKCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYobi5pbmRleCAhPT0gbm9kZS5pbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbm9kZSBhcmUgZGlmZmVyZW50Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIG4uaW5kZXgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2VsZWN0KCdjaXJjbGUnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCdmaWxsJywgZnVuY3Rpb24gKG5vZGUpIHsgcmV0dXJuIGdldENpcmNsZUNvbG9yKG5vZGUpO30pCgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgoKCgogICAgICAgICAgICAvL+WchuWciAogICAgICAgICAgICBsZXQgY2lyY2xlID0gY2lyY2xlX2cuYXBwZW5kKCJjaXJjbGUiKQogICAgICAgICAgICAgICAgLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAiMnB4IikKICAgICAgICAgICAgICAgIC5hdHRyKCJyIiwgMzUpLy/orr7nva7lnIblnIjljYrlvoQKICAgICAgICAgICAgICAgIC5zdHlsZSgiZmlsbCIsIGZ1bmN0aW9uIChub2RlKSB7IHJldHVybiBnZXRDaXJjbGVDb2xvcihub2RlKTsgfSk7CgogICAgICAgICAgICBsZXQgdGV4dCA9IGNpcmNsZV9nLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgICAgICAuYXR0cigiZHkiLCAiLjM1ZW0iKQogICAgICAgICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpLy/lnKjlnIblnIjkuK3liqDkuIrmlbDmja4KICAgICAgICAgICAgICAgIC5zdHlsZSgnZmlsbCcsICIjRkZGRkZGIikKICAgICAgICAgICAgICAgIC5hdHRyKCd4JyxmdW5jdGlvbihkKXsgYXBwZW5kQ2lyY2xlVGV4dChkLCB0aGlzKTsgfSk7CgogICAgICAgICAgICAvL+WchuWciOeahOaPkOekuuaWh+WtlwogICAgICAgICAgICBjaXJjbGUuYXBwZW5kKCJzdmc6dGl0bGUiKS50ZXh0KGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9kZSc6IHJldHVybiBub2RlLnByb3BlcnRpZXMubmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdEZXZpY2UnOiByZXR1cm4gbm9kZS5mYWN0b3J5Q29kZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdBcHBsaWNhdGlvbic6IHJldHVybiBub2RlLmFwcGxpY2F0aW9uTmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdQb3NpdGlvbic6IHJldHVybiBub2RlLnBvc2l0aW9uQ29kZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdNYW51ZmFjdHVyZXInOiByZXR1cm4gbm9kZS5tYW51ZmFjdHVyZXJOYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0lvdEluZnJhc3RydWN0dXJlJzogcmV0dXJuIG5vZGUuaW90SW5mcmFzdHJ1Y3R1cmVOYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0RldmljZUFkbWluJzogcmV0dXJuIG5vZGUubmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRleHQuYXBwZW5kKCJzdmc6dGl0bGUiKS50ZXh0KGZ1bmN0aW9uKG5vZGUpIHsKICAgICAgICAgICAgICAgIHN3aXRjaCAobm9kZS50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnbm9kZSc6IHJldHVybiBub2RlLnByb3BlcnRpZXMubmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdEZXZpY2UnOiByZXR1cm4gbm9kZS5mYWN0b3J5Q29kZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdBcHBsaWNhdGlvbic6IHJldHVybiBub2RlLmFwcGxpY2F0aW9uTmFtZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdQb3NpdGlvbic6IHJldHVybiBub2RlLnBvc2l0aW9uQ29kZTsKICAgICAgICAgICAgICAgICAgICAvLyBjYXNlICdNYW51ZmFjdHVyZXInOiByZXR1cm4gbm9kZS5tYW51ZmFjdHVyZXJOYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0lvdEluZnJhc3RydWN0dXJlJzogcmV0dXJuIG5vZGUuaW90SW5mcmFzdHJ1Y3R1cmVOYW1lOwogICAgICAgICAgICAgICAgICAgIC8vIGNhc2UgJ0RldmljZUFkbWluJzogcmV0dXJuIG5vZGUubmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8v6K6+572u6L+e5o6l57q/CiAgICAgICAgICAgIGNvbnN0IGVkZ2VzX2xpbmUgPSBzdmcuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIuZWRnZXBhdGgiKQogICAgICAgICAgICAgICAgLmRhdGEoZm9yY2UubGlua3MoKSkKICAgICAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgICAgICAuYXBwZW5kKCJwYXRoIikKICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXItZW5kIiwgIGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiBnZXRNYXJrZXJBcnJvdyhpKTsgfSkvL+agueaNrueureWktOagh+iusOeahGlk5Y+35qCH6K6w566t5aS0CiAgICAgICAgICAgICAgICAuc3R5bGUoInN0cm9rZSIsICcjOWFhYWJmJykKICAgICAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlLXdpZHRoIiwgNCkvL+e6v+adoeeyl+e7hgogICAgICAgICAgICAgICAgLnN0eWxlKCJmaWxsLW9wYWNpdHkiLDApCiAgICAgICAgICAgICAgICAuc3R5bGUoImN1cnNvciIsInBvaW50ZXIiKQogICAgICAgICAgICAgICAgLmF0dHIoImlkIiwgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuICdlZGdlcGF0aCcgKyBpOyB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbihkKXsgcmV0dXJuIGdldFN0cm9rZVdpZHRoKGQpOyB9KQogICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgeyBlZGdlc19saW5lLnN0eWxlKCJzdHJva2Utd2lkdGgiLCAzKSB9KQogICAgICAgICAgICAgICAgLy8gLm9uKCdjbGljaycsIChsaW5rKSA9PiB7IHRoaXMuZGVsZXRlTGluZSh0aGlzLmluZm8sbGluayk7IH0pCiAgICAgICAgICAgICAgICAub24oJ2NvbnRleHRtZW51JywoZCxsaW5rKT0+ewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGQpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsaW5rISEhJyxsaW5rKQogICAgICAgICAgICAgICAgICAgIE1lbnUodGhpcy5tZW51X2VkZ2UpKGQsZDMuZXZlbnQsbGluaykKCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGNvbnN0IGVkZ2VzX3RleHQgPSBzdmcuYXBwZW5kKCJnIikuc2VsZWN0QWxsKCIuZWRnZXRleHQiKQogICAgICAgICAgICAgICAgLmRhdGEobGlua3MpCiAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgICAgICAuc3R5bGUoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKQogICAgICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwibGluZXRleHQiKQogICAgICAgICAgICAgICAgLmF0dHIoJ3RleHQtYW5jaG9yJywgIm1pZGRsZSIpCiAgICAgICAgICAgICAgICAuYXR0cigiZmlsbC1vcGFjaXR5IiwgMSkKICAgICAgICAgICAgICAgIC5zdHlsZSgiY3Vyc29yIiwicG9pbnRlciIpCiAgICAgICAgICAgICAgICAuYXR0cih7J2NsYXNzJzogJ2VkZ2VsYWJlbCcsICdpZCc6IGZ1bmN0aW9uIChkLCBpKSB7IHJldHVybiAnZWRnZXBhdGgnICsgaTsgfSwgJ2R4JzogMTUwLCAnZHknOiAyMCwgJ2ZpbGwnOicjOWFhYWJmJ30pOwoKICAgICAgICAgICAgLy/orr7nva7nur/mnaHkuIrnmoTmloflrZcKICAgICAgICAgICAgZWRnZXNfdGV4dC5hcHBlbmQoJ3RleHRQYXRoJykKICAgICAgICAgICAgICAgIC5hdHRyKCd4bGluazpocmVmJywgZnVuY3Rpb24gKGQsIGkpIHsgcmV0dXJuICcjZWRnZXBhdGgnICsgaSB9KQogICAgICAgICAgICAgICAgLmF0dHIoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKS5hdHRyKCJmb250LXNpemUiLCAxNSkKICAgICAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7IHJldHVybiBkLmxhYmVsOyB9KTsKCgogICAgICAgICAgICAvLyBmb3JjZS5vbigidGljayIsIHRpY2spLy/mjIfml7bpl7Tpl7TpmpTvvIzpmpTkuIDmrrXml7bpl7TliLfmlrDkuIDmrKHnlLvpnaIKICAgICAgICAgICAgLy8gICAgIC5zdGFydCgpOy8v5byA5aeL6L2s5o2iCiAgICAgICAgICAgIGZ1bmN0aW9uIHpvb21lZCgpIHsvL3N2Z+S4i+eahGfmoIfnrb7np7vliqjlpKflsI8KICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoImciKS5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgICtkMy5ldmVudC50cmFuc2xhdGUgKyAiKXNjYWxlKCIgK2QzLmV2ZW50LnNjYWxlICsgIikiKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0TWFya2VyQXJyb3coaSkgewogICAgICAgICAgICAgICAgc3ZnLmFwcGVuZCgiZGVmcyIpLmFwcGVuZCgibWFya2VyIikgICAvL+eureWktAogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJpZCIsICJhcnJvdyIraSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VyVW5pdHMiLCJzdHJva2VXaWR0aCIpLy/orr7nva7kuLpzdHJva2VXaWR0aOeureWktOS8mumaj+edgOe6v+eahOeyl+e7huWPkeeUn+WPmOWMlgogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJtYXJrZXJVbml0cyIsICJ1c2VyU3BhY2VPblVzZSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm1hcmtlcldpZHRoIiwgMTApLy/moIfor4bnmoTlpKflsI8KICAgICAgICAgICAgICAgICAgICAuYXR0cigibWFya2VySGVpZ2h0IiwgMTApCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInZpZXdCb3giLCAiMCAtNCAxMiAxNSIpLy/lnZDmoIfns7vnmoTljLrln58KICAgICAgICAgICAgICAgICAgICAuYXR0cigicmVmWCIsIDApLy/nrq3lpLTlnZDmoIcKICAgICAgICAgICAgICAgICAgICAuYXR0cigicmVmWSIsIDApCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIm9yaWVudCIsICdhdXRvJykvL+e7mOWItuaWueWQke+8jOWPr+iuvuWumuS4uu+8mmF1dG/vvIjoh6rliqjnoa7orqTmlrnlkJHvvInlkowg6KeS5bqm5YC8CiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgic3ZnOnBhdGgiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLDEpLy/nrq3lpLTlrr3luqYKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsICJNMCwtNUwxMCwwTDAsNSIpLy/nrq3lpLTnmoTot6/lvoQKICAgICAgICAgICAgICAgICAgICAuYXR0cignZmlsbCcsICdyZ2JhKDAsMCwwLCAwLjQpJyk7Ly/nrq3lpLTpopzoibIKICAgICAgICAgICAgICAgIHJldHVybiAidXJsKCNhcnJvdyIgKyBpICsgIikiOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXRTdHJva2VXaWR0aChkKSB7CiAgICAgICAgICAgICAgICBlZGdlc19saW5lLnN0eWxlKCJzdHJva2Utd2lkdGgiLCBmdW5jdGlvbiAoZWRnZSkgewogICAgICAgICAgICAgICAgICAgIC8vIHJldHVybiBlZGdlLnJlbGF0aW9uLnJlbGF0aW9uc2hpcElkID09PSBkLnJlbGF0aW9uLnJlbGF0aW9uc2hpcElkID8gMyA6IDE7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDYKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBkcmFnKCl7Ly/mi5bmi73lh73mlbAKICAgICAgICAgICAgICAgIHJldHVybiBmb3JjZS5kcmFnKCkub24oImRyYWdzdGFydCIsZnVuY3Rpb24oZCl7CiAgICAgICAgICAgICAgICAgICAgZDMuZXZlbnQuc291cmNlRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7IC8v5Y+W5raI6buY6K6k5LqL5Lu2CiAgICAgICAgICAgICAgICAgICAgZC5maXhlZCA9IHRydWU7Ly/mi5bmi73lvIDlp4vlkI7orr7lrprooqvmi5bmi73lr7nosaHkuLrlm7rlrpoKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBjaXJjbGVDbGljayhub2RlLCBpLCBfdGhpcykgewogICAgICAgICAgICAgICAgLy/ojrflj5blvZPliY3oioLngrnmmK/lkKbljIXlkKvlnIbnjq8KICAgICAgICAgICAgICAgIGxldCBleGlzdGVkUmluZyA9IHN2Zy5zZWxlY3QoJy5nX2NpcmNsZV8nICsgaSkuc2VsZWN0QWxsKCcuZ19jaXJjbGVfcGF0aCcpOwogICAgICAgICAgICAgICAgLy/muIXpmaTkuIrkuKroioLngrnnmoTlnIblnIjku6Xlj4rlm77moIcKICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJy5nX2NpcmNsZV9wYXRoJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcucmVtb3ZlX2EnKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJy5oaWRlX2EnKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIHN2Zy5zZWxlY3RBbGwoJy51bmxvY2tfYScpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgaWYoZXhpc3RlZFJpbmcgJiYgZXhpc3RlZFJpbmdbMF0ubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgLy9zaG93Q2lyY2xlQm9yZGVyT3V0ZXJBcmMobm9kZSwgaSk7CiAgICAgICAgICAgICAgICAgICAgLy/nu5jliLbngbDoibLlj6/ngrnlh7vlnIblnIjvvIzliIbkuLrkuInpg6jliIbliIbliKvnu5jliLYKICAgICAgICAgICAgICAgICAgICBzaG93UmVtb3ZlKG5vZGUsIGksIF90aGlzKTsKICAgICAgICAgICAgICAgICAgICBzaG93VW5sb2NrKG5vZGUsIGksIF90aGlzKTsKICAgICAgICAgICAgICAgICAgICBzaG93SGlkZShub2RlLGksIF90aGlzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0Q2lyY2xlQ29sb3Iobm9kZSkgewogICAgICAgICAgICAgICAgbGV0IGNvbG9yID0gewogICAgICAgICAgICAgICAgICAgICdEZXZpY2UnOiAiI0ZGOUQwMCIsCiAgICAgICAgICAgICAgICAgICAgJ1Bvc2l0aW9uJzogIiNDNDc3RTkiLAogICAgICAgICAgICAgICAgICAgICdXb3JrJzogJyM2N0NBRjQnLAogICAgICAgICAgICAgICAgICAgICdJbnN0YWxsJzogJyNCQ0RENzMnLAogICAgICAgICAgICAgICAgICAgICdBcHBsaWNhdGlvbic6ICcjREQxRTlFJywKICAgICAgICAgICAgICAgICAgICAnTWFudWZhY3R1cmVyJzogJyNEREJBOUUnLAogICAgICAgICAgICAgICAgICAgICdJb3RJbmZyYXN0cnVjdHVyZSc6ICcjNmNhNWRkJywKICAgICAgICAgICAgICAgICAgICAnRGV2aWNlQWRtaW4nOiAnIzUwREQ4NycsCiAgICAgICAgICAgICAgICB9Oy8v5ZyG5ZyI6IOM5pmv6ImyCiAgICAgICAgICAgICAgICByZXR1cm4gY29sb3Jbbm9kZS5sYWJlbF0gfHwgJyNDNDc3RTknOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBhcHBlbmRDaXJjbGVUZXh0KGQsIF90aGlzKSB7CiAgICAgICAgICAgICAgICBsZXQgY2lyY2xlVGV4dCA9ICcnOwogICAgICAgICAgICAgICAgaWYoZC50eXBlID09PSAnbm9kZScgJiYgZC5wcm9wZXJ0aWVzLm5hbWUpIHsKICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gZC5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYoZC5sYWJlbCA9PT0gJ1Bvc2l0aW9uJykgewogICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLnBvc2l0aW9uQ29kZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5sYWJlbCA9PT0gJ0FwcGxpY2F0aW9uJykgewogICAgICAgICAgICAgICAgICAgIGNpcmNsZVRleHQgPSBkLmFwcGxpY2F0aW9uTmFtZTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZC5sYWJlbCA9PT0gJ01hbnVmYWN0dXJlcicpIHsKICAgICAgICAgICAgICAgICAgICBjaXJjbGVUZXh0ID0gZC5tYW51ZmFjdHVyZXJOYW1lOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmxhYmVsID09PSAnSW90SW5mcmFzdHJ1Y3R1cmUnKSB7CiAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGQuaW90SW5mcmFzdHJ1Y3R1cmVOYW1lOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChkLmxhYmVsID09PSAnRGV2aWNlQWRtaW4nKSB7CiAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGQubmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIC8v5aaC5p6c5bCP5LqO5Zub5Liq5a2X56ym77yM5LiN5o2i6KGMCiAgICAgICAgICAgICAgICBpZihjaXJjbGVUZXh0ICYmIGNpcmNsZVRleHQubGVuZ3RoID4gOCl7CiAgICAgICAgICAgICAgICAgICAgY2lyY2xlVGV4dCA9IGNpcmNsZVRleHQuc3Vic3RyaW5nKDAsOCkgKyAiLi4uIjsKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoX3RoaXMpLnRleHQoZnVuY3Rpb24oKXtyZXR1cm4gJyc7fSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoX3RoaXMpLmFwcGVuZCgndHNwYW4nKS5hdHRyKCd4JywwKS5hdHRyKCd5JywwKS5hdHRyKCJmb250LXNpemUiLCAxOCkKICAgICAgICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbigpeyByZXR1cm4gY2lyY2xlVGV4dDsgfSk7CiAgICAgICAgICAgIH0KCgoKCiAgICAgICAgICAgIGZ1bmN0aW9uIHRpY2soKSB7CgogICAgICAgICAgICAgICAgY2lyY2xlLmF0dHIoInRyYW5zZm9ybSIsIHRyYW5zZm9ybTEpOy8v5ZyG5ZyICiAgICAgICAgICAgICAgICB0ZXh0LmF0dHIoInRyYW5zZm9ybSIsIHRyYW5zZm9ybTIpOy8v6aG254K55paH5a2XCiAgICAgICAgICAgICAgICBlZGdlc19saW5lLmF0dHIoJ2QnLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgICAgIC8v57uY5Yi26Ieq5bex5oyH5ZCR6Ieq5bex55qE6Lev5b6ECiAgICAgICAgICAgICAgICAgICAgLy8gaWYoZC5yZWxhdGlvbi5pc1NlbGYpIHsgcmV0dXJuIGdldE5vZGVTZWxmUGF0aChkKSB9CiAgICAgICAgICAgICAgICAgICAgLy/nu5jliLbkuKTkuKroioLngrnkuYvpl7TnmoTot6/lvoQKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0Tm9kZXNMaW5lKGQpOy8v5puy57q/6Lev5b6ECiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAvLyBpZihjaXJjbGVCb3JkZXJPdXRlckFyY09iaiAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgLy8gICBjaXJjbGVCb3JkZXJPdXRlckFyY09iai5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCl7IHJldHVybiAidHJhbnNsYXRlKCIrZC54KyIsIitkLnkrIikiIH0pOwogICAgICAgICAgICAgICAgLy8gfQoKICAgICAgICAgICAgICAgIC8v57uY5Yi26IqC54K55Yig6Zmk5Yqf6IO95Y2K5ZyG546vCiAgICAgICAgICAgICAgICBpZihyZW1vdmVQYXRoICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlUGF0aC5hdHRyKCJ0cmFuc2Zvcm0iLCBmdW5jdGlvbiAoZCl7IHJldHVybiAidHJhbnNsYXRlKCIrZC54KyIsIitkLnkrIikiIH0pOwoKICAgICAgICAgICAgICAgICAgICBsZXQgcjEgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHJlbW92ZV9yZWN0MS5hdHRyKCdkJyxmdW5jdGlvbihkKSB7IHIxID0gZDsgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoIngiLHIxLnggKyAzMyArIDYuNzUpLmF0dHIoInkiLHIxLnkgIC0gMzYgKyA5Ljc1KS5hdHRyKCJ3aWR0aCIsNSkuYXR0cigiaGVpZ2h0IiwzKS5hdHRyKCJyeCIsMS41KS5hdHRyKCJyeSIsMS41KTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IHIyID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICByZW1vdmVfcmVjdDIuYXR0cignZCcsZnVuY3Rpb24oZCkgeyByMiA9IGQ7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4IixyMi54ICsgMzAgKyA2Ljc1KS5hdHRyKCJ5IixyMi55ICAtIDMzICsgOS43NSkuYXR0cigid2lkdGgiLDEyKS5hdHRyKCJoZWlnaHQiLDE0KS5hdHRyKCJyeCIsMS41KS5hdHRyKCJyeSIsMS41KTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IGwxID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICByZW1vdmVfbGluZTEuYXR0cignZCcsZnVuY3Rpb24oZCkgeyBsMSA9IGQ7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4MSIsbDEueCArIDI4ICsgNi43NSkuYXR0cigieTEiLGwxLnkgLSAzMyArIDkuNzUpLmF0dHIoIngyIixsMS54ICsgNDUgKyA2Ljc1KS5hdHRyKCJ5MiIsbDEueSAtIDMzICsgOS43NSk7CgogICAgICAgICAgICAgICAgICAgIGxldCBsMiA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlX2xpbmUyLmF0dHIoJ2QnLGZ1bmN0aW9uKGQpIHsgbDIgPSBkOyB9KQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigieDEiLGwyLnggKyAzNCArIDYuNzUpLmF0dHIoInkxIixsMi55IC0gMzAgKyA5Ljc1KS5hdHRyKCJ4MiIsbDIueCArIDM0ICsgNi43NSkuYXR0cigieTIiLGwyLnkgLSAyMyArIDkuNzUpOwoKICAgICAgICAgICAgICAgICAgICBsZXQgbDMgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIHJlbW92ZV9saW5lMy5hdHRyKCdkJyxmdW5jdGlvbihkKSB7IGwzID0gZDsgfSkKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoIngxIixsMy54ICsgMzggKyA2Ljc1KS5hdHRyKCJ5MSIsbDMueSAtIDMwICsgOS43NSkuYXR0cigieDIiLGwzLnggKyAzOCArIDYuNzUpLmF0dHIoInkyIixsMy55IC0gMjMgKyA5Ljc1KTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvL+e7mOWItuino+mZpOiKgueCueS9jee9rumUgeWumuWNiuWchueOrwogICAgICAgICAgICAgICAgaWYodW5sb2NrUGF0aCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIHVubG9ja1BhdGguYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpeyByZXR1cm4gInRyYW5zbGF0ZSgiK2QueCsiLCIrZC55KyIpIiB9KTsKICAgICAgICAgICAgICAgICAgICB1bmxvY2tfcGF0aDEuYXR0cigidHJhbnNmb3JtIiwgZnVuY3Rpb24gKGQpeyByZXR1cm4gInRyYW5zbGF0ZSgiKyAoZC54IC0gNDUpICsiLCIrIChkLnkgLSAyMykgKyIpIiB9KTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IHIxID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB1bmxvY2tfcmVjdDEuYXR0cignZCcsZnVuY3Rpb24oZCkgeyByMSA9IGQ7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4IixyMS54ICAtIDUyICsgNi43NSkuYXR0cigieSIscjEueSAtIDMwICsgOS43NSkuYXR0cigid2lkdGgiLDE1KS5hdHRyKCJoZWlnaHQiLDEyKS5hdHRyKCJyeCIsMS41KS5hdHRyKCJyeSIsMS41KTsKCiAgICAgICAgICAgICAgICAgICAgbGV0IGwxID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICB1bmxvY2tfbGluZTEuYXR0cignZCcsZnVuY3Rpb24oZCkgeyBsMSA9IGQ7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4MSIsbDEueCAgLSA1MiArIDE1KS5hdHRyKCJ5MSIsbDEueSAgLSAzMCArIDE1KS5hdHRyKCJ4MiIsbDEueCAgLSA1MiArMTUpLmF0dHIoInkyIixsMS55ICAtIDMwICsgMTgpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIC8v57uY5Yi26ZqQ6JeP6IqC54K55ZKM5YWz57O75Y2K5ZyG546vCiAgICAgICAgICAgICAgICBpZihoaWRlUGF0aCAhPT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgIGhpZGVQYXRoLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkKXsgcmV0dXJuICJ0cmFuc2xhdGUoIitkLngrIiwiK2QueSsiKSIgfSk7CgogICAgICAgICAgICAgICAgICAgIGhpZGVfcGF0aDEKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIk0iICsgKGQueCAtIDEzKSArICIsIiArIChkLnkgKyA0MikgKyAiQTE1LDE1LDAsMCwxIiArIChkLnggKyAxMykgKyAiLCIgKyAoZC55ICsgNDIpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGhpZGVfcGF0aDIKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIk0iKyAoZC54IC0gMTIgKyAxMC40KSArICIsIiArIChkLnkgKyAzNCArIDEwLjkzNykgKyAiQSIgKyAzLjc0OSArICIsIiArIDMuNzQ5ICsgIiwwLDEsMSwiICsgKGQueCAtIDEyICsgMTUuMzM4KSArICIsIiArIChkLnkgKyAzMyArIDkpCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGhpZGVfcGF0aDMKICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gIk0iICsgKGQueCAtIDEyKSArICIsIiArIChkLnkgKyA0MikgKyAiQTIwLDIwLDAsMCwwIiArIChkLnggLSA0KSArICIsIiArIChkLnkgKyA0NykKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgaGlkZV9wYXRoNAogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiTSIgKyAoZC54ICsgMTEpICsgIiwiICsgKGQueSArIDQ0KSArICJBMjAsMjAsMCwwLDAiICsgKGQueCArIDEzKSArICIsIiArIChkLnkgKyA0MikKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGxldCBjMSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgaGlkZV9jaXJjbGUxLmF0dHIoJ2QnLGZ1bmN0aW9uKGQpIHsgYzEgPSBkOyB9KQogICAgICAgICAgICAgICAgICAgICAgICAuYXR0cigiY3giLGMxLnggLSAxMiArIDE3LjE1KS5hdHRyKCJjeSIsYzEueSArIDMzICsgMTcuMjUpLmF0dHIoInIiLDYpOwoKICAgICAgICAgICAgICAgICAgICBsZXQgbDEgPSBudWxsOwogICAgICAgICAgICAgICAgICAgIGhpZGVfbGluZTEuYXR0cignZCcsZnVuY3Rpb24oZCkgeyBsMSA9IGQ7IH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ4MSIsbDEueCAtIDEyICsgMTQuMTUpLmF0dHIoInkxIixsMS55ICsgMzMgKyAxNy4yNSkuYXR0cigieDIiLGwxLnggLSAxMiArIDIwLjE1KS5hdHRyKCJ5MiIsbDEueSArIDMzICsgMTcuMjUpOwoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8v6K6+572u5ZyG5ZyI5ZKM5paH5a2X55qE5Z2Q5qCHCiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZm9ybTEoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuICJ0cmFuc2xhdGUoIiArIGQueCArICIsIiArIGQueSArICIpIjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNmb3JtMihkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gInRyYW5zbGF0ZSgiICsgKGQueCkgKyAiLCIgKyBkLnkgKyAiKSI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gc2hvd1JlbW92ZShub2RlLCBpLCBfdGhpcykgewogICAgICAgICAgICAgICAgcmVtb3ZlUGF0aCA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicGF0aCIpLmF0dHIoJ2NsYXNzJywgJ2dfY2lyY2xlX3BhdGgnKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyBub2RlLnggKyAiLCIgKyBub2RlLnkgKyAiKSIpLmF0dHIoImQiLCByaWdodEFyYykKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZmlsbCIsICJyZ2IoMjEwLCAyMTMsIDIxOCkiKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiY3Vyc29yIiwicG9pbnRlciIpCiAgICAgICAgICAgICAgICAgICAgLy8gLm9uKCJjbGljayIsICgpID0+IHsgcmVtb3ZlTm9kZUFuZFBhdGgobm9kZSwgX3RoaXMpOyB9KQogICAgICAgICAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24oKXsgcmVtb3ZlUGF0aC5hdHRyKCJmaWxsIiwgInJnYigxODUsIDE4NSwgMTg1KSIpIH0pCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uKCkgeyByZW1vdmVQYXRoLmF0dHIoImZpbGwiLCAicmdiKDIxMCwgMjEzLCAyMTgpIikgfSk7CgogICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCJyZW1vdmVfYSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIChub2RlLnggKyAzMykgKyAiLCIgKyAobm9kZS55IC0gMjQpICsgIikgc2NhbGUoMC43KSIpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiZGVmcyIpLmFwcGVuZCgic3R5bGUiKQogICAgICAgICAgICAgICAgICAgIC50ZXh0KCIucmVtb3ZlX2F7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDtzdHJva2Utd2lkdGg6MS41cHg7fSIpOwoKICAgICAgICAgICAgICAgIHJlbW92ZVBhdGguYXBwZW5kKCJ0aXRsZSIpLmF0dHIoImNsYXNzIiwicmVtb3ZlX2EiKS50ZXh0KCJSZW1vdmUiKTsKICAgICAgICAgICAgICAgIHJlbW92ZV9yZWN0MSA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicmVjdCIpLmF0dHIoImNsYXNzIiwicmVtb3ZlX2EiKS5hdHRyKCJ4Iixub2RlLnggKyAzMyArIDYuNzUpLmF0dHIoInkiLG5vZGUueSAgLSAzNiArIDkuNzUpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoIndpZHRoIiw1KS5hdHRyKCJoZWlnaHQiLDMpLmF0dHIoInJ4IiwxLjUpLmF0dHIoInJ5IiwxLjUpOwogICAgICAgICAgICAgICAgcmVtb3ZlX3JlY3QyID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJyZWN0IikuYXR0cigiY2xhc3MiLCJyZW1vdmVfYSIpLmF0dHIoIngiLG5vZGUueCArIDMwICsgNi43NSkuYXR0cigieSIsbm9kZS55ICAtIDMzICsgOS43NSkKICAgICAgICAgICAgICAgICAgICAuYXR0cigid2lkdGgiLDEyKS5hdHRyKCJoZWlnaHQiLDE0KS5hdHRyKCJyeCIsMS41KS5hdHRyKCJyeSIsMS41KTsKICAgICAgICAgICAgICAgIHJlbW92ZV9saW5lMSA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgibGluZSIpLmF0dHIoImNsYXNzIiwicmVtb3ZlX2EiKS5hdHRyKCJ4MSIsbm9kZS54ICsgMjggKyA2Ljc1KS5hdHRyKCJ5MSIsbm9kZS55IC0gMzMgKyA5Ljc1KS5hdHRyKCJ4MiIsbm9kZS54ICsgNDUgKyA2Ljc1KS5hdHRyKCJ5MiIsbm9kZS55IC0gMzMgKyA5Ljc1KTsKICAgICAgICAgICAgICAgIHJlbW92ZV9saW5lMiA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgibGluZSIpLmF0dHIoImNsYXNzIiwicmVtb3ZlX2EiKS5hdHRyKCJ4MSIsbm9kZS54ICsgMzQgKyA2Ljc1KS5hdHRyKCJ5MSIsbm9kZS55IC0gMzAgKyA5Ljc1KS5hdHRyKCJ4MiIsbm9kZS54ICsgMzQgKyA2Ljc1KS5hdHRyKCJ5MiIsbm9kZS55IC0gMjMgKyA5Ljc1KTsKICAgICAgICAgICAgICAgIHJlbW92ZV9saW5lMyA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgibGluZSIpLmF0dHIoImNsYXNzIiwicmVtb3ZlX2EiKS5hdHRyKCJ4MSIsbm9kZS54ICsgMzggKyA2Ljc1KS5hdHRyKCJ5MSIsbm9kZS55IC0gMzAgKyA5Ljc1KS5hdHRyKCJ4MiIsbm9kZS54ICsgMzggKyA2Ljc1KS5hdHRyKCJ5MiIsbm9kZS55IC0gMjMgKyA5Ljc1KTsKCiAgICAgICAgICAgICAgICAvLyBkMy5zZWxlY3RBbGwoIi5yZW1vdmVfYSIpLm9uKCJjbGljayIsICgpID0+IHsgcmVtb3ZlTm9kZUFuZFBhdGgobm9kZSwgX3RoaXMpOyB9KQogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBzaG93SGlkZShub2RlLGkpIHsKICAgICAgICAgICAgICAgIGhpZGVQYXRoID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJwYXRoIikuYXR0cignY2xhc3MnLCAnZ19jaXJjbGVfcGF0aCcpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIG5vZGUueCArICIsIiArIG5vZGUueSArICIpIikuYXR0cigiZCIsIGJvdHRvbUFyYykKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZmlsbCIsICJyZ2IoMjEwLCAyMTMsIDIxOCkiKQogICAgICAgICAgICAgICAgICAgIC5zdHlsZSgiY3Vyc29yIiwicG9pbnRlciIpCiAgICAgICAgICAgICAgICAgICAgLy8gLm9uKCJjbGljayIsIGZ1bmN0aW9uKCl7IGhpZGVOb2RlQW5kTGlua3Mobm9kZSkgfSkKICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uKCl7IGhpZGVQYXRoLmF0dHIoImZpbGwiLCAicmdiKDE4NSwgMTg1LCAxODUpIikgfSkKICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7IGhpZGVQYXRoLmF0dHIoImZpbGwiLCAicmdiKDIxMCwgMjEzLCAyMTgpIikgfSk7CgogICAgICAgICAgICAgICAgZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCJoaWRlX2EiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKCIgKyAobm9kZS54IC0gOCkgKyAiLCIgKyAobm9kZS55ICsgMzgpICsgIikgc2NhbGUoMC43KSIpCiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgiZGVmcyIpLmFwcGVuZCgic3R5bGUiKQogICAgICAgICAgICAgICAgICAgIC50ZXh0KCIuaGlkZV9he2ZpbGw6bm9uZTtzdHJva2U6I0ZGRkZGRjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLXdpZHRoOjEuNXB4O30iKTsKCiAgICAgICAgICAgICAgICBoaWRlUGF0aC5hcHBlbmQoInRpdGxlIikuYXR0cigiY2xhc3MiLCJoaWRlX2EiKS50ZXh0KCJIaWRlIik7CgogICAgICAgICAgICAgICAgaGlkZV9wYXRoMSA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwiaGlkZV9hIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJNIiArIChkLnggLSAxMykgKyAiLCIgKyAoZC55ICsgNDIpICsgIkExNSwxNSwwLDAsMSIgKyAoZC54ICsgMTMpICsgIiwiICsgKGQueSArIDQyKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaGlkZV9wYXRoMiA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwiaGlkZV9hIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJNIisgKGQueCAtIDEyICsgMTAuNCkgKyAiLCIgKyAoZC55ICsgMzQgKyAxMC45MzcpICsgIkEiICsgMy43NDkgKyAiLCIgKyAgMy43NDkgKyAiLDAsMSwxLCIgKyAoZC54IC0gMTIgKyAxNS4zMzgpICsgIiwiICsgKGQueSArIDMzICsgOSkKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGhpZGVfcGF0aDMgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInBhdGgiKS5hdHRyKCJjbGFzcyIsImhpZGVfYSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoImQiLCBmdW5jdGlvbihkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAiTSIgKyAoZC54IC0gMTIpICsgIiwiICsgKGQueSArIDQyKSArICJBMjAsMjAsMCwwLDAiICsgKGQueCAtIDQpICsgIiwiICsgKGQueSArIDQ3KQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaGlkZV9wYXRoNCA9IGQzLnNlbGVjdCgnLmdfY2lyY2xlXycrIGkpLmFwcGVuZCgicGF0aCIpLmF0dHIoImNsYXNzIiwiaGlkZV9hIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZCIsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICJNIiArIChkLnggKyAxMSkgKyAiLCIgKyAoZC55ICsgNDQpICsgIkEyMCwyMCwwLDAsMCIgKyAoZC54ICsgMTMpICsgIiwiICsgKGQueSArIDQyKQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgaGlkZV9jaXJjbGUxID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJjaXJjbGUiKS5hdHRyKCJjbGFzcyIsImhpZGVfYSIpLmF0dHIoImN4Iixub2RlLnggLSAxMiArIDE3LjE1KS5hdHRyKCJjeSIsbm9kZS55ICsgMzMgKyAxNy4yNSkuYXR0cigiciIsNik7CiAgICAgICAgICAgICAgICBoaWRlX2xpbmUxID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJsaW5lIikuYXR0cigiY2xhc3MiLCJoaWRlX2EiKS5hdHRyKCJ4MSIsbm9kZS54IC0gMTIgKyAxNC4xNSkuYXR0cigieTEiLG5vZGUueSArIDMzICsgMTcuMjUpLmF0dHIoIngyIixub2RlLnggLSAxMiArIDIwLjE1KS5hdHRyKCJ5MiIsbm9kZS55ICsgMzMgKyAxNy4yNSk7CgogICAgICAgICAgICAgICAgLy8gZDMuc2VsZWN0QWxsKCIuaGlkZV9hIikub24oImNsaWNrIiwgKGQpID0+IHsgaGlkZU5vZGVBbmRMaW5rcyhkKTsgfSkKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBzaG93VW5sb2NrKG5vZGUsIGkpIHsKICAgICAgICAgICAgICAgIHVubG9ja1BhdGggPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInBhdGgiKS5hdHRyKCdjbGFzcycsICdnX2NpcmNsZV9wYXRoJykKICAgICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgbm9kZS54ICsgIiwiICsgbm9kZS55ICsgIikiKS5hdHRyKCJkIiwgbGVmdEFyYykKICAgICAgICAgICAgICAgICAgICAuYXR0cigiZmlsbCIsICJyZ2IoMjEwLCAyMTMsIDIxOCkiKS5zdHlsZSgiY3Vyc29yIiwicG9pbnRlciIpCiAgICAgICAgICAgICAgICAgICAgLy8gLm9uKCJjbGljayIsIGZ1bmN0aW9uKGQpeyB1bmxvY2tOb2RlRml4ZWQoZCk7IH0pCiAgICAgICAgICAgICAgICAgICAgLm9uKCJtb3VzZW92ZXIiLCBmdW5jdGlvbigpeyB1bmxvY2tQYXRoLmF0dHIoImZpbGwiLCAicmdiKDE4NSwgMTg1LCAxODUpIikgfSkKICAgICAgICAgICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24oKSB7IHVubG9ja1BhdGguYXR0cigiZmlsbCIsICJyZ2IoMjEwLCAyMTMsIDIxOCkiKSB9KTsKCiAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsInVubG9ja19hIikKICAgICAgICAgICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgKG5vZGUueCAtIDUyKSArICIsIiArIChub2RlLnkgLSAzMCkgKyAiKSBzY2FsZSgwLjcpIikKICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCJkZWZzIikuYXBwZW5kKCJzdHlsZSIpCiAgICAgICAgICAgICAgICAgICAgLnRleHQoIi51bmxvY2tfYXtmaWxsOm5vbmU7c3Ryb2tlOiNGRkZGRkY7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLWxpbmVqb2luOnJvdW5kO3N0cm9rZS13aWR0aDoxLjVweDt9Iik7CgogICAgICAgICAgICAgICAgdW5sb2NrUGF0aC5hcHBlbmQoInRpdGxlIikuYXR0cigiY2xhc3MiLCJ1bmxvY2tfYSIpLnRleHQoIlVubG9jayIpOwogICAgICAgICAgICAgICAgdW5sb2NrX3BhdGgxID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJwYXRoIikuYXR0cigiY2xhc3MiLCJ1bmxvY2tfYSIpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoIiArIChub2RlLnggLSA0NSkgKyAiLCIgKyAobm9kZS55IC0gMjMpICsgIikiKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJkIiwgZDMuc3ZnLmFyYygpLm91dGVyUmFkaXVzKDUuMykuaW5uZXJSYWRpdXMoNSkuc3RhcnRBbmdsZSgtMS44KS5lbmRBbmdsZSgxLjgpKQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJmaWxsIiwgIiNGRkZGRkYiKTsKCiAgICAgICAgICAgICAgICB1bmxvY2tfcmVjdDEgPSBkMy5zZWxlY3QoJy5nX2NpcmNsZV8nKyBpKS5hcHBlbmQoInJlY3QiKS5hdHRyKCJjbGFzcyIsInVubG9ja19hIikuYXR0cigieCIsbm9kZS54IC0gNTIgKyA2Ljc1KS5hdHRyKCJ5Iixub2RlLnkgIC0gMzAgKyA5Ljc1KQogICAgICAgICAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsMTUpLmF0dHIoImhlaWdodCIsMTIpLmF0dHIoInJ4IiwxLjUpLmF0dHIoInJ5IiwxLjUpOwogICAgICAgICAgICAgICAgdW5sb2NrX2xpbmUxID0gZDMuc2VsZWN0KCcuZ19jaXJjbGVfJysgaSkuYXBwZW5kKCJsaW5lIikuYXR0cigiY2xhc3MiLCJ1bmxvY2tfYSIpLmF0dHIoIngxIixub2RlLnggIC0gNTIgKyAxNSkuYXR0cigieTEiLG5vZGUueSAtIDMwICsgMTUpLmF0dHIoIngyIixub2RlLnggIC0gNTIgKyAxNSkuYXR0cigieTIiLG5vZGUueSAtIDMwICsgMTgpOwoKICAgICAgICAgICAgICAgIC8vIGQzLnNlbGVjdEFsbCgiLnVubG9ja19hIikub24oImNsaWNrIiwgKGQpID0+IHsgdW5sb2NrTm9kZUZpeGVkKGQpOyB9KQoKICAgICAgICAgICAgfQogICAgICAgICAgICBmdW5jdGlvbiBoaWRlTm9kZUFuZExpbmtzKG5vZGUpIHsKICAgICAgICAgICAgICAgIGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICAgICAgICAgICAgY2lyY2xlX2cuYXR0cignbm9kZScsIGZ1bmN0aW9uKG4pIHsKICAgICAgICAgICAgICAgICAgICBpZihuLmlkID09PSBub2RlLmlkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGVkZ2VzX2xpbmUuYXR0cignZCcsIGZ1bmN0aW9uKGQpIHsKICAgICAgICAgICAgICAgICAgICBpZihkLnNvdXJjZS5pZCA9PT0gbm9kZS5pZCB8fCBkLnRhcmdldC5pZCA9PT0gbm9kZS5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QodGhpcykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTm9kZUFuZFBhdGgobm9kZSwgX3RoaXMpewogICAgICAgICAgICAgICAgZDMuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICAgICAgICBhbGVydCgnZGVsZXRlIHRoaXMgJysgbm9kZSArICcsJyArIF90aGlzICk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gZnVuY3Rpb24gc2hvd05vZGVJbmZvKG5vZGUsIF90aGlzKSB7CiAgICAgICAgICAgIC8vICAgICB3aW5kb3cuY29uc29sZS5sb2cobm9kZSk7CiAgICAgICAgICAgIC8vICAgICB3aW5kb3cuY29uc29sZS5sb2coX3RoaXMpOwogICAgICAgICAgICAvLwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIGZ1bmN0aW9uIHVubG9ja05vZGVGaXhlZChkKSB7CiAgICAgICAgICAgICAgICBkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5jbGFzc2VkKCJmaXhlZCIsIGQuZml4ZWQgPSBmYWxzZSk7Ly/op6PpmaToioLngrnkvY3nva7plIHlrpoKICAgICAgICAgICAgICAgIC8v5riF6Zmk5LiK5Liq6IqC54K555qE5ZyG5ZyI5Lul5Y+K5Zu+5qCHCiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcuZ19jaXJjbGVfcGF0aCcpLnJlbW92ZSgpOwogICAgICAgICAgICAgICAgc3ZnLnNlbGVjdEFsbCgnLnJlbW92ZV9hJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcuaGlkZV9hJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBzdmcuc2VsZWN0QWxsKCcudW5sb2NrX2EnKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZnVuY3Rpb24gTWVudSAobWVudSwgb3BlbkNhbGxiYWNrKSB7CgogICAgICAgICAgICAgICAgZDMuZXZlbnQucHJldmVudERlZmF1bHQoKTsKCiAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5kMy1jb250ZXh0LW1lbnUnKS5kYXRhKFsxXSkKICAgICAgICAgICAgICAgICAgICAuZW50ZXIoKQogICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2RpdicpCiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2QzLWNvbnRleHQtbWVudScpCgogICAgICAgICAgICAgICAgLy8gY2xvc2UgbWVudQogICAgICAgICAgICAgICAgZDMuc2VsZWN0KCdib2R5Jykub24oJ2NsaWNrLmQzLWNvbnRleHQtbWVudScsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3QoJy5kMy1jb250ZXh0LW1lbnUnKS5zdHlsZSgnZGlzcGxheScsICdub25lJykKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIHJldHVybiAoc2VsZWN0LCBldmVudCwgZGF0YSk9PiB7CgoKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3QudHlwZSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3NlbGVjdCcsZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgbGV0IGVsbSA9IHRoaXM7CgoKICAgICAgICAgICAgICAgICAgICBkMy5zZWxlY3RBbGwoJy5kMy1jb250ZXh0LW1lbnUnKS5odG1sKCcnKTsKICAgICAgICAgICAgICAgICAgICBsZXQgbGlzdCA9IGQzLnNlbGVjdEFsbCgnLmQzLWNvbnRleHQtbWVudScpLmFwcGVuZCgndWwnKTsKCiAgICAgICAgICAgICAgICAgICAgbGlzdC5zZWxlY3RBbGwoJ2xpJykuZGF0YShtZW51KS5lbnRlcigpCiAgICAgICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJ2xpJykKICAgICAgICAgICAgICAgICAgICAgICAgLmh0bWwoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkLnRpdGxlCiAgICAgICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCBmdW5jdGlvbiAoZCkgewoKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkLmFjdGlvbihkYXRhLCBzZWxlY3QpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmQzLWNvbnRleHQtbWVudScpLnN0eWxlKCdkaXNwbGF5JywgJ25vbmUnKQogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIG9wZW5DYWxsYmFjayBhbGxvd3MgYW4gYWN0aW9uIHRvIGZpcmUgYmVmb3JlIHRoZSBtZW51IGlzIGRpc3BsYXllZAogICAgICAgICAgICAgICAgICAgIC8vIGFuIGV4YW1wbGUgdXNhZ2Ugd291bGQgYmUgY2xvc2luZyBhIHRvb2x0aXAKICAgICAgICAgICAgICAgICAgICBpZiAob3BlbkNhbGxiYWNrKSBvcGVuQ2FsbGJhY2soZGF0YSk7CgogICAgICAgICAgICAgICAgICAgIC8vIGRpc3BsYXkgY29udGV4dCBtZW51CgogICAgICAgICAgICAgICAgICAgIGQzLnNlbGVjdCgnLmQzLWNvbnRleHQtbWVudScpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnbGVmdCcsIChldmVudC5wYWdlWCAtIDIpICsgJ3B4JykKICAgICAgICAgICAgICAgICAgICAgICAgLnN0eWxlKCd0b3AnLCAoZXZlbnQucGFnZVkgLSAyKSArICdweCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5zdHlsZSgnZGlzcGxheScsICdibG9jaycpOwogICAgICAgICAgICAgICAgICAgIGQzLmV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZhbHNlCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICB9CgoKICAgICAgICB9LAoKICAgICAgICBkb3VibGVDbGljayhpbmZvLG5vZGVzLCBpbnB1dCl7CgoKICAgICAgICAgICAgbGV0IG5ld19ub2RlID0gewogICAgICAgICAgICAgICAgJ2lkJzogbm9kZXMubGVuZ3RoLAogICAgICAgICAgICAgICAgInR5cGUiOiAibm9kZSIsCiAgICAgICAgICAgICAgICAncHJvcGVydGllcyc6IHsnbmFtZSc6IGlucHV0fQogICAgICAgICAgICB9OwoKICAgICAgICAgICAgY29uc29sZS5sb2coJzYuIGFkZCBub2RlJyk7CiAgICAgICAgICAgIGluZm8ubm9kZXMucHVzaChuZXdfbm9kZSk7CiAgICAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgoaW5mbyk7CgogICAgICAgICAgICAvLyB0aGlzLiRwcm9tcHQoCiAgICAgICAgICAgIC8vICAgICAnUGxlYXNlIGlucHV0IG5vZGUgbmFtZe+8micsCiAgICAgICAgICAgIC8vICAgICAnVGlwcycsCiAgICAgICAgICAgIC8vICAgICB7CiAgICAgICAgICAgIC8vICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdZZXMnLAogICAgICAgICAgICAvLyAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICdObycsCiAgICAgICAgICAgIC8vICAgICAgICAgaW5wdXRWYWx1ZTogJ05ldyBOb2RlJywKICAgICAgICAgICAgLy8gICAgICAgICBpbnB1dEVycm9yTWVzc2FnZTogJ0lucHV0IGNhbm5vdCBiZSBub25lJywKICAgICAgICAgICAgLy8gICAgICAgICBpbnB1dFZhbGlkYXRvcjogKHZhbHVlKSA9PiB7ICAgICAgIC8vIOeCueWHu+aMiemSruaXtu+8jOWvueaWh+acrOahhumHjOmdoueahOWAvOi/m+ihjOmqjOivgQogICAgICAgICAgICAvLyAgICAgICAgICAgICBpZighdmFsdWUpIHsKICAgICAgICAgICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiAnSW5wdXQgY2Fubm90IGJlIG5vbmUnOwogICAgICAgICAgICAvLyAgICAgICAgICAgICB9CiAgICAgICAgICAgIC8vICAgICAgICAgfSwKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gICAgIH0pLnRoZW4oKHt2YWx1ZX0pID0+IHsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gICAgICAgICBsZXQgbmV3X25vZGUgPSB7CiAgICAgICAgICAgIC8vICAgICAgICAgICAgICdpZCc6IG5vZGVzLmxlbmd0aCwKICAgICAgICAgICAgLy8gICAgICAgICAgICAgInR5cGUiOiAibm9kZSIsCiAgICAgICAgICAgIC8vICAgICAgICAgICAgICdwcm9wZXJ0aWVzJzogeyduYW1lJzogdmFsdWV9CiAgICAgICAgICAgIC8vICAgICAgICAgfTsKICAgICAgICAgICAgLy8KICAgICAgICAgICAgLy8gICAgICAgICBjb25zb2xlLmxvZygnNi4gYWRkIG5vZGUnKTsKICAgICAgICAgICAgLy8gICAgICAgICBpbmZvLm5vZGVzLnB1c2gobmV3X25vZGUpOwogICAgICAgICAgICAvLyAgICAgICAgIHRoaXMucmVuZGVyR3JhcGgoaW5mbyk7CiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIC8vIH0pLmNhdGNoKChlcnIpID0+IHsKICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgICAgICAgIC8vIH0pOwoKICAgICAgICB9LAoKICAgICAgICBzaW5nbGVDbGljayhpbmZvLCBub2RlLGlucHV0KXsKICAgICAgICAgICAgLy8gbGV0IHRlbXAgPSBbXTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3NpbmdsZSBjbGljayEnKTsKICAgICAgICAgICAgY29uc29sZS5sb2coJ25vZGUgaWQnLCBub2RlKTsKICAgICAgICAgICAgLy8gbGV0IHNvdXJjZSA9IG5vZGUuaWQ7CgoKICAgICAgICAgICAgaWYodGhpcy50ZW1wLmxlbmd0aCA9PT0yICYmIHRoaXMudGVtcFswXSAhPT0gdGhpcy50ZW1wWzFdICkKICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgIC8vIHRoaXMuJHByb21wdCgiQWRkIGxpbmtzPyIsICJUaXBzIiwgewogICAgICAgICAgICAgICAgLy8gICAgIGNvbmZpcm1CdXR0b25UZXh0OiAiWWVzIiwKICAgICAgICAgICAgICAgIC8vICAgICBjYW5jZWxCdXR0b25UZXh0OiAiTm8iLAogICAgICAgICAgICAgICAgLy8gICAgIGlucHV0VmFsdWU6ICdOZXcgTGluaycsCiAgICAgICAgICAgICAgICAvLyAgICAgaW5wdXRFcnJvck1lc3NhZ2U6ICdJbnB1dCBjYW5ub3QgYmUgbm9uZScsCiAgICAgICAgICAgICAgICAvLyAgICAgaW5wdXRWYWxpZGF0b3I6ICh2YWx1ZSkgPT4geyAgICAgICAvLyDngrnlh7vmjInpkq7ml7bvvIzlr7nmlofmnKzmoYbph4zpnaLnmoTlgLzov5vooYzpqozor4EKICAgICAgICAgICAgICAgIC8vICAgICAgICAgaWYoIXZhbHVlKSB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgICByZXR1cm4gJ0lucHV0IGNhbm5vdCBiZSBub25lJzsKICAgICAgICAgICAgICAgIC8vICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gICAgIH0sCiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gfSkudGhlbigoe3ZhbHVlfSkgPT4gewogICAgICAgICAgICAgICAgLy8gICAgIHRoaXMuJG1lc3NhZ2UoCiAgICAgICAgICAgICAgICAvLwogICAgICAgICAgICAgICAgLy8gICAgICAgICB7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWVzc2FnZTogJ0FkZCBMaW5rcyEnCiAgICAgICAgICAgICAgICAvLyAgICAgfSk7CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2coJ25ldyBsaW5rIGFkZGVkJyxpbmZvLmxpbmtzKTsKCiAgICAgICAgICAgICAgICBsZXQgbmV3X2xpbmsgPSB7CiAgICAgICAgICAgICAgICAgICAgInNvdXJjZSI6IHRoaXMudGVtcFswXSwKICAgICAgICAgICAgICAgICAgICAidGFyZ2V0IjogdGhpcy50ZW1wWzFdLAogICAgICAgICAgICAgICAgICAgICJ0eXBlIjogJ2xpbmsnLAogICAgICAgICAgICAgICAgICAgICJwcm9wZXJ0aWVzIjoge30sCiAgICAgICAgICAgICAgICAgICAgImxhYmVsIjogaW5wdXQKCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIGluZm8ubGlua3MucHVzaChuZXdfbGluayk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbmV3IGxpbmsgYWRkZWQnLCBpbmZvLmxpbmtzKTsKICAgICAgICAgICAgICAgIHRoaXMudGVtcC5sZW5ndGggPSAwOwogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaChpbmZvKQoKICAgICAgICAgICAgICAgIC8vIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICAgIC8vICAgICB0ZW1wLmxlbmd0aCA9IDA7CiAgICAgICAgICAgICAgICAvLyAgICAgdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgICAgICAvLyAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgICAgICAgIC8vICAgICAgICAgbWVzc2FnZTogJ0NhbmNlbCEnCiAgICAgICAgICAgICAgICAvLyAgICAgfSkKICAgICAgICAgICAgICAgIC8vIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYodGhpcy50ZW1wLmxlbmd0aCA9PT0yICYmIHRoaXMudGVtcFswXSA9PT0gdGhpcy50ZW1wWzFdICkKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdGhpcy50ZW1wLmxlbmd0aCA9IDA7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmICh0aGlzLnRlbXAubGVuZ3RoID09PTApewogICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHcmFwaChpbmZvKQogICAgICAgICAgICB9CgogICAgICAgICAgICBjb25zb2xlLmxvZygnY3VycmVudCBzZWxlY3Qgbm9kZSBpZCcsdGhpcy50ZW1wKQoKCiAgICAgICAgfSwKCgogICAgICAgIHN1Ym1pdERhdGEoKXsKICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Ym1pdCBkYXRhJyx0aGlzLmluZm8pOwogICAgICAgICAgICBhbGVydCgnU3VibWl0IFN1Y2Nlc3NmdWxseSEnKQogICAgICAgIH0sCgogICAgICAgIHJlbG9hZCgpewogICAgICAgICAgICB0aGlzLnJlbmRlckdyYXBoKHRoaXMuaW5mbykKICAgICAgICB9LAoKICAgICAgICBkZWxldGVOb2Rlcyhub2RlLGluZm8pewogICAgICAgICAgICBjb25zb2xlLmxvZygnc2VsZWN0IGRlbGV0ZSBub2RlJyxub2RlKQogICAgICAgIH0sCgoKCgogICAgICAgIHJlbW92ZU5vZGVDbGljaygpewoKICAgICAgICAgICAgY29uc29sZS5sb2coJ3JlbW92ZSBub2RlJykKCiAgICAgICAgfSwKCgoKCgoKCgogICAgfQoKCn0K"},{"version":3,"sources":["home.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8LA;;AAEA;AACA;AACA;AACA;AACA;;;;;AAKA;;;AAGA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;;;AAIA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;;;;;AAKA;AACA;;;;AAIA;AACA;;AAEA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AAKA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;;;;AAKA;;AAEA;;AAEA;;;;;;;;;AASA;;;AAGA","file":"home.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n\n\n\n\n    <div id=\"app\">\n        <el-container>\n\n\n            <el-row class=\"tac\">\n                <el-col >\n                    <h5>SustainKG</h5>\n                    <el-menu\n                            default-active=\"2\"\n                            class=\"el-menu-vertical-demo\"\n\n                    >\n                        <el-submenu index=\"1\">\n                            <template slot=\"title\">\n                                <i class=\"el-icon-location\"></i>\n                                <span>Operation</span>\n                            </template>\n                            <el-menu-item-group>\n                                <!--<template slot=\"title\">分组一</template>-->\n                                <el-menu-item index=\"1-1\" @click=\"submitData()\">Submit Data</el-menu-item>\n                                <el-menu-item index=\"1-2\">Upload Data</el-menu-item>\n                                <el-menu-item index=\"1-3\" @click=\"reload()\">Reload Data</el-menu-item>\n                            </el-menu-item-group>\n\n\n                        </el-submenu>\n                        <el-menu-item >\n                            <i class=\"el-icon-menu\"></i>\n                            <span slot=\"title\">Node Number：{{ info.nodes.length }}</span>\n                        </el-menu-item>\n                        <el-menu-item >\n                            <i class=\"el-icon-setting\"></i>\n                            <span slot=\"title\">Link Number：{{ info.links.length }}</span>\n                        </el-menu-item>\n                    </el-menu>\n                </el-col>\n                <router-view></router-view>\n\n            </el-row>\n\n            <el-dialog :visible.sync=\"dialogFormVisible\">\n                Node Name\n                <el-select\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"node_value\"\n                        placeholder=\"请选择\"\n                        clearable\n                        filterable\n                        @blur=\"selectBlur\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                ><el-option\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"addNodes\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_node_name\">\n                Change Node Name\n                <el-select\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_node_name\"\n                        placeholder=\"请选择\"\n                        clearable\n                        filterable\n                        @blur=\"selectBlur\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                ><el-option\n                        v-for=\"(item,index) in node_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_node_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n\n            <el-dialog :visible.sync=\"dialogFormVisible_link\">\n                Link Name\n\n                <el-select\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:50px;\"\n\n                        v-model=\"link_value\"\n                        placeholder=\"请选择\"\n                        clearable\n                        filterable\n                        @blur=\"selectBlur\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                ><el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                </el-select>\n\n\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\"  @click=\"addLinks\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n            <el-dialog :visible.sync=\"dialogFormVisible_change_link_name\">\n                Change Link Name\n                <el-select\n                        label-position=\"right\"\n                        label-width=\"86px\"\n                        style=\"width: 300px; margin-left:30px;\"\n\n                        v-model=\"new_link_name\"\n                        placeholder=\"请选择\"\n                        clearable\n                        filterable\n                        @blur=\"selectBlur\"\n                        @clear=\"selectClear\"\n                        @change=\"selectChange\"\n                ><el-option\n                        v-for=\"(item,index) in link_list\"\n                        :key=\"index\"\n                        :label=\"item.label\"\n                        :value=\"item.value\" ></el-option>\n                </el-select>\n                <div slot=\"footer\" class=\"dialog-footer\">\n                    <el-button @click=\"cancel\">\n                        No\n                    </el-button>\n                    <el-button type=\"primary\" :disabled=\"btnChangeEnable\" @click=\"change_link_name\">\n                        Yes\n                    </el-button>\n                </div>\n            </el-dialog>\n\n\n            <el-main id=\"graph\">\n                <!--<div id=\"graph\"></div>-->\n            </el-main>\n\n\n\n\n        </el-container>\n\n\n\n\n    </div>\n\n</template>\n\n<script>\n    import * as d3 from \"d3\";\n\n    import $ from 'jquery'\n    import {\n        getNodeSelfPath,\n        setLinkGroup,\n        getNodesLine,} from '../utils/deviceRelation'\n\n\n\n\n    export default {\n\n\n        data(){\n\n\n\n            let info = {\n                \"links\": [\n                    {\n                        \"source\" : 0,\n                        \"target\" : 1,\n                        \"type\" : \"link\",\n                        'label': 'Link TEST',\n                        \"properties\":{}\n\n                    },\n\n                ],\n                \"nodes\": [\n                    {\n                        \"id\": 0,\n                        \"type\" : \"node\",\n                        // \"factoryCode\" : \"hello\",\n                        \"label\" : \"Device\",\n                        \"properties\":{\"name\":\"hello\"}\n                        // \"linkId\": 1\n                    },\n                    {\n                        \"id\": 1,\n                        \"type\" : \"node\",\n                        // \"factoryCode\": \"Will\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"will\"}\n                        // \"linkId\": 0\n                    },\n                    {\n                        \"id\": 2,\n                        \"type\" : \"node\",\n                        // \"factoryCode\": \"lala\",\n                        \"label\": \"Device\",\n                        \"properties\":{\"name\":\"lala\"}\n                        // \"linkId\": 1\n                    },\n\n                ]\n            };\n\n\n\n            return {\n                node_value: '',\n                link_value:'',\n                btnChangeEnable: true,\n                node_list: [\n                    {\n                        value: 'node1',\n                        label: 'node1'\n                    }, {\n                        value: 'node2',\n                        label: 'node2'\n                    }\n                ],\n\n                link_list: [\n                    {\n                        value: 'link1',\n                        label: 'link1'\n                    }, {\n                        value: 'link2',\n                        label: 'link2'\n                    }\n                ],\n\n                info: info,\n                ifClicked:false,\n\n                selected_Node: '',\n\n                dialogFormVisible:false,\n                dialogFormVisible_link:false,\n                dialogFormVisible_change_node_name:false,\n                dialogFormVisible_change_link_name:false,\n                temp : [],\n                clickTimeId : 0,\n\n                node_id: '',\n                link_id: '',\n                new_link_name:'',\n                new_node_name:'',\n\n                menu: [\n                    {\n                        title: 'Delete Nodes',\n                        action: (node,select_node) => {\n\n                            this.$confirm(\"Delete this node?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The node is deleted!'\n                                    });\n                                console.log('test !!!',select_node)\n                                info.nodes.splice(select_node.index,1);\n                                for(let i =info.links.length-1; i>=0; i-- )\n                                {\n                                    console.log('link index',i,node);\n                                    if(info.links[i].source === select_node\n                                        || info.links[i].target === select_node)\n                                    {\n                                        info.links.splice(i,1);\n                                    }\n\n                                }\n\n                                console.log('after delete', info)\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n\n                    },\n                    {\n                        title: 'Change Node Name',\n                        action:(node_id)=>{\n                            this.dialogFormVisible_change_node_name = true;\n                            this.node_id = node_id;\n\n                        },\n\n                    },\n\n                ],\n\n                menu_edge:[\n                    {\n                        title: 'Delete Links',\n                        action: (link,selected_link) => {\n                            console.log('ll',link,selected_link);\n                            this.$confirm(\"Delete this link?\", \"Tips\", {\n                                confirmButtonText: \"Yes\",\n                                cancelButtonText: \"No\",\n                                type: \"warning\",\n                            }).then(() => {\n                                this.$message(\n\n                                    {\n                                        type: 'success',\n                                        message: 'The link is deleted!'\n                                    });\n                                info.links.splice(link,1);\n                                this.renderGraph(this.info);\n\n                            }).catch(() => {\n                                this.$message({\n                                    type: 'info',\n                                    message: 'Cancel Delete!'\n                                })\n\n                            });\n\n                        },\n\n                    },\n                    {\n                        title: 'Change link Name',\n                        action:(link_id)=>\n                        {\n                            this.dialogFormVisible_change_link_name = true;\n                            this.link_id = link_id;\n\n                        }\n\n                    }\n                ],\n\n\n\n            }\n        },\n\n        mounted() {\n\n            this.renderGraph(this.info);\n\n        },\n\n        methods: {\n\n\n            selectBlur(e) {\n                // 意见类型\n                this.btnChangeEnable = true;\n                if (e.target.value !== '') {\n\n                    console.log('No selection',e.target.value);\n                    this.$forceUpdate()   // 强制更新\n                }\n                this.selectClear()\n            },\n\n            selectClear() {\n                this.node_value = '';\n                this.link_value = '';\n                this.new_node_name = '';\n                this.new_link_name = '';\n                this.$forceUpdate()\n            },\n\n            selectChange(val) {\n                if(val !== '')\n                {\n                    this.btnChangeEnable = false\n                }\n                if(this.dialogFormVisible_link===true){\n                    this.link_value = val\n                }\n                else if (this.dialogFormVisible_change_link_name === true){\n                    this.new_link_name = val\n                }\n                else if (this.dialogFormVisible_change_node_name === true){\n                    this.new_node_name = val\n                }\n                else if(this.dialogFormVisible === true){\n                    this.node_value = val;\n                }\n                this.$forceUpdate()\n            },\n\n\n            cancel()\n            {\n                this.dialogFormVisible = false;\n                this.dialogFormVisible_link = false;\n                this.dialogFormVisible_change_node_name = false;\n                this.dialogFormVisible_change_link_name = false;\n                this.selectClear();\n                this.temp.length = 0;\n                this.btnChangeEnable = true;\n            },\n\n            addNodes(){\n                this.dialogFormVisible = false;\n                this.doubleClick(this.info, this.info.nodes, this.node_value);\n                this.selectClear()\n                this.btnChangeEnable = true;\n\n            },\n\n            change_node_name(){\n\n                this.info.nodes[this.node_id].properties.name = this.new_node_name;\n                this.dialogFormVisible_change_node_name = false;\n                this.selectClear();\n                this.btnChangeEnable = true;\n                this.renderGraph(this.info);\n            },\n\n\n            change_link_name()\n            {\n\n                this.info.links[this.link_id].label = this.new_link_name;\n                this.dialogFormVisible_change_link_name = false;\n                this.selectClear();\n                this.btnChangeEnable = true;\n                this.renderGraph(this.info)\n            },\n\n            addLinks()\n            {\n\n                this.dialogFormVisible_link = false;\n\n                if (this.temp.length === 2) {\n                    this.singleClick(this.info, this.selected_Node, this.link_value);\n                }\n\n                this.$message(\n\n                    {\n                        type: 'success',\n                        message: 'Add Links!'\n                    });\n                this.btnChangeEnable = true;\n                this.selectClear()\n\n            },\n\n\n            renderGraph(info) {\n                // let temp = [];\n\n\n                console.log('render data',info);\n                let {links, nodes} = info;\n\n                //关系分组\n                setLinkGroup(links);\n\n                //点击节点后弹出的灰色圆圈以及图标的定义，分为三组【1.删除、2.联系、3.解除位置锁定】\n                let [removePath,remove_rect1,remove_rect2,remove_line1,remove_line2,remove_line3] = [null];\n                let [unlockPath,unlock_path1,unlock_rect1,unlock_line1] = [null];\n                let [hidePath,hide_path1,hide_path2,hide_path3,hide_path4,hide_circle1,hide_line1] = [null];\n                let rightArc = d3.svg.arc().outerRadius(60).innerRadius(30).startAngle(0).endAngle(1.85);\n                let leftArc = d3.svg.arc().outerRadius(60).innerRadius(30).startAngle(4.5).endAngle(6.23);\n                let bottomArc = d3.svg.arc().outerRadius(60).innerRadius(30).startAngle(1.9).endAngle(4.45);\n\n                d3.select(\"#graph\").html('');\n\n\n                let force = d3.layout.force()//layout将json格式转化为力学图可用的格式\n                    .nodes(nodes)//设定节点数组\n                    .links(links)//设定连线数组\n                    .linkDistance(500)//连接线长度\n                    .charge(-1500)//顶点的电荷数。该参数决定是排斥还是吸引，数值越小越互相排斥\n                    .on(\"tick\", function (){\n                            tick()\n                        },\n                    )//指时间间隔，隔一段时间刷新一次画面\n                    .start();//开始转换\n\n\n\n                let zoom = d3.behavior.zoom()\n                    .scaleExtent([.4, 2])\n                    .on(\"zoom\", zoomed);\n\n                let svg = d3.select(\"#graph\").append(\"svg\")\n                    .attr(\"pointer-event\", \"all\")\n                    .attr(\"preserveAspectRatio\", \"xMidYMid meet\")//自适应容器大小\n                    .attr(\"viewBox\", \"-460 -220 1200 1200\")\n                    // .on(\"dblclick\", doubleClick)\n                    .call(zoom);\n\n\n\n\n                // old_nodes = nodes;\n                let circle_g = svg.selectAll(\"circle\")\n                    .data(force.nodes())//表示使用force.nodes数据\n                    .enter()\n                    .append(\"g\")\n                    .attr(\"class\",function(node,i){\n                        return \"g_circle_\" + i; })//标记circle的父节点\n                    .style(\"cursor\",\"pointer\")\n                    .call(drag()) //将当前选中的元素传到drag函数中，使顶点可以被拖动\n                    .on(\"click\", (node, i,) => {\n                        if (d3.event.defaultPrevented) return;\n\n                        // console.log('鼠标单击',this.clickTimeId);\n                        // console.log(d3.select(this))\n                        clearTimeout(this.clickTimeId);\n\n                        this.clickTimeId = setTimeout( ()=> {\n\n                                // console.log(\"鼠标单击\");\n\n                                // this.selected_Node = node;\n                                // this.addLinks()\n                                // console.log('selected_Node',this.selected_Node)\n                                this.temp.push(node.index);\n                                console.log('liuliu',this.temp);\n                                if(this.temp.length === 2 && this.temp[0] !== this.temp[1]){\n                                    this.dialogFormVisible_link = true;\n\n                                }\n                                else if(this.temp.length === 2 && this.temp[0] === this.temp[1])\n                                {\n                                    this.temp.length = 0\n                                }\n                                // this.singleClick(info, node, temp, this.state2);\n                                clickStyle(node, i, this);\n                            }\n                            , 250);\n                    })\n\n                    // .on('mouseover', (node) => {\n                    //     if (d3.event.defaultPrevented) return;\n                    //     // showNodeInfo(node, this);\n                    //     // showCircleBorderOuterArc(node, i);\n                    // })\n                    .on(\"dblclick\", (node, )=>{\n\n\n                        if (d3.event.defaultPrevented) return;\n                        console.log('double click',nodes);\n                        clearTimeout(this.clickTimeId);\n                        console.log('双击',this.clickTimeId);\n                        this.dialogFormVisible = true;\n                        // this.doubleClick(info, node, nodes, links)\n\n\n                    })\n                    .on('contextmenu',(d,node)=>{\n                        console.log('node!!!!!',d,node);\n                        Menu(this.menu)(d, d3.event, node)\n\n                    });\n\n\n\n\n                svg.on(\"dblclick.zoom\", null);//取消svg和圆圈的双击放大事件（d3中默认开启7个事件，关闭防止与上面的双击事件冲突）\n                circle_g.on(\"dblclick.zoom\", null);\n\n\n\n                //单击改变节点颜色 表明选中\n                function clickStyle(node, i, _this){\n\n                    console.log(_this.ifClicked);\n                    // _this.ifClicked = true;\n\n\n                    circle_g.attr('node', function(n) {\n\n                        console.log('click change color',n.id,node.id);\n                        console.log('selected node',n.index,node.index);\n\n                        if(n.index === node.index && _this.ifClicked===false ) {\n                            d3.select('.g_circle_'+ n.index).select('circle').style('fill','red');\n                            // 有问题！！！！！！！\n                            console.log('haha',d3.select('.g_circle_'+ n.index).select('circle'));\n                            _this.ifClicked = true;\n                            console.log('新选的 true',_this.ifClicked);\n\n                        }\n                        else if(n.index === node.index && _this.ifClicked===true )\n                        {\n                            d3.select('.g_circle_'+ n.index).select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);});\n                            _this.ifClicked = false;\n                            console.log('重复选的颜色变回去 false',_this.ifClicked);\n\n                        }\n                        else if(n.index !== node.index) {\n                            console.log('node are different');\n                            d3.select('.g_circle_'+ n.index)\n                                .select('circle')\n                                .style('fill', function (node) { return getCircleColor(node);})\n\n                        }\n                    });\n                }\n\n\n\n\n                //圆圈\n                let circle = circle_g.append(\"circle\")\n                    .style(\"stroke-width\", \"2px\")\n                    .attr(\"r\", 35)//设置圆圈半径\n                    .style(\"fill\", function (node) { return getCircleColor(node); });\n\n                let text = circle_g.append(\"text\")\n                    .attr(\"dy\", \".35em\")\n                    .attr(\"text-anchor\", \"middle\")//在圆圈中加上数据\n                    .style('fill', \"#FFFFFF\")\n                    .attr('x',function(d){ appendCircleText(d, this); });\n\n                //圆圈的提示文字\n                circle.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                text.append(\"svg:title\").text(function(node) {\n                    switch (node.type) {\n                        case 'node': return node.properties.name;\n                        // case 'Device': return node.factoryCode;\n                        // case 'Application': return node.applicationName;\n                        // case 'Position': return node.positionCode;\n                        // case 'Manufacturer': return node.manufacturerName;\n                        // case 'IotInfrastructure': return node.iotInfrastructureName;\n                        // case 'DeviceAdmin': return node.name;\n                    }\n                });\n                //设置连接线\n                const edges_line = svg.append(\"g\").selectAll(\".edgepath\")\n                    .data(force.links())\n                    .enter()\n                    .append(\"path\")\n                    .attr(\"marker-end\",  function (d, i) { return getMarkerArrow(i); })//根据箭头标记的id号标记箭头\n                    .style(\"stroke\", '#9aaabf')\n                    .style(\"stroke-width\", 4)//线条粗细\n                    .style(\"fill-opacity\",0)\n                    .style(\"cursor\",\"pointer\")\n                    .attr(\"id\", function (d, i) { return 'edgepath' + i; })\n                    .on(\"mouseover\", function(d){ return getStrokeWidth(d); })\n                    .on(\"mouseout\", function() { edges_line.style(\"stroke-width\", 3) })\n                    // .on('click', (link) => { this.deleteLine(this.info,link); })\n                    .on('contextmenu',(d,link)=>{\n                        console.log(d);\n                        console.log('link!!!',link)\n                        Menu(this.menu_edge)(d,d3.event,link)\n\n                    });\n\n                const edges_text = svg.append(\"g\").selectAll(\".edgetext\")\n                    .data(links)\n                    .enter()\n                    .append(\"text\")\n                    .style(\"pointer-events\", \"none\")\n                    .attr(\"class\",\"linetext\")\n                    .attr('text-anchor', \"middle\")\n                    .attr(\"fill-opacity\", 1)\n                    .style(\"cursor\",\"pointer\")\n                    .attr({'class': 'edgelabel', 'id': function (d, i) { return 'edgepath' + i; }, 'dx': 150, 'dy': 20, 'fill':'#9aaabf'});\n\n                //设置线条上的文字\n                edges_text.append('textPath')\n                    .attr('xlink:href', function (d, i) { return '#edgepath' + i })\n                    .attr(\"pointer-events\", \"none\").attr(\"font-size\", 15)\n                    .text(function (d) { return d.label; });\n\n\n                // force.on(\"tick\", tick)//指时间间隔，隔一段时间刷新一次画面\n                //     .start();//开始转换\n                function zoomed() {//svg下的g标签移动大小\n                    svg.selectAll(\"g\").attr(\"transform\", \"translate(\"  +d3.event.translate + \")scale(\" +d3.event.scale + \")\");\n                }\n\n                function getMarkerArrow(i) {\n                    svg.append(\"defs\").append(\"marker\")   //箭头\n                        .attr(\"id\", \"arrow\"+i)\n                        .attr(\"markerUnits\",\"strokeWidth\")//设置为strokeWidth箭头会随着线的粗细发生变化\n                        .attr(\"markerUnits\", \"userSpaceOnUse\")\n                        .attr(\"markerWidth\", 10)//标识的大小\n                        .attr(\"markerHeight\", 10)\n                        .attr(\"viewBox\", \"0 -4 12 15\")//坐标系的区域\n                        .attr(\"refX\", 0)//箭头坐标\n                        .attr(\"refY\", 0)\n                        .attr(\"orient\", 'auto')//绘制方向，可设定为：auto（自动确认方向）和 角度值\n                        .append(\"svg:path\")\n                        .attr(\"stroke-width\",1)//箭头宽度\n                        .attr(\"d\", \"M0,-5L10,0L0,5\")//箭头的路径\n                        .attr('fill', 'rgba(0,0,0, 0.4)');//箭头颜色\n                    return \"url(#arrow\" + i + \")\";\n                }\n\n                function getStrokeWidth(d) {\n                    edges_line.style(\"stroke-width\", function (edge) {\n                        // return edge.relation.relationshipId === d.relation.relationshipId ? 3 : 1;\n                        return 6\n                    });\n                }\n\n                function drag(){//拖拽函数\n                    return force.drag().on(\"dragstart\",function(d){\n                        d3.event.sourceEvent.stopPropagation(); //取消默认事件\n                        d.fixed = true;//拖拽开始后设定被拖拽对象为固定\n                    });\n                }\n\n                function circleClick(node, i, _this) {\n                    //获取当前节点是否包含圆环\n                    let existedRing = svg.select('.g_circle_' + i).selectAll('.g_circle_path');\n                    //清除上个节点的圆圈以及图标\n                    svg.selectAll('.g_circle_path').remove();\n                    svg.selectAll('.remove_a').remove();\n                    svg.selectAll('.hide_a').remove();\n                    svg.selectAll('.unlock_a').remove();\n                    if(existedRing && existedRing[0].length === 0) {\n                        //showCircleBorderOuterArc(node, i);\n                        //绘制灰色可点击圆圈，分为三部分分别绘制\n                        showRemove(node, i, _this);\n                        showUnlock(node, i, _this);\n                        showHide(node,i, _this);\n                    }\n                }\n\n                function getCircleColor(node) {\n                    let color = {\n                        'Device': \"#FF9D00\",\n                        'Position': \"#C477E9\",\n                        'Work': '#67CAF4',\n                        'Install': '#BCDD73',\n                        'Application': '#DD1E9E',\n                        'Manufacturer': '#DDBA9E',\n                        'IotInfrastructure': '#6ca5dd',\n                        'DeviceAdmin': '#50DD87',\n                    };//圆圈背景色\n                    return color[node.label] || '#C477E9';\n                }\n\n                function appendCircleText(d, _this) {\n                    let circleText = '';\n                    if(d.type === 'node' && d.properties.name) {\n                        circleText = d.properties.name;\n                    } else if(d.label === 'Position') {\n                        circleText = d.positionCode;\n                    } else if (d.label === 'Application') {\n                        circleText = d.applicationName;\n                    } else if (d.label === 'Manufacturer') {\n                        circleText = d.manufacturerName;\n                    } else if (d.label === 'IotInfrastructure') {\n                        circleText = d.iotInfrastructureName;\n                    } else if (d.label === 'DeviceAdmin') {\n                        circleText = d.name;\n                    }\n                    //如果小于四个字符，不换行\n                    if(circleText && circleText.length > 8){\n                        circleText = circleText.substring(0,8) + \"...\";\n                        d3.select(_this).text(function(){return '';});\n                    }\n                    d3.select(_this).append('tspan').attr('x',0).attr('y',0).attr(\"font-size\", 18)\n                        .text(function(){ return circleText; });\n                }\n\n\n\n\n                function tick() {\n\n                    circle.attr(\"transform\", transform1);//圆圈\n                    text.attr(\"transform\", transform2);//顶点文字\n                    edges_line.attr('d', function (d) {\n                        //绘制自己指向自己的路径\n                        // if(d.relation.isSelf) { return getNodeSelfPath(d) }\n                        //绘制两个节点之间的路径\n                        return getNodesLine(d);//曲线路径\n                    });\n\n                    // if(circleBorderOuterArcObj !== null) {\n                    //   circleBorderOuterArcObj.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n                    // }\n\n                    //绘制节点删除功能半圆环\n                    if(removePath !== null) {\n                        removePath.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n\n                        let r1 = null;\n                        remove_rect1.attr('d',function(d) { r1 = d; })\n                            .attr(\"x\",r1.x + 33 + 6.75).attr(\"y\",r1.y  - 36 + 9.75).attr(\"width\",5).attr(\"height\",3).attr(\"rx\",1.5).attr(\"ry\",1.5);\n\n                        let r2 = null;\n                        remove_rect2.attr('d',function(d) { r2 = d; })\n                            .attr(\"x\",r2.x + 30 + 6.75).attr(\"y\",r2.y  - 33 + 9.75).attr(\"width\",12).attr(\"height\",14).attr(\"rx\",1.5).attr(\"ry\",1.5);\n\n                        let l1 = null;\n                        remove_line1.attr('d',function(d) { l1 = d; })\n                            .attr(\"x1\",l1.x + 28 + 6.75).attr(\"y1\",l1.y - 33 + 9.75).attr(\"x2\",l1.x + 45 + 6.75).attr(\"y2\",l1.y - 33 + 9.75);\n\n                        let l2 = null;\n                        remove_line2.attr('d',function(d) { l2 = d; })\n                            .attr(\"x1\",l2.x + 34 + 6.75).attr(\"y1\",l2.y - 30 + 9.75).attr(\"x2\",l2.x + 34 + 6.75).attr(\"y2\",l2.y - 23 + 9.75);\n\n                        let l3 = null;\n                        remove_line3.attr('d',function(d) { l3 = d; })\n                            .attr(\"x1\",l3.x + 38 + 6.75).attr(\"y1\",l3.y - 30 + 9.75).attr(\"x2\",l3.x + 38 + 6.75).attr(\"y2\",l3.y - 23 + 9.75);\n                    }\n\n                    //绘制解除节点位置锁定半圆环\n                    if(unlockPath !== null) {\n                        unlockPath.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n                        unlock_path1.attr(\"transform\", function (d){ return \"translate(\"+ (d.x - 45) +\",\"+ (d.y - 23) +\")\" });\n\n                        let r1 = null;\n                        unlock_rect1.attr('d',function(d) { r1 = d; })\n                            .attr(\"x\",r1.x  - 52 + 6.75).attr(\"y\",r1.y - 30 + 9.75).attr(\"width\",15).attr(\"height\",12).attr(\"rx\",1.5).attr(\"ry\",1.5);\n\n                        let l1 = null;\n                        unlock_line1.attr('d',function(d) { l1 = d; })\n                            .attr(\"x1\",l1.x  - 52 + 15).attr(\"y1\",l1.y  - 30 + 15).attr(\"x2\",l1.x  - 52 +15).attr(\"y2\",l1.y  - 30 + 18);\n                    }\n\n                    //绘制隐藏节点和关系半圆环\n                    if(hidePath !== null) {\n                        hidePath.attr(\"transform\", function (d){ return \"translate(\"+d.x+\",\"+d.y+\")\" });\n\n                        hide_path1\n                            .attr(\"d\", function(d) {\n                                return \"M\" + (d.x - 13) + \",\" + (d.y + 42) + \"A15,15,0,0,1\" + (d.x + 13) + \",\" + (d.y + 42)\n                            });\n                        hide_path2\n                            .attr(\"d\", function(d) {\n                                return \"M\"+ (d.x - 12 + 10.4) + \",\" + (d.y + 34 + 10.937) + \"A\" + 3.749 + \",\" + 3.749 + \",0,1,1,\" + (d.x - 12 + 15.338) + \",\" + (d.y + 33 + 9)\n                            });\n                        hide_path3\n                            .attr(\"d\", function(d) {\n                                return \"M\" + (d.x - 12) + \",\" + (d.y + 42) + \"A20,20,0,0,0\" + (d.x - 4) + \",\" + (d.y + 47)\n                            });\n                        hide_path4\n                            .attr(\"d\", function(d) {\n                                return \"M\" + (d.x + 11) + \",\" + (d.y + 44) + \"A20,20,0,0,0\" + (d.x + 13) + \",\" + (d.y + 42)\n                            });\n\n                        let c1 = null;\n                        hide_circle1.attr('d',function(d) { c1 = d; })\n                            .attr(\"cx\",c1.x - 12 + 17.15).attr(\"cy\",c1.y + 33 + 17.25).attr(\"r\",6);\n\n                        let l1 = null;\n                        hide_line1.attr('d',function(d) { l1 = d; })\n                            .attr(\"x1\",l1.x - 12 + 14.15).attr(\"y1\",l1.y + 33 + 17.25).attr(\"x2\",l1.x - 12 + 20.15).attr(\"y2\",l1.y + 33 + 17.25);\n\n                    }\n\n                }\n\n                //设置圆圈和文字的坐标\n                function transform1(d) {\n                    return \"translate(\" + d.x + \",\" + d.y + \")\";\n                }\n\n                function transform2(d) {\n                    return \"translate(\" + (d.x) + \",\" + d.y + \")\";\n                }\n                function showRemove(node, i, _this) {\n                    removePath = d3.select('.g_circle_'+ i).append(\"path\").attr('class', 'g_circle_path')\n                        .attr(\"transform\", \"translate(\" + node.x + \",\" + node.y + \")\").attr(\"d\", rightArc)\n                        .attr(\"fill\", \"rgb(210, 213, 218)\")\n                        .style(\"cursor\",\"pointer\")\n                        // .on(\"click\", () => { removeNodeAndPath(node, _this); })\n                        .on(\"mouseover\", function(){ removePath.attr(\"fill\", \"rgb(185, 185, 185)\") })\n                        .on(\"mouseout\", function() { removePath.attr(\"fill\", \"rgb(210, 213, 218)\") });\n\n                    d3.select('.g_circle_'+ i).append(\"g\").attr(\"class\",\"remove_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x + 33) + \",\" + (node.y - 24) + \") scale(0.7)\")\n                        .append(\"defs\").append(\"style\")\n                        .text(\".remove_a{fill:none;stroke:#FFFFFF;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}\");\n\n                    removePath.append(\"title\").attr(\"class\",\"remove_a\").text(\"Remove\");\n                    remove_rect1 = d3.select('.g_circle_'+ i).append(\"rect\").attr(\"class\",\"remove_a\").attr(\"x\",node.x + 33 + 6.75).attr(\"y\",node.y  - 36 + 9.75)\n                        .attr(\"width\",5).attr(\"height\",3).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    remove_rect2 = d3.select('.g_circle_'+ i).append(\"rect\").attr(\"class\",\"remove_a\").attr(\"x\",node.x + 30 + 6.75).attr(\"y\",node.y  - 33 + 9.75)\n                        .attr(\"width\",12).attr(\"height\",14).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    remove_line1 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"remove_a\").attr(\"x1\",node.x + 28 + 6.75).attr(\"y1\",node.y - 33 + 9.75).attr(\"x2\",node.x + 45 + 6.75).attr(\"y2\",node.y - 33 + 9.75);\n                    remove_line2 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"remove_a\").attr(\"x1\",node.x + 34 + 6.75).attr(\"y1\",node.y - 30 + 9.75).attr(\"x2\",node.x + 34 + 6.75).attr(\"y2\",node.y - 23 + 9.75);\n                    remove_line3 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"remove_a\").attr(\"x1\",node.x + 38 + 6.75).attr(\"y1\",node.y - 30 + 9.75).attr(\"x2\",node.x + 38 + 6.75).attr(\"y2\",node.y - 23 + 9.75);\n\n                    // d3.selectAll(\".remove_a\").on(\"click\", () => { removeNodeAndPath(node, _this); })\n                }\n\n                function showHide(node,i) {\n                    hidePath = d3.select('.g_circle_'+ i).append(\"path\").attr('class', 'g_circle_path')\n                        .attr(\"transform\", \"translate(\" + node.x + \",\" + node.y + \")\").attr(\"d\", bottomArc)\n                        .attr(\"fill\", \"rgb(210, 213, 218)\")\n                        .style(\"cursor\",\"pointer\")\n                        // .on(\"click\", function(){ hideNodeAndLinks(node) })\n                        .on(\"mouseover\", function(){ hidePath.attr(\"fill\", \"rgb(185, 185, 185)\") })\n                        .on(\"mouseout\", function() { hidePath.attr(\"fill\", \"rgb(210, 213, 218)\") });\n\n                    d3.select('.g_circle_'+ i).append(\"g\").attr(\"class\",\"hide_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x - 8) + \",\" + (node.y + 38) + \") scale(0.7)\")\n                        .append(\"defs\").append(\"style\")\n                        .text(\".hide_a{fill:none;stroke:#FFFFFF;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}\");\n\n                    hidePath.append(\"title\").attr(\"class\",\"hide_a\").text(\"Hide\");\n\n                    hide_path1 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\" + (d.x - 13) + \",\" + (d.y + 42) + \"A15,15,0,0,1\" + (d.x + 13) + \",\" + (d.y + 42)\n                        });\n                    hide_path2 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\"+ (d.x - 12 + 10.4) + \",\" + (d.y + 34 + 10.937) + \"A\" + 3.749 + \",\" +  3.749 + \",0,1,1,\" + (d.x - 12 + 15.338) + \",\" + (d.y + 33 + 9)\n                        });\n                    hide_path3 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\" + (d.x - 12) + \",\" + (d.y + 42) + \"A20,20,0,0,0\" + (d.x - 4) + \",\" + (d.y + 47)\n                        });\n                    hide_path4 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"hide_a\")\n                        .attr(\"d\", function(d) {\n                            return \"M\" + (d.x + 11) + \",\" + (d.y + 44) + \"A20,20,0,0,0\" + (d.x + 13) + \",\" + (d.y + 42)\n                        });\n                    hide_circle1 = d3.select('.g_circle_'+ i).append(\"circle\").attr(\"class\",\"hide_a\").attr(\"cx\",node.x - 12 + 17.15).attr(\"cy\",node.y + 33 + 17.25).attr(\"r\",6);\n                    hide_line1 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"hide_a\").attr(\"x1\",node.x - 12 + 14.15).attr(\"y1\",node.y + 33 + 17.25).attr(\"x2\",node.x - 12 + 20.15).attr(\"y2\",node.y + 33 + 17.25);\n\n                    // d3.selectAll(\".hide_a\").on(\"click\", (d) => { hideNodeAndLinks(d); })\n                }\n                function showUnlock(node, i) {\n                    unlockPath = d3.select('.g_circle_'+ i).append(\"path\").attr('class', 'g_circle_path')\n                        .attr(\"transform\", \"translate(\" + node.x + \",\" + node.y + \")\").attr(\"d\", leftArc)\n                        .attr(\"fill\", \"rgb(210, 213, 218)\").style(\"cursor\",\"pointer\")\n                        // .on(\"click\", function(d){ unlockNodeFixed(d); })\n                        .on(\"mouseover\", function(){ unlockPath.attr(\"fill\", \"rgb(185, 185, 185)\") })\n                        .on(\"mouseout\", function() { unlockPath.attr(\"fill\", \"rgb(210, 213, 218)\") });\n\n                    d3.select('.g_circle_'+ i).append(\"g\").attr(\"class\",\"unlock_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x - 52) + \",\" + (node.y - 30) + \") scale(0.7)\")\n                        .append(\"defs\").append(\"style\")\n                        .text(\".unlock_a{fill:none;stroke:#FFFFFF;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}\");\n\n                    unlockPath.append(\"title\").attr(\"class\",\"unlock_a\").text(\"Unlock\");\n                    unlock_path1 = d3.select('.g_circle_'+ i).append(\"path\").attr(\"class\",\"unlock_a\")\n                        .attr(\"transform\", \"translate(\" + (node.x - 45) + \",\" + (node.y - 23) + \")\")\n                        .attr(\"d\", d3.svg.arc().outerRadius(5.3).innerRadius(5).startAngle(-1.8).endAngle(1.8))\n                        .attr(\"fill\", \"#FFFFFF\");\n\n                    unlock_rect1 = d3.select('.g_circle_'+ i).append(\"rect\").attr(\"class\",\"unlock_a\").attr(\"x\",node.x - 52 + 6.75).attr(\"y\",node.y  - 30 + 9.75)\n                        .attr(\"width\",15).attr(\"height\",12).attr(\"rx\",1.5).attr(\"ry\",1.5);\n                    unlock_line1 = d3.select('.g_circle_'+ i).append(\"line\").attr(\"class\",\"unlock_a\").attr(\"x1\",node.x  - 52 + 15).attr(\"y1\",node.y - 30 + 15).attr(\"x2\",node.x  - 52 + 15).attr(\"y2\",node.y - 30 + 18);\n\n                    // d3.selectAll(\".unlock_a\").on(\"click\", (d) => { unlockNodeFixed(d); })\n\n                }\n                function hideNodeAndLinks(node) {\n                    d3.event.stopPropagation();\n                    circle_g.attr('node', function(n) {\n                        if(n.id === node.id) {\n                            d3.select(this).remove();\n                        }\n                    });\n                    edges_line.attr('d', function(d) {\n                        if(d.source.id === node.id || d.target.id === node.id) {\n                            d3.select(this).remove();\n                        }\n                    });\n                }\n                function removeNodeAndPath(node, _this){\n                    d3.event.stopPropagation();\n                    alert('delete this '+ node + ',' + _this );\n                }\n                // function showNodeInfo(node, _this) {\n                //     window.console.log(node);\n                //     window.console.log(_this);\n                //\n                // }\n                function unlockNodeFixed(d) {\n                    d3.event.stopPropagation();\n                    d3.select(this).classed(\"fixed\", d.fixed = false);//解除节点位置锁定\n                    //清除上个节点的圆圈以及图标\n                    svg.selectAll('.g_circle_path').remove();\n                    svg.selectAll('.remove_a').remove();\n                    svg.selectAll('.hide_a').remove();\n                    svg.selectAll('.unlock_a').remove();\n                }\n\n                function Menu (menu, openCallback) {\n\n                    d3.event.preventDefault();\n\n                    d3.selectAll('.d3-context-menu').data([1])\n                        .enter()\n                        .append('div')\n                        .attr('class', 'd3-context-menu')\n\n                    // close menu\n                    d3.select('body').on('click.d3-context-menu', function () {\n                        d3.select('.d3-context-menu').style('display', 'none')\n                    });\n\n                    return (select, event, data)=> {\n\n\n                        console.log(select.type);\n                        console.log('select',data);\n                        let elm = this;\n\n\n                        d3.selectAll('.d3-context-menu').html('');\n                        let list = d3.selectAll('.d3-context-menu').append('ul');\n\n                        list.selectAll('li').data(menu).enter()\n                            .append('li')\n                            .html(function (d) {\n                                return d.title\n                            })\n                            .on('click', function (d) {\n\n\n                                d.action(data, select);\n\n                                d3.select('.d3-context-menu').style('display', 'none')\n                            });\n\n                        // the openCallback allows an action to fire before the menu is displayed\n                        // an example usage would be closing a tooltip\n                        if (openCallback) openCallback(data);\n\n                        // display context menu\n\n                        d3.select('.d3-context-menu')\n                            .style('left', (event.pageX - 2) + 'px')\n                            .style('top', (event.pageY - 2) + 'px')\n                            .style('display', 'block');\n                        d3.event.preventDefault();\n                        // return false\n                    }\n\n                }\n\n\n            },\n\n            doubleClick(info,nodes, input){\n\n\n                let new_node = {\n                    'id': nodes.length,\n                    \"type\": \"node\",\n                    'properties': {'name': input}\n                };\n\n                console.log('6. add node');\n                info.nodes.push(new_node);\n                this.renderGraph(info);\n\n                // this.$prompt(\n                //     'Please input node name：',\n                //     'Tips',\n                //     {\n                //         confirmButtonText: 'Yes',\n                //         cancelButtonText: 'No',\n                //         inputValue: 'New Node',\n                //         inputErrorMessage: 'Input cannot be none',\n                //         inputValidator: (value) => {       // 点击按钮时，对文本框里面的值进行验证\n                //             if(!value) {\n                //                 return 'Input cannot be none';\n                //             }\n                //         },\n                //\n                //     }).then(({value}) => {\n                //\n                //         let new_node = {\n                //             'id': nodes.length,\n                //             \"type\": \"node\",\n                //             'properties': {'name': value}\n                //         };\n                //\n                //         console.log('6. add node');\n                //         info.nodes.push(new_node);\n                //         this.renderGraph(info);\n                //\n                // }).catch((err) => {\n                //     console.log(err);\n                // });\n\n            },\n\n            singleClick(info, node,input){\n                // let temp = [];\n                console.log('single click!');\n                console.log('node id', node);\n                // let source = node.id;\n\n\n                if(this.temp.length ===2 && this.temp[0] !== this.temp[1] )\n                {\n\n                    // this.$prompt(\"Add links?\", \"Tips\", {\n                    //     confirmButtonText: \"Yes\",\n                    //     cancelButtonText: \"No\",\n                    //     inputValue: 'New Link',\n                    //     inputErrorMessage: 'Input cannot be none',\n                    //     inputValidator: (value) => {       // 点击按钮时，对文本框里面的值进行验证\n                    //         if(!value) {\n                    //             return 'Input cannot be none';\n                    //         }\n                    //     },\n                    //\n                    // }).then(({value}) => {\n                    //     this.$message(\n                    //\n                    //         {\n                    //         type: 'success',\n                    //         message: 'Add Links!'\n                    //     });\n                    //     console.log('new link added',info.links);\n\n                    let new_link = {\n                        \"source\": this.temp[0],\n                        \"target\": this.temp[1],\n                        \"type\": 'link',\n                        \"properties\": {},\n                        \"label\": input\n\n                    };\n\n                    info.links.push(new_link);\n                    console.log('new link added', info.links);\n                    this.temp.length = 0;\n                    this.renderGraph(info)\n\n                    // }).catch(() => {\n                    //     temp.length = 0;\n                    //     this.$message({\n                    //         type: 'info',\n                    //         message: 'Cancel!'\n                    //     })\n                    // });\n                }\n                else if(this.temp.length ===2 && this.temp[0] === this.temp[1] )\n                {\n                    this.temp.length = 0;\n                }\n\n                if (this.temp.length ===0){\n                    this.renderGraph(info)\n                }\n\n                console.log('current select node id',this.temp)\n\n\n            },\n\n\n            submitData(){\n                console.log('submit data',this.info);\n                alert('Submit Successfully!')\n            },\n\n            reload(){\n                this.renderGraph(this.info)\n            },\n\n            deleteNodes(node,info){\n                console.log('select delete node',node)\n            },\n\n\n\n\n            removeNodeClick(){\n\n                console.log('remove node')\n\n            },\n\n\n\n\n\n\n\n\n        }\n\n\n    }\n</script>\n\n<style>\n    #graph {\n        width: 100vw;\n        height: 100vh;\n    }\n\n    .d3-context-menu {\n        position: absolute;\n        display: none;\n        background-color: #f2f2f2;\n        border-radius: 4px;\n\n        font-family: Arial, sans-serif;\n        font-size: 14px;\n        min-width: 150px;\n        border: 1px solid #d4d4d4;\n\n        z-index:1200;\n    }\n\n    .d3-context-menu ul {\n        list-style-type: none;\n        margin: 4px 0px;\n        padding: 0px;\n        cursor: default;\n    }\n\n    .d3-context-menu ul li {\n        padding: 4px 16px;\n    }\n\n    .d3-context-menu ul li:hover {\n        background-color: #4677f8;\n        color: #fefefe;\n    }\n\n\n</style>\n\n"]}]}